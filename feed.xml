<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://gunee20.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://gunee20.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-08-05T22:28:13+00:00</updated><id>https://gunee20.github.io/feed.xml</id><title type="html">Min-Geun Park</title><subtitle>A Mechanical Engineer with a keen interest in controller design. </subtitle><entry><title type="html">[Controller Design] Day8: Sliding Mode Control</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-8/" rel="alternate" type="text/html" title="[Controller Design] Day8: Sliding Mode Control"/><published>2024-07-29T04:00:00+00:00</published><updated>2024-07-29T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-8</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-8/"><![CDATA[<h1 id="i-introduction">I. Introduction</h1> <p>Sliding Mode Control (SMC) is a robust control technique designed for nonlinear systems. It’s particularly effective in applications requiring strict regulatory compliance and resilience against disturbances or model uncertainties. SMC operates by driving system dynamics to a predetermined sliding surface and maintaining it there, ensuring stable and predictable system behavior.</p> <h3 id="1-principles-of-smc">1. Principles of SMC</h3> <h5 id="a-fundamentals">a) Fundamentals</h5> <ol> <li> <p><strong>System Dynamics</strong> SMC is applicable to nonlinear systems described by:</p> \[\dot{x} = f(x) + g(x)u \tag{1}\] <p>where \(x\) is the state vector, \(u\) is the control input, and \(f(x)\) and \(g(x)\) represent the system dynamics and input effects, respectively.</p> </li> <li> <p><strong>Sliding Surface</strong> The core of SMC is the sliding surface \(S(x)\), which guides the system towards desired behavior:</p> \[S(x) = \left(\frac{d}{dt}+\lambda\right)^{n-1}x \tag{2}\] <p>where \(n\) is the system order and \(\lambda\) is a positive constant. The control objective is to achieve and maintain \(S(x) = 0\).</p> </li> <li> <p><strong>Sliding Condition</strong> For the state trajectory to reach and remain on the sliding surface:</p> \[S(x) = 0 \text{ and } \dot{S}(x) = 0 \tag{3}\] <p>The derivative of \(S(x)\) is crucial for control law design:</p> \[\dot{S}(x) = \left(\frac{d}{dt}+\lambda\right)^{n-1}\left(f(x)+g(x)u\right) \tag{4}\] </li> <li> <p><strong>Control Law</strong> The SMC control law consists of two components:</p> \[u = u_{eq} + u_{dis} \tag{5}\] <p>a) <strong>Equivalent Control (\(u_{eq}\))</strong> Maintains the system state on the sliding surface:</p> \[u_{eq} = - \frac{f(x)}{g(x)} \tag{6}\] <p>b) <strong>Discontinuous Control (\(u_{dis}\))</strong> Drives state trajectories towards the sliding surface and ensures robustness:</p> \[u_{dis} = -k \text{sgn}(S(x)) \tag{7}\] <p>where \(k\) is a positive constant determining control strength, and \(\text{sgn}(S(x))\) is the signum function:</p> \[\text{sgn}(x) = \begin{cases} 1, &amp; \text{if } x &gt; 0 \\ 0, &amp; \text{if } x = 0 \\ -1, &amp; \text{if } x &lt; 0 \end{cases} \tag{8}\] <p>The total control input thus becomes:</p> \[u = - \frac{f(x)}{g(x)} - k \text{sgn}(S(x)) \tag{9}\] </li> </ol> <p>This control law ensures that the system state is driven to and maintained on the sliding surface, compensating for uncertainties and disturbances.</p> <h5 id="b-advantages-and-limitations">b) Advantages and Limitations</h5> <p><strong>Advantages:</strong></p> <ul> <li>Exceptional robustness against model uncertainties and external disturbances</li> <li>Guaranteed finite-time convergence to the sliding surface</li> <li>Relatively simple implementation once the sliding surface is defined</li> </ul> <p><strong>Limitations:</strong></p> <ul> <li>Chattering: High-frequency switching of the control input can cause wear on actuators</li> <li>Model dependence: Extreme changes in system dynamics may require controller adjustments</li> <li>Design complexity: Requires deep understanding of system dynamics for optimal performance</li> </ul> <h5 id="c-applications">c) Applications</h5> <p>SMC finds wide application in fields requiring robust control under dynamic conditions:</p> <ol> <li>Robotics: Arm manipulation, mobile robot navigation</li> <li>Automotive systems: Anti-lock braking, active suspension control</li> <li>Aerospace engineering: Spacecraft attitude control, flight systems</li> <li>Power systems: Converters, wind turbine control</li> <li>Process control: Chemical reactors, temperature regulation</li> <li>Biomedical systems: Prosthetic limb control, drug delivery</li> </ol> <p>The versatility and robustness of SMC make it a valuable tool across various engineering disciplines, particularly where precise control is crucial despite uncertainties and disturbances.</p> <h3 id="2-implementing-smc-for-inverted-pendulum">2. Implementing SMC for Inverted Pendulum</h3> <p>To apply Sliding Mode Control to my inverted pendulum system, I need to derive the system equations in a form suitable for SMC implementation. Let’s walk through this process step by step.</p> <h5 id="a-deriving-system-equations">a) Deriving System Equations</h5> <ol> <li> <p><strong>Starting Point: Equation of Motion</strong> I begin with the equation of motion from my <a href="/blog/2024/Controller-Design-Day-6/#Equation4">previous analysis</a>:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \cos\theta \\ -\frac{1}{2}m_1 l_1 \cos\theta &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta} \end{bmatrix} + \begin{bmatrix} \frac{1}{2}m_1 l_1 \sin\theta \cdot\dot{\theta}^2 \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ - \frac{1}{2}g m_1 l_1\sin\theta \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix} \tag{10}\] </li> <li> <p><strong>Solving for Accelerations</strong> To obtain expressions for \(\ddot{x}\) and \(\ddot{\theta}\), I invert the mass matrix:</p> \[\begin{bmatrix} \ddot{x} \\ \ddot{\theta} \end{bmatrix} = \begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \cos\theta \\ -\frac{1}{2}m_1 l_1 \cos\theta &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix}^{-1} \begin{bmatrix} F - \frac{1}{2}m_1 l_1 \sin\theta \cdot\dot{\theta}^2\\ \frac{1}{2}g m_1 l_1\sin\theta \end{bmatrix} \tag{11}\] </li> <li> <p><strong>Explicit Expressions</strong> After performing the matrix operations, I get:</p> \[\begin{bmatrix} \ddot{x} \\ \ddot{\theta} \end{bmatrix} = \begin{bmatrix} \frac{4F - 2m_1l_1\sin\theta\cdot\dot{\theta}^2 + 3gm_1\cos\theta\sin\theta}{4m_0 + 4m_1 - 3m_1\cos^2\theta} \\ \frac{6\cos\theta(F - \frac{1}{2}m_1l_1\sin\theta\cdot\dot{\theta}^2)}{l_1(4m_0 + 4m_1 - 3m_1\cos^2\theta)} + \frac{6g(m_0 + m_1)\sin\theta}{l_1(4m_0 + 4m_1 - 3m_1\cos^2\theta)} \end{bmatrix} \tag{12}\] </li> <li> <p><strong>SMC-Compatible Form</strong> For SMC implementation, I need to express my system’s equations of motion in a form that separates the system dynamics from the control input:</p> \[\begin{aligned} \ddot{x} &amp;= f_x(q, \dot{q}) + g_x(q)u \\ \ddot{\theta} &amp;= f_{\theta}(q, \dot{q}) + g_{\theta}(q)u \end{aligned} \tag{13}\] <p>where \(q = (x, \theta)^T\) represents the generalized coordinates, \(\dot{q} = (\dot{x}, \dot{\theta})^T\) are their derivatives, and \(u = F\) is my control input.</p> <p>This form separates the nonlinear dynamics (\(f_x\) and \(f_{\theta}\)) from the control influence (\(g_x\) and \(g_{\theta}\)), which is crucial for SMC design. Comparing with my explicit expressions in (11), I can identify:</p> \[f_x(q, \dot{q}) = \frac{m_1\sin\theta(3g\cos\theta - 2l_1\dot{\theta}^2)}{4m_0 + 4m_1 - 3m_1\cos^2\theta} \tag{14}\] \[g_x(q) = \frac{4}{4m_0 + 4m_1 - 3m_1\cos^2\theta} \tag{15}\] \[f_{\theta}(q, \dot{q}) = \frac{3\sin\theta(2gm_0 + 2gm_1 - l_1m_1\cos\theta\cdot\dot{\theta}^2)}{l_1(4m_0 + 4m_1 - 3m_1\cos^2\theta)} \tag{16}\] \[g_{\theta}(q) = \frac{6\cos\theta}{l_1(4m_0 + 4m_1 - 3m_1\cos^2\theta)} \tag{17}\] </li> </ol> <p>These equations now provide me with the necessary structure to design my Sliding Mode Controller for the inverted pendulum system.</p> <h5 id="b-sliding-mode-controller-design">b) Sliding Mode Controller Design</h5> <p>In this section, I will implement the decoupled sliding mode control based on the work of Coban and Ata (2017): <code class="language-plaintext highlighter-rouge">Decoupled sliding mode control of an inverted pendulum on a cart: An experimental study</code>. This approach separates the control of the cart’s position and the pendulum’s angle, offering potentially better performance than coupled control methods.</p> <p>Note: There is an alternative coupled sliding mode control approach by Park and Chwa (2009): <code class="language-plaintext highlighter-rouge">Swing-Up and Stabilization Control of Inverted-Pendulum Systems via Coupled Sliding-Mode Control Method</code>, which I plan to implement in future work.</p> <ol> <li> <p><strong>Decoupled Sliding Surfaces</strong></p> <p>I define two separate sliding surfaces, \(S_x\) for the cart position and \(S_{\theta}\) for the pendulum angle:</p> \[S_{x} = C_x x +\dot{x} \tag{18}\] \[S_{\theta} = C_{\theta}\left(\theta - z\right) + \dot{\theta} \tag{19}\] <p>where:</p> <ul> <li>\(C_x\) and \(C_{\theta}\) are positive constants that determine the slope of the sliding surfaces</li> <li>\(z\) is a nonlinear function that couples the two sliding surfaces:</li> </ul> \[z = \text{sat}\left(\frac{S_x}{\phi_x}\right)z_u \tag{20}\] <p>The saturation function \(\text{sat}\) is defined as:</p> \[\text{sat}(\gamma) = \begin{cases} \text{sgn}(\gamma) &amp; \text{for } |\gamma|\ge 1 \\ \gamma &amp; \text{for } |\gamma| &lt; 1 \end{cases} \tag{21}\] <p>Here, \(0&lt;z_u&lt;1\) is a design parameter, and \(\phi_x\) is a positive constant.</p> </li> <li> <p><strong>Control Law</strong></p> <p>The control law is designed as:</p> \[u = u_{eq} - K\text{sat}\left(S_{\theta}\frac{g_{\theta}}{\phi_{\theta}}\right) \tag{22}\] <p>where:</p> <ul> <li>\(u_{eq}\) is the equivalent control term:</li> </ul> \[u_{eq} = \frac{-C_{\theta}\theta-f_{\theta}}{g_{\theta}} \tag{23}\] <ul> <li>\(K\) is a positive constant gain</li> <li>\(\phi_{\theta}\) is a positive constant similar to \(\phi_x\)</li> <li>\(f_{\theta}\) and \(g_{\theta}\) are as defined in the previous section</li> </ul> </li> </ol> <p>This decoupled design allows for separate tuning of the cart position and pendulum angle control, potentially leading to improved overall system performance.</p> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system-inputoutput-plant">1. Overall System, Input/Output, Plant</h3> <h3 id="1-overall-system-inputoutput-and-plant">1. Overall System, Input/Output, and Plant</h3> <p>The fundamental structure of the overall system, including the input/output and plant blocks, remains consistent with the model presented in <a href="/blog/2024/Controller-Design-Day-6/#Modeling">Day 6</a>. However, an enhancement has been made to improve the robustness of our analysis:</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/01_Overall-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/01_Overall-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/01_Overall-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/01_Overall.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Block Diagram of the Overall System, featuring the added Disturbance block. </div> <p><strong>Key Addition:</strong></p> <ul> <li><strong>Disturbance Block</strong>: This new component generates random values characterized by specified magnitude and frequency.</li> </ul> <p><strong>Significance of the Disturbance Block:</strong></p> <ol> <li><strong>Realism</strong>: It simulates real-world uncertainties and external forces that can affect the inverted pendulum system.</li> <li><strong>Robustness Testing</strong>: Allows for evaluation of the controller’s performance under varying levels of disturbance.</li> <li><strong>Adaptability Assessment</strong>: Helps in understanding how well the system can maintain stability and performance in non-ideal conditions.</li> </ol> <p>The inclusion of this disturbance block represents a step towards more comprehensive and realistic system modeling, enabling a more thorough analysis of our control strategy’s effectiveness and limitations.</p> <h3 id="2-controller-block">2. Controller Block</h3> <p>Figure 2 presents the block diagram of the SMC implementation. This diagram visually represents the interconnection of various components that make up our control system, each corresponding to specific equations derived in the previous section.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/02_Controller-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/02_Controller-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/02_Controller-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/02_Controller.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 2. Block Diagram of the Controller Components for Sliding Mode Control. </div> <p>Each block in Figure 2 corresponds to Equations 16 through 23, which define the core elements of our SMC strategy. These individual components are further detailed in Figures 2 through 8, providing a closer look at their Simulink implementations.</p> <p>Of particular note is the block representing Equation 22, shown in Figure 8. Here, I’ve incorporated both a saturation function (as per the decoupled SMC design) and a sign function, selectable via a manual switch. This modification allows for comparison between the proposed decoupled SMC and a more conventional SMC approach that uses a sign function instead of saturation.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/03_Eqn_16-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/03_Eqn_16-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/03_Eqn_16-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/03_Eqn_16.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 3. Equation 16 </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/04_Eqn_17-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/04_Eqn_17-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/04_Eqn_17-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/04_Eqn_17.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 4. Equation 17 </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/05_Eqn_18-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/05_Eqn_18-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/05_Eqn_18-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/05_Eqn_18.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 5. Equation 18 </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/06_Eqn_19-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/06_Eqn_19-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/06_Eqn_19-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/06_Eqn_19.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 6. Equation 19 </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/07_Eqn_20-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/07_Eqn_20-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/07_Eqn_20-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/07_Eqn_20.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 7. Equation 20 </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/08_Eqn_22-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/08_Eqn_22-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/08_Eqn_22-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/08_Eqn_22.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 8. Equation 22 </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/09_Eqn_23-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/09_Eqn_23-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/09_Eqn_23-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/09_Eqn_23.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 9. Equation 23 </div> </swiper-slide> </swiper-container> </div> <h1 id="iii-simulation">III. Simulation</h1> <h3 id="1-stability-test">1. Stability Test</h3> <p>To assess the system’s stability characteristics, I conducted a series of simulations with varying values of \(C_x\). The other system parameters were held constant as follows:</p> \[\begin{array}{l} C_{\theta} = 10, \quad \phi_x = 1, \quad \phi_{\theta} = 2.3 \\ K = 0.05, \quad z_u = 0.5, \quad d = 0 \end{array}\] <p>Where \(d\) represents the magnitude of disturbance, set to zero for this initial stability analysis.</p> <p>The key variable in this test was \(C_x\), which I varied across four values: [0.1, 1, 5, 10]. This range was chosen to observe the system’s behavior from very low to relatively high values of \(C_x\).</p> <p>The results of these simulations, presented in Video 1 and Figures 10-15, reveal three distinct stability regimes as \(C_x\) increases:</p> <ul> <li><strong>Stable (\(C_x = 0.1, 1, 5\))</strong>: <ul> <li>Both \(x\) and \(\theta\) converge to equilibrium</li> <li>As \(C_x\) increases: <ul> <li>Settling time (\(t_{ss}\)) initially decreases</li> <li>System response transitions from overdamped to underdamped</li> </ul> </li> <li>At \(C_x = 5\), oscillations become more pronounced, indicating approach to stability limit</li> </ul> </li> </ul> <ul> <li><strong>Marginally Stable (\(\theta\) when \(C_x = 10\))</strong>: <ul> <li>\(\theta\) oscillates with constant amplitude of 0.5</li> <li>Oscillation period increases over time</li> </ul> </li> </ul> <ul> <li><strong>Unstable (\(x\) when \(C_x = 10\))</strong>: <ul> <li>\(x\) diverges</li> <li>Both amplitude and period of oscillations increase over time</li> </ul> </li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-29-Controller-Design-Day-8/01_Stability.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Comparison of system responses with varying \(C_x = [0.1, 1, 5, 10]\) </div> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/10_Cx_x-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/10_Cx_x-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/10_Cx_x-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/10_Cx_x.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 10. Response of Linear Displacement with Varying \(C_x = [0.1, 1, 5, 10]\) </div> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/11_Cx_theta-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/11_Cx_theta-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/11_Cx_theta-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/11_Cx_theta.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 11. Response of Angular Displacement with Varying \(C_x = [0.1, 1, 5, 10]\) </div> <p><strong>Phase Portrait Analysis:</strong></p> <ul> <li>System trajectory shows two distinct phases: reaching and sliding</li> <li>After reaching the sliding surface, system converges along this surface to equilibrium</li> <li>\(S_x=0\) appears as a straight line (constant \(C_x\)), while \(S_{\theta}\) is nonlinear (due to \(z\))</li> <li>For \(C_x = 10\), phase portrait shows \(x\) diverging and \(\theta\) in a limit cycle</li> </ul> <p><strong>Sliding Surface Analysis:</strong> The behavior of the sliding surfaces \(S_x\) and \(S_{\theta}\) provides valuable insights into the system’s dynamics across different \(C_x\) values:</p> <ul> <li>\(C_x = 1\) compared to \(C_x = 0.1\): <ul> <li>\(S_{\theta}\) reaches zero faster</li> <li>\(S_x\) reaches zero slower</li> <li>Key Insight: Faster convergence to sliding surfaces doesn’t necessarily mean faster overall stabilization</li> <li>Observation: Reaching mode may be faster while Sliding mode is slower</li> </ul> </li> </ul> <ul> <li>\(C_x = 5\) : <ul> <li>Both \(S_x\) and \(S_{\theta}\) exhibit oscillations</li> <li>Indicates approach to stability limit</li> </ul> </li> </ul> <ul> <li>\(C_x =10\): <ul> <li>\(S_{\theta}\) remains mostly at zero</li> <li>\(S_x\) diverges</li> <li>Despite \(S_{\theta}=0\), \(\theta \neq 0\) (not at equilibrium)</li> <li>Key Insight: \(S = 0\) does not imply the system is at equilibrium but in Sliding Mode</li> </ul> </li> </ul> <p><strong>General Observations:</strong></p> <ol> <li>The relationship between sliding surface convergence and system stabilization is not always straightforward.</li> <li>Oscillations in sliding surfaces can indicate impending instability.</li> <li>Achieving \(S=0\) is necessary but not sufficient for system equilibrium, especially at higher \(C_x\) values.</li> </ol> <div style="width: 100%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_x_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_x_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_x_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_x_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_theta_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_theta_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_theta_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_theta_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_S_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_S_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_S_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/12_S_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_x_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_x_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_x_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_x_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_theta_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_theta_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_theta_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_theta_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_S_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_S_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_S_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/13_S_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_x_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_x_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_x_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_x_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_theta_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_theta_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_theta_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_theta_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_S_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_S_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_S_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/14_S_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_x_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_x_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_x_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_x_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_theta_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_theta_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_theta_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_theta_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6 mx-auto"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_S_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_S_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_S_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/15_S_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> </div> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 12 - 15: System behavior with varying \(C_x = [0.1, 1, 5, 10]\). (a) Phase Portraits \(\dot{x} vs. x\), (b) Phase Portraits \(\dot{\theta} vs. \theta\), (c) Sliding Surfaces \(S_x\) and \(S_θ\) </div> <p>In summary, as \(C_x\) increases, I observe a transition from slow, overdamped response to faster response with oscillations, eventually leading to instability. This progression highlights the critical trade-off between convergence speed and stability in the system’s design.</p> <h3 id="2-effect-of-switching-term-gain-k">2. Effect of Switching Term Gain (\(K\))</h3> <p>This section examines the impact of the switching term gain (\(K\)) in the control input:</p> \[u = u_{eq} - K\text{sat}\left(S_{\theta}\frac{g_{\theta}}{\phi_{\theta}}\right) \tag{22}\] <p>Parameters were set as follows:</p> \[\begin{array}{l} C_x = 1, \quad C_{\theta} = 10, \quad \phi_x = 1 \\ \phi_{\theta} = 2.3, \quad z_u = 0.5, \quad d = 0.1 \end{array}\] <p>I varied \(K\) across [0.01, 0.05, 0.1, 1]. The results are shown in Video 2 and Figures 16-19.</p> <p><strong>Key Observations:</strong></p> <ul> <li><strong>Low \(K=0.01\)</strong>: <ul> <li>Insufficient resistance against disturbances</li> <li>System becomes unstable</li> </ul> </li> </ul> <ul> <li><strong>Moderate \(K = 0.05, 0.1\)</strong>: <ul> <li>Improved stability</li> <li>Faster reaching mode as K increases</li> </ul> </li> <li><strong>High \(K=1\)</strong>: <ul> <li>Very quick reaching of sliding surface</li> <li>Significant chattering observed</li> <li>Potential instability due to excessive chattering</li> </ul> </li> </ul> <p><strong>General Findings:</strong></p> <ul> <li>As K increases, the speed of reaching mode improves</li> <li>Higher K values lead to increased chattering due to overreaction</li> <li>Extreme chattering can cause system instability</li> </ul> <p>The Figures (b) clearly illustrate these effects, particularly the increased chattering at higher K values.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-29-Controller-Design-Day-8/02_K.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2. Comparison of system responses with varying \(K = [0.01, 0.05, 0.1, 1]\) </div> <div style="width: 100%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/16_K1_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/17_K2_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/18_K3_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/19_K4_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 16 - 19: System behavior with varying \(K = [0.01, 0.05, 0.1, 1]\). (a) Responses of Linear and Algular Displacement, (b) Sliding Surfaces \(S_x\) and \(S_{\theta}\), (c) Phase Portraits \(\dot{x}\) vs. \(x\), (d) \(\dot{\theta}\) vs. \(\theta\). </div> <h3 id="3-mitigating-chattering-effects">3. Mitigating Chattering Effects</h3> <p>To address the chattering observed in our initial simulations, two potential solutions were identified:</p> <ol> <li><strong>Adaptive Gain</strong>: Vary \(K\) based on the distance between states and the sliding surface.</li> <li><strong>Alternative Functions</strong>: Replace \(\text{sgn}(x)\) with a continuous function to reduce chattering effects.</li> </ol> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sign_vs_sat-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sign_vs_sat-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sign_vs_sat-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sign_vs_sat.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Ref. by Nam et al. (2015): "Design of an adaptive sliding mode controller for robust yaw stabilisation of in-wheel-motor-driven electric vehicles" </div> <p><strong>Implementation of Saturation Function</strong></p> <p>To test the second approach, I replaced \(\text{sgn}(x)\) with \(\text{sat}(x)\), maintaining \(K=1\). The results are shown in Figure 20.</p> <p><strong>Key Observations:</strong></p> <ol> <li><strong>Reduced Chattering</strong>: The average magnitude of chattering decreased from 1 to 0.5.</li> <li><strong>Similar Disturbance Resistance</strong>: The system showed comparable resistance to disturbances as the original \(\text{sgn}(x)\) function, which is expected since \(K\) remained the same.</li> </ol> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/20_sat_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> <div class="caption"> Figure 20: System behavior with \(\text{sat}(x)\) Function. (a) Responses of Linear and Angular Displacement, (b) Sliding Surfaces \(S_x\) and \(S_{\theta}\), (c) Phase Portrait \(\dot{x}\) vs. \(x\), (d) Phase Portrait \(\dot{\theta}\) vs. \(\theta\) </div> <h3 id="4-regulation">4. Regulation</h3> <p>After examining tracking performance in Sections 1-3, this section focuses on the system’s regulation capabilities under external forces.</p> \[\begin{array}{l} C_x = 1, \quad C_{\theta} = 10, \quad K = 0.1 \\ \phi_x = 1, \quad \phi_{\theta} = 2.3, \quad z_u = 0.5, \quad d = 0.1 \end{array}\] <p>The controller employed the \(\text{sgn}(x)\) function, and external forces of \(F = [0.2, 0.5]\) were applied to test regulation performance.</p> <p>The regulation performance is illustrated in Video 3 and Figures 21-22.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-29-Controller-Design-Day-8/03_Regulation.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 3. Regulation performance under external forces \(F = [0.2, 0.5]\). </div> <p><strong>Key Observations:</strong></p> <ol> <li><strong>Robust Performance</strong>: The controller demonstrated good regulation capabilities for both external force magnitudes.</li> <li><strong>Disturbance Rejection</strong>: The system successfully maintained stability and returned to equilibrium despite the applied forces.</li> </ol> <div style="width: 100%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/21_regulation_0.2_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/22_regulation_0.5_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 21 - 22: Regulation performance under external forces \(F = [0.2, 0.5]\). (a) Responses of Linear and Algular Displacement, (b) Sliding Surfaces \(S_x\) and \(S_{\theta}\), (c) Phase Portraits \(\dot{x}\) vs. \(x\), (d) \(\dot{\theta}\) vs. \(\theta\). </div> <h3 id="5-extreme-cases">5. Extreme Cases</h3> <p>This section examines the controller’s robustness under extreme conditions, specifically swing-up motion and high external forces. These tests reveal important insights into the controller’s limitations and the impact of input saturation.</p> <p><strong>Methodology</strong></p> <ul> <li>Tested two scenarios: swing-up motion (tracking) and high external force (regulation)</li> <li>Compared performance with and without input saturation</li> <li>Saturation limit set to 0.45, consistent with previous posts</li> </ul> <p><strong>Key Findings</strong></p> <ul> <li><strong>Without Saturation</strong>: <ul> <li>The system consistently converged to the equilibrium point</li> <li>Robust performance regardless of initial state or external force magnitude</li> </ul> </li> </ul> <ul> <li><strong>With Saturation (0.45)</strong>: <ul> <li>Controller performance significantly degraded</li> <li>In most cases, the system became unstable</li> <li>Notably, this SMC showed instability where other controllers remained stable under the same conditions</li> </ul> </li> </ul> <div style="width: 100%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/23_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/24_tracking_sat_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/25_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> <swiper-slide> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_1-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_1-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (a) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_4-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_4-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (b) </div> </div> </div> <div class="row"> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_2-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_2-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (c) </div> </div> <div class="col-md-6"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_3-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_3-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/26_regulation_sat_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> (d) </div> </div> </div> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 23 - 26: System behavior under extreme conditions. (a) Linear and Angular Displacement Responses, (b) Sliding Surfaces \(S_x \)and \(S_θ\), (c) Phase Portrait \(\dot{x}\) vs. \(x\), (d) Phase Portrait \(\dot{θ}\) vs. \(θ\). </div> <p><strong>23-24:</strong> Tracking performance during swing-up motion (without and with saturation) <br/> <strong>25-26:</strong> Regulation performance under high external force (without and with saturation)</p> <p><strong>Analysis</strong></p> <h1 id="iv-conclusion">IV. Conclusion</h1> <p>In this study, I implemented a Sliding Mode Control (SMC) strategy for an inverted pendulum system, incorporating both stabilization and swing-up control. This approach demonstrated significant potential in managing the nonlinear dynamics of the inverted pendulum, offering insights into robust control for complex mechanical systems.</p> <p><strong>Key findings from my simulations include:</strong></p> <ol> <li> <p>The SMC effectively managed both swing-up and stabilization tasks in the absence of input saturation, demonstrating robustness against small to moderate disturbances and parameter variations.</p> </li> <li> <p>The controller’s performance was highly sensitive to parameter choices, highlighting the critical importance of careful tuning.</p> </li> <li> <p>Replacing the sign function with a saturation function in the control law successfully mitigated chattering, a common issue in SMC implementations, without compromising performance.</p> </li> <li> <p>While excelling in stabilization, the SMC showed limitations in tracking performance, especially for rapidly changing reference signals, as illustrated in Figure 27.</p> </li> </ol> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-29-Controller-Design-Day-8/27_Sinusoidal-480.webp 480w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/27_Sinusoidal-800.webp 800w,/assets/img/posts/2024-07-29-Controller-Design-Day-8/27_Sinusoidal-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-29-Controller-Design-Day-8/27_Sinusoidal.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 27. Sinusoidal Response Demonstrating Tracking Limitations </div> <p><strong>However, my work also revealed areas for further improvement:</strong></p> <ol> <li> <p>Enhancing robustness under extreme conditions and input saturation.</p> </li> <li> <p>Developing adaptive strategies to handle extreme initial states and large disturbances.</p> </li> <li> <p>Integrating SMC with complementary techniques (e.g., energy shaping) for a more robust swing-up strategy under input saturation constraints.</p> </li> </ol> <p>These research directions promise to push the boundaries of nonlinear control systems, bringing us closer to robust, generalizable solutions for complex mechanical systems. Stay tuned for future updates as I continue to explore and innovate in the fascinating realm of advanced control strategies! <br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5> \[\]]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Simulink"/><category term="Sliding_Mode_Control"/><summary type="html"><![CDATA[I. Introduction]]></summary></entry><entry><title type="html">[Controller Design] Day7: State Feedbak Control - LQR Controller and Energy Shaping</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-7/" rel="alternate" type="text/html" title="[Controller Design] Day7: State Feedbak Control - LQR Controller and Energy Shaping"/><published>2024-07-09T04:00:00+00:00</published><updated>2024-07-09T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-7</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-7/"><![CDATA[<h1 id="i-introduction">I. Introduction</h1> <p>In this post, I’ll explore two advanced control techniques: Linear Quadratic Regulator (LQR) for stabilization and Energy Shaping for swing-up control of an inverted pendulum system.</p> <h2 id="a-linear-quadratic-regulator-lqr">A. Linear Quadratic Regulator (LQR)</h2> <p>The LQR is a fundamental control strategy used in control systems engineering to optimally regulate the behavior of a linear dynamical system. It minimizes a quadratic cost function that balances tracking performance and control effort.</p> <h3 id="1-principles-of-lqr">1. Principles of LQR</h3> <ol> <li> <p><strong>System Dynamics</strong>: LQR is designed for systems described by linear differential equations:</p> \[\dot{x} = Ax + Bu \tag{1}\] <p>where \(x\) is the state vector, \(u\) is the control input, and \(A\) and \(B\) are matrices defining the system dynamics.</p> </li> <li> <p><strong>Cost Function</strong>: LQR aims to minimize:</p> \[J = \int_0^{\infty} (x^T Q x + u^T R u) \, dt\tag{2}\] <p>Here, \(Q\) and \(R\) are weighting matrices. \(Q\) should be positive semi-definite, and \(R\) positive definite, prioritizing state precision and control effort respectively.</p> <ul> <li><strong>Matrix \(Q\)</strong> - State Cost Matrix: <ul> <li><strong>Purpose</strong>: Weighs the state errors, penalizing deviations from desired states.</li> <li><strong>Properties</strong>: Positive semi-definite to ensure non-negative cost for state errors.</li> <li><strong>Effect</strong>: Higher values prioritize accuracy in corresponding state variables.</li> </ul> </li> </ul> <div style="height: 20px;"></div> <ul> <li><strong>Matrix \(R\)</strong> - Control Effort Cost Matrix: <ul> <li><strong>Purpose</strong>: Weighs the control effort, penalizing excessive use of control inputs.</li> <li><strong>Properties</strong>: Positive definite to ensure all control efforts have a positive associated cost.</li> <li><strong>Effect</strong>: Lower values can lead to more aggressive control actions; higher values promote conservatism.</li> </ul> </li> </ul> </li> <li> <p><strong>Optimal Control Law</strong>: The solution is a linear control law:</p> \[u = -Kx \tag{3}\] <p>where \(K\) is the gain matrix calculated using the Riccati equation.</p> </li> <li> <p><strong>The Riccati Equation</strong>: The Riccati equation is a differential equation crucial for determining the LQR gain matrix \(K\):</p> \[\dot{P} = A^T P + PA - PBR^{-1}B^T P + Q \tag{4}\] <p>In this equation, \(P\) is a matrix that solves the Riccati equation. Once \(P\) is determined, the optimal gain matrix \(K\) can be computed as:</p> \[K = R^{-1}B^T P \tag{5}\] <ul> <li><strong>Matrix \(P\)</strong> - Solution to the Riccati Equation: <ul> <li><strong>Purpose</strong>: Balances the trade-off between tracking performance and control effort in the cost function.</li> <li><strong>Properties</strong>: Symmetric positive definite.</li> <li><strong>Role</strong>: Directly influences the gain matrix \(K\), dictating the control action.</li> </ul> </li> </ul> <p>Solving the Riccati equation enables the calculation of the necessary feedback gains to minimize the cost function \(J\), effectively aligning the system’s behavior with the desired performance objectives while minimizing control effort. This makes LQR a powerful tool for achieving optimal control in linear systems.</p> </li> </ol> <h5 id="advantages-of-lqr">Advantages of LQR</h5> <ul> <li><strong>Optimality</strong>: Provides optimal control for defined cost function and system dynamics.</li> <li><strong>Robustness</strong>: Offers robustness to model uncertainties and disturbances within linear framework.</li> <li><strong>Simplicity</strong>: Once \(K\) is computed, the linear control law is straightforward to implement.</li> </ul> <h5 id="limitations">Limitations</h5> <ul> <li><strong>Model Dependence</strong>: Requires accurate linear model, limiting effectiveness for nonlinear systems.</li> <li><strong>Tuning Complexity</strong>: Choosing appropriate \(Q\) and \(R\) matrices can be complex and requires domain knowledge.</li> </ul> <p>LQR is extensively applied in aerospace, automotive systems, and electronics, illustrating its versatility in controlling linear systems across domains.</p> <h3 id="2-linearization-of-the-system">2. Linearization of the System</h3> <p>The process to linearize the system (including Equation of Motion, Linearization, and State Space Representation) is explained in detail in <a href="/blog/2024/Controller-Design-Day-6/#Pendulum_Linearization"><code class="language-plaintext highlighter-rouge">Day 6</code></a>. The resulting state-space matrices are:</p> \[A = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 22.89 &amp; 0 &amp; 0 \\ 0 &amp; 350.36 &amp; 0 &amp; 0 \end{bmatrix}, B = \begin{bmatrix} 0 \\ 0 \\ 82.30 \\ 881.83 \end{bmatrix}, C = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \end{bmatrix}, D = 0\] <h3 id="3-implementing-lqr-in-matlab">3. Implementing LQR in MATLAB</h3> <p>Once the state-space model of your system is established, you can compute the LQR gain matrix using MATLAB:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">K_LQR</span> <span class="o">=</span> <span class="nf">lqr</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">R</span><span class="p">);</span>
</code></pre></div></div> <p>This command utilizes MATLAB’s built-in <code class="language-plaintext highlighter-rouge">lqr</code> function, which requires the system’s matrices \(A\) and \(B\) along with the weight matrices \(Q\) and \(R\). The function returns the optimal gain matrix <code class="language-plaintext highlighter-rouge">K_LQR</code>.</p> <h2 id="b-energy-shaping">B. Energy Shaping</h2> <p>While LQR control is effective around an equilibrium point, swinging up a pendulum requires handling larger deviations from equilibrium. For this, I use Energy Shaping, which begins with partial feedback linearization of the equation of motion.</p> <h3 id="1-partial-feedback-linearization">1. Partial Feedback Linearization</h3> <p>Starting from <a href="/blog/2024/Controller-Design-Day-6/#Equation4">Equation 4 in Day 6</a>, I drive:</p> \[\frac{1}{2}m_1l_1sin(\theta_1)\dot{\theta}_1^2 - \frac{1}{2}m_1l_1cos(\theta_1)\ddot{\theta}_1 + (m_0+m_1)\ddot{x} = F\] \[\frac{1}{3}l_1^2m_1\ddot{\theta}_1 - \frac{1}{2}m_1l_1cos(\theta_1)\ddot{x} - \frac{1}{2}gm_1l_1sin(\theta_1) = 0\] <p>Applying feedback control, I set:</p> \[F = \frac{1}{2}m_1l_1sin(\theta_1)\dot{\theta}_1^2 - \frac{1}{2}m_1l_1cos(\theta_1)\ddot{\theta}_1 + (m_0+m_1)\ddot{x}^d \tag{6}\] <p>This results in the decoupling of the system:</p> \[\ddot{x} = \ddot{x}^d\] \[\ddot{\theta}_1 = \frac{3}{2l_1}cos(\theta_1)\ddot{x}^d + \frac{3}{2l_1}gsin(\theta_1)\] <p>Letting \(u = \ddot{x}^d\), I simplify this to:</p> \[\ddot{x} = u \tag{7}\] \[\ddot{\theta}_1 = \frac{3}{2l_1}cos(\theta_1)u + \frac{3}{2l_1}gsin(\theta_1) \tag{8}\] <p>Equation 7 is straightforward, allowing me to focus on handling Equation 8.</p> <h3 id="2-energy-regulation-using-energy-shaping">2. Energy Regulation Using Energy Shaping</h3> <p>The energy of the pendulum is expressed as:</p> \[\begin{align*} E(\theta, \dot{\theta}) &amp;= \frac{1}{2}I\dot{\theta}^2 + \frac{1}{2}m_1gl_1cos(\theta) \\ &amp;= \frac{1}{6}m_1l_1^2\dot{\theta}^2 + \frac{1}{2}m_1gl_1cos(\theta) \tag{9} \end{align*}\] <p>At the equilibrium point (\(\theta_1 = 0, \dot{\theta}_1 = 0\)), the desired energy level is:</p> \[E^d = 0.0260\] <p>To stabilize the system, I compute the derivative of the energy error, \(\tilde{E}(\theta, \dot{\theta}) = E(\theta) - E^d\):</p> \[\begin{align*} \dot{\tilde{E}}(\theta, \dot{\theta}) &amp;= \frac{1}{3}m_1l_1^2\dot{\theta}\ddot{\theta} - \frac{1}{2}m_1gl_1\dot{\theta}sin(\theta) \\ &amp;= \frac{1}{3}m_1l_1^2\dot{\theta}\left(\frac{3}{2l_1}cos(\theta_1)u + \frac{3}{2l_1}gsin(\theta)\right) - \frac{1}{2}m_1gl_1\dot{\theta}sin(\theta) \\ &amp;=\frac{1}{2}m_1l_1\dot{\theta}cos(\theta)u \end{align*}\] <p>The control input is defined to stabilize the pendulum as:</p> \[u = -k\dot{\theta}cos(\theta)\tilde{E}(\theta, \dot{\theta}) , k &gt; 0 \tag{10}\] <p>This approach allows me to effectively swing up the pendulum using energy shaping, ensuring that the system is not only responsive but also stable under varying conditions.</p> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system-inputoutput-plant">1. Overall System, Input/Output, Plant</h3> <p>The overall system, input/output, and plant blocks remain the same as in <a href="/blog/2024/Controller-Design-Day-6/#Modeling">Day 6</a>. For this and future posts, I will focus on updating only the Controller block.</p> <h3 id="2-controller-block">2. Controller Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/01_Controller-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/01_Controller-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/01_Controller-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/01_Controller.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Block Diagram of the Controller Components for LQR and Energy Shaping Control. </div> <p>The controller block has been updated to incorporate LQR and Energy Shaping control:</p> <ul> <li><strong>Red box (Energy Shaping)</strong>: This component is responsible for the swing-up motion. Since Energy Shaping doesn’t account for the cart’s linear displacement, I’ve added a PID controller to manage the cart’s position.</li> <li><strong>Blue box (LQR)</strong>: This component is similar to the one used for the pole placement method, but now utilizes the feedback gain determined by the LQR method.</li> </ul> <p>The controller switches between swing-up and stabilization control based on the pendulum’s angle:</p> <ul> <li>Swing-up control (Energy Shaping) is active when the pendulum angle is outside the range of ±30° from vertical.</li> <li>Stabilization control (LQR) takes over when the pendulum angle is within ±30° of vertical.</li> </ul> <p>The maximum control force is limited to 0.45 N to prevent excessive actuation.</p> <h3 id="3-energy-shaping-block">3. Energy Shaping Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/02_Energy_Shaping-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/02_Energy_Shaping-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/02_Energy_Shaping-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/02_Energy_Shaping.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 2. Block Diagram of the Energy Shaping Component for Swing-Up Control. </div> <p>The Energy Shaping block implements the swing-up control strategy derived in Section I.B. It calculates the control input \(u\) based on the pendulum’s current state:</p> \[u = -k\dot{\theta}\cos(\theta)\tilde{E}(\theta, \dot{\theta})\] <p>Where:</p> <ul> <li>\(k\) is a positive gain constant</li> <li>\(\theta\) is the pendulum angle</li> <li>\(\dot{\theta}\) is the angular velocity of the pendulum</li> <li>\(\tilde{E}(\theta, \dot{\theta})\) is the energy error (difference between current and desired energy)</li> </ul> <p>This control law strategically injects or removes energy from the system to bring the pendulum to its upright position. The cosine term ensures that the control action smoothly transitions to zero as the pendulum approaches the vertical position, facilitating a seamless handover to the LQR controller for stabilization.</p> <h1 id="iii-simulation">III. Simulation</h1> <p>Tracking okay. Regulation 1N : Done by LQR 1.2N : Done by Bang-Bang + LAR (1 rotation) 1.3N : Done by Bang-Bang + LAR (3 rotation) 1.4 ~ 1.5N : Diverse, left way, due to LQR’s x1 correction 1.6N : Diverse, right way,</p> <h2 id="a-energy-convergence-and-controller-component-analysis">A. Energy Convergence and Controller Component Analysis</h2> <p>In this first simulation, I will demonstrate the effectiveness of the combined Energy Shaping and LQR control strategy for the inverted pendulum system. The simulation will focus on the full cycle of operation, from the pendulum’s initial position through swing-up and final stabilization in the upright position.</p> <p>Key aspects to be analyzed:</p> <ol> <li>Energy convergence during the swing-up phase</li> <li>Transition between Energy Shaping and LQR control</li> <li>Stabilization performance of the LQR controller</li> <li>Contribution of each controller component to the overall system behavior</li> </ol> <p>The simulation will start with the pendulum in different initial angles and run for 10 seconds to capture the complete motion. I will examine the system’s states and energy levels throughout this period to gain insights into the control strategy’s performance.</p> <p>By analyzing the energy convergence and the role of each controller component, I aim to demonstrate how this approach achieves efficient swing-up and precise stabilization of the inverted pendulum system.</p> <h3 id="0-uncontrolled-system-behavior">0. Uncontrolled System Behavior</h3> <p>Before applying any control strategies, it’s crucial to understand the natural behavior of the inverted pendulum system. In this section, I’ll examine how the cart-pendulum system behaves differently according to various initial states when there is no control input applied.</p> <p>To observe this, I disconnected all controllers from the input signal, effectively leaving the system uncontrolled. Figure 3 illustrates the phase portrait of the pendulum for different initial conditions.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/03_Energy_1-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/03_Energy_1-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/03_Energy_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/03_Energy_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Phase portrait of the uncontrolled pendulum system for various initial conditions, showing angle (θ) vs. angular velocity (θ̇). </div> <p>Key observations from this analysis:</p> <ol> <li> <p>Stable Limit Cycles: Some initial states result in stable limit cycles. These represent oscillations where the pendulum swings back and forth with consistent amplitude, neither gaining nor losing energy over time.</p> </li> <li>High Energy States: Other initial states, particularly those with higher initial energy, exhibit different behavior. These trajectories may: <ul> <li>Result in the pendulum completing full rotations</li> <li>Show larger amplitude oscillations</li> <li>Potentially lead to unstable or chaotic motion</li> </ul> </li> <li>Energy Conservation: In the absence of friction or other dissipative forces, the total energy of the system should remain constant. This is reflected in the closed orbits in the phase portrait. <ul> <li>However, due to the limitations of the ODE solver (DAESSC), my results appear slightly different from the ideal limit cycles shown in Figure 4.</li> </ul> </li> <li>Sensitivity to Initial Conditions: The wide variety of trajectories demonstrates the system’s sensitivity to initial conditions, a characteristic of nonlinear systems.</li> </ol> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/04_Energy_Ideal-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/04_Energy_Ideal-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/04_Energy_Ideal-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/04_Energy_Ideal.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 4. Ideal limit cycles in a phase portrait, demonstrating energy conservation. Adapted from Winter and Murray (1997). </div> <p>Reference: Winter, O., &amp; Murray, C. (1997). Resonance and chaos: I. First-order interior resonances. Astronomy and Astrophysics, 319, 290-304.</p> <h3 id="1-using-energy-shaping-controller-only">1. Using Energy Shaping Controller Only</h3> <p>In this section, I’ll isolate the Energy Shaping Controller to understand its behavior and effectiveness in swinging up the pendulum.</p> <h5 id="a-fixed-gain-k-varying-initial-condition-theta_0">a) Fixed Gain \(K\), Varying Initial Condition \(\theta_0\)</h5> <p>Here, I’ll keep the controller gain \(K\) constant and observe how the system responds to different initial angles of the pendulum. This allows me to analyze the effect of the initial condition \(\theta_0\).</p> <p>Figure 5 shows the simulations with different initial conditions when the gain is fixed at \(K = 10\). I tested initial angles \(\theta_0 = [\pm 5^{\circ}, \pm 30^{\circ}, \pm 60^{\circ}, \pm 90^{\circ}, \pm 120^{\circ}, \pm 150^{\circ}, \pm 170^{\circ} ]\). As observed, regardless of the starting position, all trajectories converge to a limit cycle. This demonstrates that if the system lacks sufficient energy, the controller provides energy to the system; conversely, if the system has excess energy, the controller removes energy from the system.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/05_Energy_2-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/05_Energy_2-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/05_Energy_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/05_Energy_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Phase portrait of pendulum angle vs. angular velocity for various initial conditions with fixed gain K = 10. </div> <h5 id="b-varying-gain-k-fixed-initial-condition-theta_0">b) Varying Gain \(K\), Fixed Initial Condition \(\theta_0\)</h5> <p>In this part, I fix the initial pendulum angle and vary the controller gain \(K\) to examine its effect on system performance.</p> <p>For this simulation, I set the initial angle to \(\theta_0 = 90^{\circ}\) and varied the gain using values \(K = [1, 5, 10, 20, 40, 80, 10^6]\). Figure 6 illustrates the results. As the gain \(K\) increases, the width of the limit cycle (range of angle) also increases. Interestingly, compared to the range of angle, the angular velocity is less affected by changes in gain.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/06_Energy_3-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/06_Energy_3-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/06_Energy_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/06_Energy_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 6. Phase portrait of pendulum angle vs. angular velocity for various gain values K with fixed initial angle θ₀ = 90°. </div> <h3 id="2-using-energy-shaping-controller-with-pid-controller">2. Using Energy Shaping Controller with PID Controller</h3> <p>In this section, I combine the Energy Shaping Controller with a PID Controller to analyze their joint effect on the pendulum’s behavior. I fix the Energy Shaping gain at \(K = 10\) and the initial angle at \(\theta_0 = 90^\circ\), while varying the PID controller’s gains.</p> <p>For the PID controller, I set the ratio of gains as \(K_P : K_I : K_D = 100 : 1 : 10\). Figure 7 illustrates the results of this combined control strategy.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/07_Energy_4-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/07_Energy_4-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/07_Energy_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/07_Energy_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 7. Phase portrait of pendulum angle vs. angular velocity for various PID gain values, with fixed Energy Shaping gain K = 10 and initial angle θ₀ = 90°. Vertical lines indicate the linearization region (±30°). </div> <p>Key observations from this analysis:</p> <ol> <li> <p>Higher PID gains generally reduce the range of pendulum angle, unless resonance occurs between the Energy Shaping and PID controllers.</p> </li> <li> <p>The chosen Energy Shaping gain \(K = 10\) proves to be too small for effective control. With this gain, the pendulum fails to consistently reach the linearization region (outside the vertical lines in Figure 7).</p> </li> <li> <p>Finding an optimal balance between the Energy Shaping and PID gains is crucial:</p> <ul> <li>Too small an Energy Shaping gain \(K\) cannot effectively swing up the pendulum.</li> <li>Too large an Energy Shaping gain \(K\) can overpower the PID controller, rendering it ineffective.</li> </ul> </li> </ol> <p>This analysis underscores the importance of carefully tuning both the Energy Shaping and PID controllers to achieve optimal performance in swinging up the pendulum and bringing it into the linearization region where LQR control can take over for final stabilization.</p> <h3 id="3-combined-all-together">3. Combined All Together</h3> <p>In previous sections, I determined the minimum conditions for Energy Shaping and PID gains by examining the phase portrait. The goal was to swing up the pendulum sufficiently to reach the linearization region (\(-30^{\circ} &lt; \theta &lt; 30^{\circ}\)). Now, I’ll iteratively tune the LQR controller. To simplify the process, I’ll set \(K = 20\), \(K_P = 2\), \(K_I = 0.02\), and \(K_D = 0.2\), allowing me to focus on matrices \(R\) and \(Q\).</p> <h5 id="a-varying-q-fixed-r">a) Varying Q, Fixed R</h5> <p>I’ll fix the control effort cost matrix \(R = 1\) to investigate the effect of the state cost matrix \(Q\). Video 1 and Figures 8 and 9 show that increasing \(Q_1\), which corresponds to the cart’s linear displacement, leads to faster \(x_1\) convergence. Similarly, increasing \(Q_2\) results in faster \(x_2\) convergence. The settling time seems to be most affected by \(x_1\). I tested four cases:</p> \[\left\{ \begin{array}{l} Q_1 = 1, Q_2 = 1 \\ Q_1 = 10, Q_2 = 1 \\ Q_1 = 1, Q_2 = 10 \\ Q_1 = 10, Q_2 = 10 \end{array} \right.\] <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-09-Controller-Design-Day-7/01_Tuning_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Comparison of system responses with varying Q values (Q₁ and Q₂) while R is fixed at 1. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/08_LQR_1_1-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/08_LQR_1_1-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/08_LQR_1_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/08_LQR_1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/09_LQR_1_2-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/09_LQR_1_2-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/09_LQR_1_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/09_LQR_1_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 8 - 9: System response with varying Q values </div> <p>I then tested higher \(Q\) values:</p> \[\left\{ \begin{array}{l} Q_1 = 100, Q_2 = 1 \\ Q_1 = 1000, Q_2 = 1 \\ Q_1 = 1, Q_2 = 100 \\ Q_1 = 1, Q_2 = 1000 \end{array} \right.\] <p>Video 2 and Figures 10 and 11 demonstrate that very high gains can lead to reduced performance or even system instability. This underscores the importance of iterative optimization through response inspection.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-09-Controller-Design-Day-7/02_Tuning_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2. Comparison of system responses with varying high Q values (Q₁ and Q₂) while R is fixed at 1. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/10_LQR_2_1-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/10_LQR_2_1-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/10_LQR_2_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/10_LQR_2_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/11_LQR_2_2-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/11_LQR_2_2-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/11_LQR_2_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/11_LQR_2_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 10 - 11: System response with higher Q values </div> <p>Through iterative optimization, I found that \(K = 20\), \(Q_1 = 50\), \(Q_2 = 5\) yielded the best performance, while \(K = 30\), \(Q_1 = 50\), \(Q_2 = 5\) produced the smoothest transient motion. Results are shown in Video 3 and Figures 12 - 13.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-09-Controller-Design-Day-7/03_Tuning_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 3. Optimized system performance after iterative Q matrix tuning </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/12_LQR_3_1-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/12_LQR_3_1-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/12_LQR_3_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/12_LQR_3_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/13_LQR_3_2-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/13_LQR_3_2-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/13_LQR_3_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/13_LQR_3_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 12 - 13: Optimized system response </div> <h5 id="b-fixed-q-varying-r">b) Fixed Q, Varying R</h5> <p>I tested \(R = [0.001, 1, 100, 1000]\) and observed that small \(R\) values lead to increased oscillation, while large \(R\) values result in slower settling times. Based on these observations, I decided to use \(R = 1\). Additionally, I set \(K = 20\), \(Q_1 = 50\), and \(Q_2 = 5\). This combination of parameters provided a good balance between performance and stability.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/14_LQR_4_1-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/14_LQR_4_1-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/14_LQR_4_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/14_LQR_4_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/15_LQR_4_2-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/15_LQR_4_2-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/15_LQR_4_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/15_LQR_4_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 14 - 15: System response with varying R values </div> <h2 id="b-tracking">B. Tracking</h2> <p>After finalizing the controller tuning, I conducted tracking tests to evaluate the system’s performance. The results showed variable performance across different scenarios. In some cases, the controllers demonstrated excellent tracking capabilities, while in others, the system required more time to achieve the target state.</p> <p>This inconsistency in tracking performance can be attributed to my tuning process, which primarily focused on a single initial condition. While effective for that specific case, this approach didn’t account for the full range of possible starting states my system might encounter.</p> <p>To achieve more robust tracking performance, future work should focus on optimizing the controllers with various initial conditions. This approach would ensure that my system can handle a wide range of starting states, potentially leading to more consistent and reliable performance across different scenarios.</p> <p>Video 4 and Figures 16 - 17 illustrate the results of my tracking simulations:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-09-Controller-Design-Day-7/04_Tracking.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 4. Demonstration of the cart-pendulum system's tracking performance under various conditions. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/16_Tracking_1-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/16_Tracking_1-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/16_Tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/16_Tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/17_Tracking_2-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/17_Tracking_2-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/17_Tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/17_Tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 16 - 17: Graphical representation of the system's tracking performance, showing cart position and pendulum angle over time for different scenarios. </div> <h2 id="c-regulation">C. Regulation</h2> <p>Lastly, I simulated regulation with disturbances of varying magnitudes. The system demonstrated different behaviors depending on the disturbance size:</p> <ol> <li>For very small disturbances, the system easily regulated the position.</li> <li>With larger disturbances that pushed the pendulum beyond a certain region, the system required one full rotation to return to the upright position.</li> <li>In some cases, similar to the tracking scenarios, the controller failed to regulate the disturbance effectively.</li> <li>For extremely large disturbances, the system took considerable time to achieve regulation.</li> </ol> <p>These observations suggest that the controller’s performance is highly dependent on the magnitude of the disturbance, with a non-linear relationship between disturbance size and regulation time or effectiveness.</p> <p>The results of these simulations are presented in Video 5 and Figures 18 - 19.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-07-09-Controller-Design-Day-7/05_Regulation.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 5. Demonstration of the inverted pendulum system's regulation performance under various disturbance magnitudes. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/18_Regulation_1-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/18_Regulation_1-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/18_Regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/18_Regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-07-09-Controller-Design-Day-7/19_Regulation_2-480.webp 480w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/19_Regulation_2-800.webp 800w,/assets/img/posts/2024-07-09-Controller-Design-Day-7/19_Regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-07-09-Controller-Design-Day-7/19_Regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 18 - 19: Graphical representation of the system's regulation performance, showing cart position and pendulum angle over time for different disturbance magnitudes. </div> <h1 id="iv-conclusion">IV. Conclusion</h1> <p>In this study, I implemented a combined control strategy using Linear Quadratic Regulator (LQR) for stabilization and Energy Shaping for swing-up control of an inverted pendulum system. This approach demonstrated significant improvements over traditional control methods, offering a more robust solution for the full range of pendulum motion.</p> <p><strong>Key findings from my simulations include:</strong></p> <ol> <li> <p>The Energy Shaping controller effectively swings up the pendulum from various initial conditions, converging to a limit cycle that brings the pendulum near the upright position.</p> </li> <li> <p>LQR provides excellent stabilization once the pendulum is within the linearization region, offering a balance between state regulation and control effort.</p> </li> <li> <p>The combined approach successfully handles the transition between swing-up and stabilization phases, though some edge cases still present challenges.</p> </li> <li> <p>Tuning the controllers, particularly finding the right balance in the LQR cost matrices (Q and R), proved crucial for optimal performance.</p> </li> </ol> <p><strong>However, my work also revealed areas for further improvement:</strong></p> <ol> <li> <p>The current tuning process, focused on a single initial condition, led to inconsistent performance across different scenarios. Future work should explore multi-objective optimization to enhance robustness across various initial conditions and disturbances.</p> </li> <li> <p>The system’s response to large disturbances during regulation showed limitations, suggesting the need for adaptive control strategies that can handle a wider range of perturbations.</p> </li> <li> <p>The transition between Energy Shaping and LQR control could be further smoothed to prevent potential instabilities in edge cases.</p> </li> </ol> <p>These endeavors promise to push the boundaries of nonlinear control systems and bring me closer to robust, generalizable solutions for complex mechanical systems. Stay tuned for more updates as I delve deeper into the fascinating world of advanced control strategies! <br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5> \[\]]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Simulink"/><category term="State_Feedback_Control"/><category term="Linear_Quadratic_Regulator"/><category term="Energy_Shaping_Control"/><summary type="html"><![CDATA[I. Introduction]]></summary></entry><entry><title type="html">[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-6/" rel="alternate" type="text/html" title="[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang"/><published>2024-06-20T04:00:00+00:00</published><updated>2024-06-20T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-6</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-6/"><![CDATA[<p>Before diving into the technicalities, I must address a fundamental challenge encountered while implementing nonlinear controllers for multi-link mechanisms: the inherent high nonlinearity of these systems. This complexity can significantly complicate the design and effectiveness of controllers, posing a substantial barrier to achieving desired performance and stability.</p> <p>Given these challenges, and with the goal of this post to introduce and explore various controller designs, I have decided to simplify the scenario slightly by reducing the number of links in my mechanisms. This approach will help in isolating and understanding the specific impacts and benefits of each control strategy without the overwhelming interactions of a highly complex system.</p> <h1 id="i-introduction">I. Introduction</h1> <p>State Feedback Control is a fundamental technique in modern control theory that forms the basis for many advanced control strategies, including the Linear Quadratic Regulator (LQR). This approach allows me to precisely manipulate the behavior of a system by feeding back information about its current state. In this post, I’ll explore the principles, mathematics, and applications of State Feedback Control.</p> <h2 id="a-state-feedback-control">A. State Feedback Control</h2> <h3 id="1-principles-of-state-feedback-control">1. Principles of State Feedback Control</h3> <h5 id="a-system-model">a) System Model</h5> <p>State Feedback Control is designed for systems that can be described by a state-space model:</p> \[\dot{x} = Ax + Bu \tag{1}\] \[y = Cx + Du \tag{2}\] <p>Where:</p> <ul> <li>\(x\) is the state vector</li> <li>\(u\) is the control input vector</li> <li>\(y\) is the output vector</li> <li>\(A\), \(B\), \(C\), and \(D\) are matrices defining the system dynamics</li> </ul> <h5 id="b-control-law">b) Control Law</h5> <p>The core idea of State Feedback Control is to make the control input a linear function of the state:</p> \[u = -Kx \tag{3}\] <p>Here, \(K\) is the feedback gain matrix that I design to achieve desired system behavior.</p> <h3 id="2-equation-of-motion">2. Equation of Motion</h3> <p><a id="Equation4"></a></p> <p>To understand state feedback control in practice, let’s consider the example of a pendulum mounted on a cart. The following diagram illustrates the free body diagram of this system:</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Free Body Diagram of a Pendulum on Cart. </div> <p>The equation of motion for this system is:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \cos(\theta_1) \\ -\frac{1}{2}m_1 l_1 \cos(\theta_1) &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} + \begin{bmatrix} \frac{1}{2}m_1 l_1 \sin(\theta_1) \dot{\theta}_1^2 \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ - \frac{1}{2}g m_1 l_1\sin(\theta_1) \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix} \tag{4}\] <p>Where:</p> <ul> <li>\(m_0\) and \(m_1\) are the masses of the cart and pendulum</li> <li>\(l_1\) is the length of the pendulum</li> <li>\(\theta_1\) is the angle of the pendulum</li> <li>\(F\) is the force applied to the cart</li> <li>\(g\) is the acceleration due to gravity</li> </ul> <p>You can find the detailed calculation in <a href="/blog/2024/Controller-Design-Day-3/">Day 3</a>.</p> <p><a id="Pendulum_Linearization"></a></p> <h3 id="3-linearization">3. Linearization</h3> <p>To implement state feedback control, I need a linear state-space representation of the system. I linearize the equation around \(\theta_1 \approx 0\) using these approximations:</p> \[\left\{ \begin{array}{l} \sin(\theta_1) \approx \theta_1 \\ \cos(\theta_1) \approx 1 \\ \dot{\theta}_1^2 \approx 0 \end{array} \right.\] <p>After linearization, the system equation becomes:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \\ -\frac{1}{2}m_1 l_1 &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} - \begin{bmatrix} 0 \\ \frac{1}{2}g m_1 l_1\theta_1 \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix} \tag{5}\] <h3 id="4-state-space-representation">4. State Space Representation</h3> <p>To convert the linearized equations into a state space representation, I isolate the accelerations \(\ddot{x}\) and \(\ddot{\theta_1}\):</p> \[\begin{align*} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} &amp;= \begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \\ -\frac{1}{2}m_1 l_1 &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix}^{-1} \left( \begin{bmatrix} F \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ \frac{1}{2}g m_1 l_1 \theta_1 \end{bmatrix} \right) \\ &amp;= \begin{bmatrix} 0 &amp; \frac{3gm_1}{4m_0+m_1} \\ 0 &amp; \frac{6g(m_0+m_1)}{l_1(4m_0+m_1)} \end{bmatrix} \begin{bmatrix} x \\ \theta_1 \end{bmatrix} + \begin{bmatrix} \frac{4}{4m_0+m_1} \\ \frac{6}{l_1(4m_0+m_1)} \end{bmatrix}F\tag{6} \end{align*}\] <p>I then express the system in state space form by setting \(x_1 = x, x_2 = \theta_1, x_3 = \dot{x}\), and \(x_4 = \dot{\theta_1}\):</p> \[\dot{x} = \begin{bmatrix} \dot{x}_1 \\ \dot{x}_2 \\ \dot{x}_3 \\ \dot{x}_4 \end{bmatrix} = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; \frac{3gm_1}{4m_0+m_1} &amp; 0 &amp; 0 \\ 0 &amp; \frac{6g(m_0+m_1)}{l_1(4m_0+m_1)} &amp; 0 &amp; 0 \end{bmatrix} \begin{bmatrix} x_1 \\ x_2 \\ x_3 \\ x_4 \end{bmatrix} + \begin{bmatrix} 0 \\ 0 \\ \frac{4}{4m_0+m_1} \\ \frac{6}{l_1(4m_0+m_1)} \end{bmatrix}F \tag{7}\] <p>For my specific system with \(m_0 = 0.0027\), \(m_1 = 0.0378\), and \(l_1 = 0.14\), I get:</p> \[\dot{x} = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 22.89 &amp; 0 &amp; 0 \\ 0 &amp; 350.36 &amp; 0 &amp; 0 \end{bmatrix} \begin{bmatrix} x_1 \\ x_2 \\ x_3 \\ x_4 \end{bmatrix} + \begin{bmatrix} 0 \\ 0 \\ 82.30 \\ 881.83 \end{bmatrix}F\] <p>The output matrix \(y\) is defined as:</p> \[y = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \end{bmatrix}\] <p>Thus, my state space matrices \(A\), \(B\), \(C\), and \(D\) are:</p> \[A = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 22.89 &amp; 0 &amp; 0 \\ 0 &amp; 350.36 &amp; 0 &amp; 0 \end{bmatrix}, B = \begin{bmatrix} 0 \\ 0 \\ 82.30 \\ 881.83 \end{bmatrix}, C = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \end{bmatrix}, D = 0\] <h3 id="5-designing-the-feedback-gain-matrix">5. Designing the Feedback Gain Matrix</h3> <p>When designing the feedback gain matrix \(K\) for state feedback control using the pole placement method, two key aspects need to be considered:</p> <ol> <li>The pole placement method itself, which allows me to achieve desired closed-loop dynamics.</li> <li>The controllability of the system, which is a prerequisite for successful pole placement.</li> </ol> <p>Let’s explore each of these in detail:</p> <h5 id="a-pole-placement-method">a) Pole Placement Method</h5> <p>The pole placement method is a powerful technique for designing the feedback gain matrix \(K\) in state feedback control. This method allows me to directly specify the desired eigenvalues of the closed-loop system, which in turn determines its dynamic response characteristics.</p> <p>Here’s how it works:</p> <ol> <li> <p><strong>Closed-loop System</strong>: When I apply the state feedback control law \(u = -Kx\) to my system \(\dot{x} = Ax + Bu\), I get the closed-loop system:</p> \[\dot{x} = (A - BK)x \tag{8}\] </li> <li> <p><strong>Eigenvalues</strong>: The eigenvalues of \((A - BK)\) determine the system’s stability and transient response. These are the roots of the characteristic equation:</p> \[det(sI - (A - BK)) = 0 \tag{9}\] </li> <li> <p><strong>Desired Poles</strong>: I choose a set of desired eigenvalues \(\{\lambda_1, \lambda_2, ..., \lambda_n\}\) based on my performance requirements (stability, settling time, overshoot, etc.).</p> </li> <li> <p><strong>Characteristic Polynomial</strong>: I form the desired characteristic polynomial:</p> \[\alpha(s) = (s - \lambda_1)(s - \lambda_2)...(s - \lambda_n) \tag{10}\] </li> <li> <p><strong>Solving for K</strong>: I then solve for \(K\) by equating the coefficients of \(\alpha(s)\) with those of \(det(sI - (A - BK))\).</p> </li> </ol> <p>For example, in a second-order system, if I want the closed-loop poles at \(s = -2 \pm j2\), my desired characteristic polynomial would be:</p> \[\alpha(s) = s^2 + 4s + 8 \tag{11}\] <p>I would then solve for \(K\) to make \(det(sI - (A - BK))\) equal to this polynomial.</p> <p>The pole placement method gives me direct control over the system’s eigenvalues, allowing me to shape its response precisely. However, it requires that the system be completely state controllable.</p> <h5 id="b-controllability">b) Controllability</h5> <p>Controllability is a fundamental concept in control theory. A system is said to be controllable if it’s possible to transfer the system from any initial state to any desired final state within a finite time interval using the available control inputs.</p> <p>For a linear time-invariant system described by the state-space equations:</p> \[\dot{x} = Ax + Bu\] <p>The system is controllable if and only if the controllability matrix:</p> \[C = [B \quad AB \quad A^2B \quad ... \quad A^{n-1}B]\] <p>has full rank, where n is the number of states.</p> <h5 id="c-checking-controllability-in-matlab">c) Checking Controllability in MATLAB</h5> <p>MATLAB provides simple functions to check the controllability of a system. Here’s how you can do it:</p> <ol> <li> <p>First, create the state-space model:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sys</span> <span class="o">=</span> <span class="n">ss</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <p>Use the <code class="language-plaintext highlighter-rouge">ctrb</code> function to compute the controllability matrix:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Co</span> <span class="o">=</span> <span class="n">ctrb</span><span class="p">(</span><span class="n">sys</span><span class="p">);</span> <span class="p">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">defined</span> <span class="n">a</span> <span class="nb">system</span>

<span class="n">Co</span> <span class="o">=</span> <span class="n">ctrb</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span> <span class="p">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">have</span> <span class="n">the</span> <span class="n">matrix</span> <span class="n">A</span> <span class="nb">and</span> <span class="n">B</span>
</code></pre></div> </div> </li> <li> <p>Check the rank of the controllability matrix:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rank_Co</span> <span class="o">=</span> <span class="nb">rank</span><span class="p">(</span><span class="n">Co</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <p>Compare the rank with the number of states.</p> </li> </ol> <h3 id="6-effects-of-state-feedback">6. Effects of State Feedback</h3> <ol> <li><strong>Stability</strong>: Proper choice of \(K\) can stabilize an unstable system.</li> <li><strong>Transient Response</strong>: I can shape the system’s response speed and overshoot.</li> <li><strong>Steady-State Error</strong>: While basic state feedback doesn’t guarantee zero steady-state error, it can be combined with integral action to achieve this.</li> </ol> <h3 id="7-implementing-pole-placement-in-matlab">7. Implementing Pole Placement in MATLAB</h3> <p>MATLAB provides a straightforward way to implement the pole placement method using the <code class="language-plaintext highlighter-rouge">place</code> function. This function calculates the state-feedback gain matrix \(K\) for desired closed-loop pole locations.</p> <h5 id="a-using-the-place-function">a) Using the <code class="language-plaintext highlighter-rouge">place</code> Function</h5> <p>The basic syntax of the <code class="language-plaintext highlighter-rouge">place</code> function is:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">K</span> <span class="o">=</span> <span class="n">place</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
</code></pre></div></div> <p>Where:</p> <ul> <li>\(A\) and \(B\) are the system matrices from the state-space model</li> <li>\(P\) is a vector containing the desired closed-loop pole locations</li> <li>\(K\) is the resulting state-feedback gain matrix</li> </ul> <h2 id="b-bang-bang-control-for-swing-up-motion">B. Bang-Bang Control for Swing-Up Motion</h2> <p>While state feedback control is effective for balancing the inverted pendulum near its upright position, it may not have enough control authority to bring the pendulum up from its downward position. This is where Bang-Bang control comes into play for the swing-up motion.</p> <h3 id="1-principle-of-bang-bang-control">1. Principle of Bang-Bang Control</h3> <p>Bang-Bang control, also known as on-off control, is a feedback control strategy that switches abruptly between two states. In the context of an inverted pendulum, it involves applying maximum positive or negative force to the cart to swing the pendulum up.</p> <p>The control law for Bang-Bang control can be expressed as:</p> \[u = \begin{cases} u_{max}, &amp; \text{if } s(x) &gt; 0 \\ -u_{max}, &amp; \text{if } s(x) &lt; 0 \end{cases}\] <p>where \(u\) is the control input (force applied to the cart), \(u_{max}\) is the maximum allowable control input, and \(s(x)\) is a switching function that depends on the system state.</p> <p>For the inverted pendulum system, I can use a simple switching function based on the pendulum’s angular velocity:</p> \[s(x) = \dot{\theta}\] <p>This leads to the control law:</p> \[u = -u_{max} \cdot \text{sign}(\dot{\theta})\] <p>This control strategy ensures that the input force is always in the opposite direction of the pendulum’s angular velocity. Specifically:</p> <ul> <li>When the pendulum is moving clockwise (\(\dot{\theta} &gt; 0\)), a negative force is applied to the cart.</li> <li>When the pendulum is moving counterclockwise (\(\dot{\theta} &lt; 0\)), a positive force is applied to the cart.</li> </ul> <p>This strategy effectively opposes the pendulum’s motion, adding energy to the system and causing the pendulum to swing with increasing amplitude until it approaches the upright position.</p> <p><a id="Modeling"></a></p> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system">1. Overall System</h3> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 2. Block Diagram of the Control Loop for an Inverted Pendulum System </div> <p>This closed-loop block diagram illustrates the interaction between my controller and the inverted pendulum (my plant). The controller processes the system state and generates a control signal, which in turn affects the pendulum’s behavior.</p> <h3 id="2-input--output-block">2. Input &amp; Output Block</h3> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Block Diagram of the Input and Output Blocks. </div> <p>My system state is characterized by four variables:</p> <ul> <li>\(x_1 = x\): The cart’s position</li> <li>\(x_2 = \theta\): The pendulum’s angle</li> <li>\(x_3 = \dot{x}\): The cart’s velocity</li> <li>\(x_4 = \dot{\theta}\): The pendulum’s angular velocity</li> </ul> <p>These states are consolidated into a single vector in the input block and disaggregated in the output block, facilitating efficient manipulation within my control loop.</p> <h3 id="3-plant-block">3. Plant Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 4. Block Diagram Illustrating the Plant Dynamics of the Inverted Pendulum System. </div> <p>This block encapsulates the dynamics of my inverted pendulum system. It comprises a moving base (the cart) and the pendulum (link 1). The input \(u\) is applied exclusively to the moving base, which subsequently influences the pendulum’s motion.</p> <h3 id="4-controller-block">4. Controller Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Block Diagram Illustrating the Controller Components. </div> <p>The controller is the core of my system, responsible for maintaining the pendulum’s upright position and stability. Let’s break down its key components:</p> <ul> <li><strong>Red box (Switch)</strong>: This block determines which feedback value will be chosen based on the angular displacement of link 1. Stabilization feedback is applied when the angular displacement is between \(-30^{\circ} &lt; \theta &lt; 30^{\circ}\). Otherwise, Swing-Up control feedback is applied.</li> <li><strong>Blue box (Saturation)</strong>: This block limits the feedback’s magnitude.</li> </ul> <p>The controller switches to stabilization control when the pendulum angle is between -30° and 30° from vertical. The maximum control force is limited to 0.45 N.</p> <h3 id="5-bang-bang-block">5. Bang-Bang Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 6. Block Diagram Illustrating the Bang-Bang Control Block for Swing-Up Control. </div> <p>For swing-up control, I employ a bang-bang control strategy. This simple yet effective approach is used to bring the pendulum from its downward position to near the upright position, where the state feedback controller can then take over for stabilization.</p> <p>The bang-bang control block determines the control input based on the pendulum’s angular velocity. It applies the maximum force in either the positive or negative direction, depending on the sign of the angular velocity. This creates a pumping effect that increases the pendulum’s energy, causing it to swing up.</p> <h1 id="iii-simulation">III. Simulation</h1> <p>For my simulation, I aimed to create a critically damped system where all poles are positioned on the real axis of the s-plane. However, due to limitations of MATLAB’s <code class="language-plaintext highlighter-rouge">place</code> function, I had to choose poles with multiplicity smaller than rank(B). Since the rank of B is 1, I selected poles with a 0.002 gap, such as -0.000, -0.002, -0.004, -0.006. This approach allowed me to create a system very close to critically damped while satisfying the constraints of the <code class="language-plaintext highlighter-rouge">place</code> function.</p> <h3 id="1-tracking">1. Tracking</h3> <h5 id="a-initial-state-x--0-theta--5circ">a) Initial State: \(x = 0, \theta = 5^{\circ}\)</h5> <p>I first tested with a small initial angle of \(5^{\circ}\) in the initial state. For this small region, linearization was effective and the linear controller could manage the system well. As the poles move farther from the origin, the response becomes faster. The results are shown in Videos 1 - 4 and Figures 7 - 8.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/01_tracking_01.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/02_tracking_02.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/03_tracking_03.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/04_tracking_04.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 1 - 4. State Feedback Controller with \( 5^{\circ} \) Initial Angle. \( s = [-1, -5, -10, -15] \) from left top to right bottom. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 7 - 8. Graphs of States with Initial State of \( \theta = 5^{\circ} \) and different pole positions. </div> <h5 id="b-initial-state-x--0-theta--30circ">b) Initial State: \(x = 0, \theta = 30^{\circ}\)</h5> <p>Next, I increased the initial angle to \(\theta = 30^{\circ}\). Compared to the \(5^{\circ}\) initial angle, two different behaviors were observed:</p> <ol> <li>The controller with the smallest pole magnitude (s = -1) couldn’t generate feedback large enough to raise the pendulum, resulting in failure to stabilize.</li> <li>The controller with the largest pole magnitude (s = -15) initially lost some control, showing worse performance compared to the controller with poles at s = -10.</li> </ol> <p>The results are shown in Video 5 and Figures 9 - 10.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/05_tracking_05.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 5. State Feedback Controller with \( 30^{\circ} \) Initial Angle. \( s = [-1, -5, -10, -15] \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 9 - 10. Graphs of States with Initial State of \( \theta = 30^{\circ} \) and different pole positions. </div> <p>Through iterative optimization, I found that the controller showed the best performance for \(\theta = 30^{\circ}\) when the poles are at \(s = -12\). The comparisons are shown in Figures 11 and 12.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 11 - 12. Pole Placement Optimization at Initial State of \( \theta = 30^{\circ} \). </div> <h5 id="c-initial-state-x--0-theta--90circ">c) Initial State: \(x = 0, \theta = 90^{\circ}\)</h5> <p>I increased the initial angle further to \(90^{\circ}\), allowing the swing-up controller to come into play. I tested poles at \(s = [-10, -12, -15, -18]\). Contrary to expectations, the controller with \(s = -15\) showed the best performance. This highlights a limitation of the pole placement method: the optimal controller varies depending on initial states. The results are shown in Video 6 and Figures 13 and 14.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/06_tracking_06.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 6. State Feedback Controller with \( 90^{\circ} \) Initial Angle. \( s = [-10, -12, -15, -18] \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 13 - 14. Pole Placement Optimization at Initial State of \( \theta = 90^{\circ} \). </div> <h5 id="d-initial-state-x--0-theta--150circ">d) Initial State: \(x = 0, \theta = 150^{\circ}\)</h5> <p>Issues arose when the initial angle reached \(150^{\circ}\). The system was stable only for a small range of pole positions from \(s = -3\) to \(s = -10\). The results are shown in Video 7.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/07_tracking_07.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 7. State Feedback Controller with \( 150^{\circ} \) Initial Angle. \( s = [-3, -5, -10, -12] \). </div> <h5 id="e-initial-state-x--0-theta--180circ-f--01n">e) Initial State: \(x = 0, \theta = 180^{\circ}, F = 0.1N\)</h5> <p>A similar problem occurred when applying a small force (0.1N) to the stable position (\(\theta = 180^{\circ}\) ). The results are shown in Video 8.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/08_tracking_08.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 8. State Feedback Controller with \( 180^{\circ} \) Initial Position and 0.1N Force. \( s = [-3, -5, -10, -12] \). </div> <p>The issues observed in sections d) and e) may result from the transition between the Bang-Bang controller and the State Feedback Controller. If a pendulum is pushed by a user and loses its position, it could revolve very quickly. When the pendulum’s speed is high, the swing-up control law continues to accelerate the pendulum. As both acceleration and speed increase, the state feedback controller may fail to stabilize the system. This can cause the pendulum to rotate continuously, potentially leading to motor malfunction. Furthermore, finding the optimal controller parameters for these edge cases proves to be challenging.</p> <h3 id="2-regulation">2. Regulation</h3> <h5 id="a-disturbance-f--01n">a) Disturbance \(F = 0.1N\)</h5> <p>The regulation with small disturbance showed similar behavior to the tracking with small initial angle. The controller’s performance improves as the magnitude of poles increases. In this simulation, I used \(s = [-5, -10, -15, -20]\). The results are shown in Video 9 and Figures 15 and 16.</p> <div style="width: 100%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/09_regulation_01.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 9. Regulation performance with 0.1N disturbance for different pole positions: s = [-5, -10, -15, -20]. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 15 - 16. Cart position (x1) and pendulum angle (x2) responses to 0.1N disturbance for different pole positions. </div> <h5 id="b-disturbance-f--1n">b) Disturbance \(F = 1N\)</h5> <p>Lastly, I simulated with a disturbance of 1N and found that if the pendulum moves beyond its linearized region \([-30^{\circ} \leq \theta \leq 30^{\circ}]\), the system becomes unstable. The reason for this was similar to the issue observed in the tracking simulation with large initial angles. When the pendulum’s speed is high, the swing-up control law continues to accelerate the pendulum. As both acceleration and speed increase, the state feedback controller may fail to stabilize the system.</p> <p>For this simulation, I tested four cases, from small to large pole positions: \(s = [-1, -5, -10, -15]\). Similar to the large initial angle tracking, I found a sweet spot that can successfully regulate the system. Smaller pole magnitudes induced behavior similar to understeering, while bigger pole magnitudes led to oversteering. The results are shown in Video 10 and Figures 17 - 18.</p> <div style="width: 100%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/10_regulation_02.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 10. Regulation performance with 1N disturbance for different pole positions: s = [-1, -5, -10, -15]. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 17 - 18. Cart position (x1) and pendulum angle (x2) responses to 1N disturbance for different pole positions. </div> <h3 id="3-conclusion">3. Conclusion</h3> <p>Based on the simulations, I concluded that the best pole placement for this system is at \(s = -10\). The controller with this pole position demonstrated good tracking and regulation performance with short settling times. However, even this controller could not regulate the system when the disturbance exceeded 2N, as shown in Video 11 and Figure 19.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/11_conclusion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 11. System response to disturbances greater than 2N, demonstrating the limitations of the controller with s = -10. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 19. System response showing instability when subjected to disturbances greater than 2N with the controller at s = -10. </div> <h1 id="iv-conclusion-and-moving-forward">IV. Conclusion and Moving Forward</h1> <p>Through my exploration of state feedback control for the inverted pendulum system, I’ve gained valuable insights into both the strengths and limitations of the pole placement method and Bang-Bang control. My simulations demonstrated the effectiveness of these approaches within certain bounds, but also revealed challenges when dealing with large disturbances or initial conditions.</p> <p>Based on these findings, my next steps will focus on implementing more advanced control strategies to address the limitations I’ve encountered:</p> <ol> <li><strong>LQR Controller for Stabilization</strong>: I will implement a Linear Quadratic Regulator (LQR) controller, which can be seen as an upgraded version of the pole placement method. LQR offers several advantages: <ul> <li>It provides a systematic way to find the optimal feedback gain matrix.</li> <li>It allows me to balance the trade-off between control effort and state regulation through the Q and R matrices.</li> <li>It often results in more robust control compared to simple pole placement.</li> </ul> <p>By implementing LQR, I aim to achieve better stabilization performance, especially for larger initial angles around the upright position.</p> </li> <li><strong>Energy Shaping Control for Swing-Up</strong>: To improve upon the Bang-Bang control used for swing-up, I will implement Energy Shaping control. This method offers several benefits: <ul> <li>It provides a smoother control action compared to Bang-Bang control.</li> <li>It explicitly considers the system’s energy, making it well-suited for the swing-up task.</li> <li>It can potentially provide a more reliable transition to the stabilization controller.</li> </ul> <p>With Energy Shaping control, I hope to achieve more consistent swing-up performance and a smoother handover to the stabilization controller.</p> </li> </ol> <p><strong>These advancements should address several of the limitations I observed:</strong></p> <ul> <li>The sensitivity to pole placement that I encountered should be mitigated by the LQR’s systematic approach to gain selection.</li> <li>The challenges in transitioning from swing-up to stabilization control should be reduced with the more sophisticated Energy Shaping method.</li> <li>The overall robustness of the system should improve, potentially allowing me to handle larger disturbances and a wider range of initial conditions.</li> </ul> <p>In my next update, I’ll dive into the theory behind LQR and Energy Shaping control, implement these methods for my inverted pendulum system, and compare their performance against my current pole placement and Bang-Bang control strategies. I’re excited to see how these advanced techniques will improve my inverted pendulum’s behavior across various scenarios!</p> <p>Stay tuned as I continue to push the boundaries of control for this fascinating nonlinear system! <br/> <br/> <br/></p> <h6 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h6> \[\]]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Simulink"/><category term="State_Feedback_Control"/><category term="Pole_Placement_Method"/><category term="Bang-Bang_Control"/><summary type="html"><![CDATA[Before diving into the technicalities, I must address a fundamental challenge encountered while implementing nonlinear controllers for multi-link mechanisms: the inherent high nonlinearity of these systems. This complexity can significantly complicate the design and effectiveness of controllers, posing a substantial barrier to achieving desired performance and stability.]]></summary></entry><entry><title type="html">[Controller Design] Day 5: PID Control with Computed Torque Method</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-5/" rel="alternate" type="text/html" title="[Controller Design] Day 5: PID Control with Computed Torque Method"/><published>2024-06-03T04:00:00+00:00</published><updated>2024-06-03T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-5</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-5/"><![CDATA[<p>This post builds upon the lecture by <a href="https://www.me.gatech.edu/faculty/ueda">Dr. Jun Ueda</a>, exploring an enhanced control system for multi-link mechanisms.</p> <h1 id="i-introduction">I. Introduction</h1> <p>On Day 4, I realized that while a PID controller with gravity compensation stabilizes the system faster, it often struggles with overreactions and potential destabilizations. This occurs because it focuses solely on angular positions, neglecting angular velocities.</p> <p>Building on the equations of motion derived on Day 3 for the triple-link mechanism:</p> \[\tau = M(q)\ddot{q} + h(q, \dot{q}) + g(q) \tag{1}\] <p>Where:</p> <ul> <li><strong>M(q) (Inertial Matrix)</strong>: Represents the system’s inertial properties, describing how the mechanism resists acceleration in response to applied torques.</li> <li><strong>h(q, ̇q) (Coriolis and Centrifugal Terms)</strong>: Accounts for the Coriolis and centrifugal forces, which depend on the system’s velocities and rotational dynamics.</li> <li><strong>g(q) (Gravitational Term)</strong>: Describes the torques induced by gravitational forces acting on each component of the mechanism.</li> </ul> <p>Today, I introduce a nonlinear control system that combines a PID controller with the computed torque method. This system tackles the nonlinear dynamics effectively, compensating for gravity and dynamic forces while integrating displacement and velocity feedback. This approach, known as feedback linearization, linearizes the control by canceling out nonlinearities, enhancing system stability and tracking accuracy.</p> <p>The updated methodology reduces the need for extensive parameter tuning and improves response times, making the system more reliable and user-friendly. It is particularly suited for advanced robotics and precision engineering applications where accuracy and dynamic performance are crucial.</p> <p>The revised block diagrams in Figures 1 and 2 illustrate how the computed torque method enhances the PID controller by leveraging the system’s full dynamics to accurately predict and correct disturbances. These diagrams are referenced from Dr. Jun Ueda’s lecture slides.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/01_block_diagram_overall-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/01_block_diagram_overall-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/01_block_diagram_overall-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/01_block_diagram_overall.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 1. Block Diagram of Overall Feedback System </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/02_block_diagram_computed_torque-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/02_block_diagram_computed_torque-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/02_block_diagram_computed_torque-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/02_block_diagram_computed_torque.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 2. Block Diagram of Computing Torque Block </div> <ol> <li> <p><strong>Linearized Dynamics:</strong> The linearized system dynamics are introduced using the equation:</p> \[\tau = M(q)\ddot{q}' + h(q, \dot{q}) + g(q) \tag{2}\] <p>This formula for \(\tau\), based on the computed input \(\ddot{q}'\), quantifies the total force required to achieve the control objectives. The dynamics without control input adjustment, given by Equation 1, are aligned with this formulation to yield:</p> \[M(q)\ddot{q}' + h(q, \dot{q}) + g(q) = M(q)\ddot{q} + h(q, \dot{q}) + g(q) \Rightarrow \ddot{q}' = \ddot{q} \tag{3}\] <p>This result indicates that under ideal control conditions, where the system accurately follows the control input, \(\ddot{q}'\) aligns with the actual acceleration \(\ddot{q}\) needed to match the desired trajectory, thereby confirming that the new control input effectively compensates for all dynamic forces impacting the system.</p> </li> <li> <p><strong>Input Through PID Controller:</strong> The new input \(\ddot{q}'\) is formulated using a PID controller to correct the error, described by the equation:</p> \[\ddot{q}' = \ddot{q}_d + K_d(\dot{q}_d - \dot{q}) + K_p(q_d - q) + K_i\int{(q_d - q)}dt \tag{4}\] <p>Using Equations 3 and 4, the dynamics correction can be expressed as:</p> \[(\ddot{q}_d - \ddot{q}) + K_d(\dot{q}_d - \dot{q}) + K_p(q_d - q) + K_i\int{(q_d - q)}dt \tag{5}\] </li> <li> <p><strong>Define the Error Dynamics:</strong> The tracking error is foundational for deriving the system’s dynamics, defined by:</p> \[e = q_d - q \tag{6}\] <p>This definition facilitates the expression of derivatives in terms of error:</p> \[\dot{e} = \dot{q}_d - \dot{q}, \quad \ddot{e} = \ddot{q}_d - \ddot{q} \tag{7}\] </li> <li> <p><strong>Error Dynamics Equation:</strong> Derived from Equation 5 by substituting Equations 6 and 7, the full error dynamics is given by:</p> \[\ddot{e} + K_d\dot{e} + K_pe + K_i \int{e}dt = 0 \tag{9}\] <p>This equation establishes the control dynamics under the implemented inputs, serving as a crucial indicator for system stability.</p> </li> <li> <p><strong>Stability Analysis:</strong> The stability of the system is evaluated using the <a href="https://en.wikipedia.org/wiki/Routh%E2%80%93Hurwitz_stability_criterion">Routh–Hurwitz criterion</a>, which is a well-established method for determining the stability of linear control systems. According to this criterion, the system is considered stable if:</p> \[K_dK_p &gt; K_i \tag{8}\] <p>This inequality must hold to ensure that the system approaches stability, meaning that as time approaches infinity, the error effectively reduces to zero:</p> \[t \rightarrow \infty \Rightarrow e \rightarrow 0.\] </li> </ol> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system">1. Overall System</h3> <p>The overall system is illustrated in Figure 3. As observed, the system architecture bears resemblance to a traditional PID control setup but incorporates additional subsystems and components to enhance functionality. These new elements are the “MUX (Red box)” and “DEMUX (Blue box)”, which play critical roles in handling signal matrices within the control loop.</p> <ul> <li> <p><strong>MUX (Red box)</strong>: The Multiplexer (MUX) is used to combine multiple single signals into a single matrix. This is particularly useful in control systems like ours where multiple input signals need to be processed simultaneously in a compact form. In Simulink, a MUX block simplifies system connections by aggregating several input lines into one output, feeding into systems that require a single input stream containing multiple signals.</p> </li> <li> <p><strong>DEMUX (Blue box)</strong>: Conversely, the Demultiplexer (DEMUX) is used to split a matrix into its component single signals. This is essential for systems that process signals in a matrix form but then require individual signal handling downstream. In Simulink, the DEMUX block facilitates the distribution of a single input containing multiple data points into multiple outputs, which can then be directed to specific parts of the system.</p> </li> </ul> <p>By channeling matrices through a “Computed Torque” subsystem using these blocks, the system is able to compute and output a new feedback torque that is more accurately aligned with the dynamic requirements of the controlled process.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 3. Schematic of the Multi-Link Mechanism Control System. </div> <h3 id="2-computed-torque-method-block">2. Computed Torque Method Block</h3> <p>Calculating torque through circuit design can be complex and time-consuming. Similar to the gravity calculation block described on Day 4, the computed torque method block simplifies this process. As depicted in Figure 4 and detailed through MATLAB scripts in Figures 5-7, I utilize “MATLAB Function blocks” within the computed torque block. These blocks allow me to script MATLAB code directly to compute each term of Equation 1. It’s important to note that I used a Matrix multiplication block instead of an element-wise multiplication block because Equation 1 involves matrix calculations, necessitating proper alignment and dimension matching of matrices.</p> <ul> <li> <p><strong>\(M(q)\)</strong>: This block computes the mass matrix (M) from Equation 1, which is critical as it reflects the system’s inertia. The matrix \(M\) is derived by partially differentiating Equation 1 with respect to each angular acceleration.</p> </li> <li> <p><strong>\(h(q, \dot{q})\)</strong>: This block calculates the Coriolis and centrifugal forces, represented as the second term in Equation 1. These dynamic forces are crucial for accurately modeling the behavior of rotating systems. The matrix \(h\) is obtained by isolating these forces in Equation 1, which can be done by subtracting \(M(q)\ddot{q} + g(q)\) from the total torque \(\tau\).</p> </li> <li> <p><strong>\(g(q)\)</strong>: This block computes the gravitational forces, consistent with the gravity block used on Day 4. This ensures that gravitational effects are accurately integrated into the torque computation. The matrix \(g\) is derived by isolating the gravitational term in Equation 1, which involves differentiating the gravitational components and then reintegrating them into the model.</p> </li> </ul> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 4. Computed Torque Method Block, illustrating the integration of MATLAB Function blocks for computing torque components. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 5 - 7. MATLAB Script for MATLAB Function Blocks for M, h, and g matrices. </div> <p>It’s important to note that \(q1\) has been defined as \(q(2) + \frac{\pi}{2}\). This definition is used because \(\theta_1\) is set as \(\theta_1 = \frac{\pi}{2} + q_1\) on Day 3.</p> <h1 id="iii-simulation">III. Simulation</h1> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the multi-link mechanism control system. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h3 id="1-tracking">1. Tracking</h3> <h5 id="a-no-pid-input">a) No PID Input</h5> <p>Initially, I set all the gains of the PID controller to zero to evaluate whether the computed torque block alone could effectively track the reference input. The results indicated that without the PID gains, the system failed to track the reference input and could not stabilize. I extended the simulation to 10,000 seconds, but the system remained unstable throughout, exhibiting behavior akin to an upside-down, slowly oscillating triple-link mechanism, which also showed signs of chaotic dynamics. This instability likely stems from the absence of error correction typically provided by the PID controller. The simulation video and the graph depicting each joint’s parameters are presented in Video 1 and Figure 8, respectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/01_no_PID_input.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Tracking of the Triple-Link Mechanism without PID input. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 8. Graphs of Joint Parameters without PID input. </div> <h5 id="b-varying-pid-gains">b) Varying PID gains</h5> <h6 id="1-k_p--01-k_i--0001-k_d--001">1) \(K_p = 0.1, K_i = 0.001, K_d = 0.01\)</h6> <p>I began with very small PID controller gains, anticipating that the results would be similar to those without PID input. However, the outcome was entirely different from what I had expected. The system rotated counterclockwise and was not fully chaotic. While Base 1, Link 1, and Link 3 became marginally stable, Link 2 remained unstable. Video 2 and Figure 9 depict the initial phase of the triple-link mechanism, while Video 3 and Figure 10 showcase the middle phase.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/02_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/03_tracking_1_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2 - 3. Tracking of the Triple-Link Mechanism with \( K_p = 0.1, K_i = 0.001, K_d = 0.01 \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 9 - 10. Graphs of Joint Parameters with \( K_p = 0.1, K_i = 0.001, K_d = 0.01 \). </div> <h6 id="2-k_p--1-k_i--001-k_d--01">2) \(K_p = 1, K_i = 0.01, K_d = 0.1\)</h6> <p>When I increased the gains slightly, the multi-link mechanism stabilized after oscillating for an extended period. An interesting observation was the lag in oscillation between the links. The maximum amplitude of Link 1 occurs first, followed by Link 2, and then Link 3. Also, intriguingly, when all the links are oscillating, the motion resembles that of a tail. Video 4 and Figure 11 display the results of the simulation.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/04_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 4. Tracking of the Triple-Link Mechanism with \( K_p = 1, K_i = 0.01, K_d = 0.1 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 11. Graphs of Joint Parameters with \( K_p = 1, K_i = 0.01, K_d = 0.1 \). </div> <h6 id="3-k_p--100-k_i--1-k_d--20">3) \(K_p = 100, K_i = 1, K_d = 20\)</h6> <p>I further increased the gain, resulting in rapid stabilization of the multi-link mechanism. An interesting behavior observed was that the multi-link mechanism maintained an almost straight posture during its movement. Video 5 and Figure 12 display the results of the simulation.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/05_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 5. Tracking of the Triple-Link Mechanism with \( K_p = 100, K_i = 1, K_d = 20 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 12. Graphs of Joint Parameters with \( K_p = 100, K_i = 1, K_d = 20 \). </div> <h6 id="4-k_p--106-k_i--104-k_d--2times105">4) \(K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>An interesting discovery was that although I could increase the PID gains indefinitely, the system’s performance has a distinct upper limit. Despite higher PID gains, performance actually deteriorated. It appears that for this controller, iterative testing is necessary to determine the optimal set of gains. Video 6 and Figure 12 compare the PID settings of \((K_p, K_i, K_d) = (100, 1, 20) and (10^6, 10^4, 2 \times 10^5)\).</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/06_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 6. Comparison of performance with PID gains of \( (100, 1, 20) \) versus \( (10^6, 10^4, 2\times10^5) \). </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 13. Interactive graphs comparing PID gains of \( (100, 1, 20) \) to \( (10^6, 10^4, 2 \times 10^5) \). </div> <h6 id="5-k_p--10-k_i--300-k_d--20-unstable-system">5) \(K_p = 10, K_i = 300, K_d = 20\) (Unstable System)</h6> <p>In the final phase of my tracking experiment, I simulated an unstable system characterized by the condition \(K_dK_p &lt; K_i\). As demonstrated in Video 7, Link 1, which experienced the most significant initial perturbation, exhibited signs of instability first. This instability progressively influenced Link 2 and Link 3, causing their perturbations to intensify. Ultimately, all links displayed unstable behavior. Figure 14 vividly illustrates this phenomenon, showing the angular positions of Link 2 and Link 3 diverging over time.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/07_tracking_5.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 7. Tracking of the Unstable Triple-Link Mechanism with \( K_p = 10, K_i = 300, K_d = 20 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 14. Graphs of Joint Parameters with \( K_p = 10, K_i = 300, K_d = 20 \). </div> <h3 id="2-regulation">2. Regulation</h3> <p>For the controller regulation simulation, I configured the initial joint PID gains to (100, 1, 20), which yielded the best performance in the tracking simulation. Additionally, I set the PID gains for the moving base to (10, 0.01, 4).</p> <h6 id="1-rho_0--2700kgm3-f--100n">1) \(\rho_0 = 2700kg/m^3, F = 100N\)</h6> <p>Compared to the PID + gravity compensation controller, there was less force propagation through the links, with most of the force being compensated by the rotation of Link 3, and the base remaining almost stationary. Video 7 and Figure 14 compare the simulations of PID + Gravity Compensation (PID + g) and PID + Computed Torque (PID + t).</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/08_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 8. Regulation Comparison Under 100N Disturbance: PID with Gravity Compensation vs. PID with Computed Torque. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 15. Interactive Graphs of PID with Gravity Compensation vs. PID with Computed Torque. </div> <h6 id="2-rho_0--2700kgm3-f--500n">2) \(\rho_0 = 2700kg/m^3, F = 500N\)</h6> <p>In Video 8, the “PID + gravity compensation” method enabled force to propagate through the links, requiring all the actuators at the joints to exert a similar effort to stabilize the system. In contrast, Video 9 demonstrates the “PID + computed torque” method, where force propagation was significantly reduced, concentrating the effort predominantly on Joint 3. This led to a longer stabilization time for the system, as the impact was not effectively absorbed by all the links and the base, but was largely managed by link 3. The differences in actuator displacement, as shown in Figure 15 and Figure 16, related to the difference in the distribution of impact absorption between the two methods.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/11_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/10_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 9 - 10. Triple-Link Mechanism Simulations with PID Control: PID + gravity compensation vs. PID + computed torque. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 16 - 17. Actuator Displacement Comparison in Triple-Link Mechanism Simulations: PID + gravity compensation vs. PID + computed torque. </div> <h6 id="3-rho_0--2700kgm3-f--500n-k_p--106-k_i--104-k_d--2times105">3) \(\rho_0 = 2700kg/m^3, F = 500N, K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>As observed during the tracking simulation, I was able to set the PID gains extremely high. With these settings, the regulation was effectively managed; the links hardly moved. Interestingly, the base moved toward the left, opposite to the direction of the external force. This is due to the efforts of the joints. The results are showcased in Video 10 and Figure 17.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/11_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 11. Regulation of the Triple-Link Mechanism with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 500N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 18. Graphs of Joint Parameters with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 500N \). </div> <h6 id="3-rho_0--2700kgm3-f--50000n-k_p--106-k_i--104-k_d--2times105">3) \(\rho_0 = 2700kg/m^3, F = 50000N, K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>However, as demonstrated in Video 11 and Figure 18, if the force is sufficiently strong, the base moves to the right, aligning with the direction of the external force.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/12_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 12. Regulation of the Triple-Link Mechanism with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 50000N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 19. Graphs of Joint Parameters with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5 , F = 50000N\). </div> <h6 id="4-rho_0--2700kgm3-f--1n-k_p--10-k_i--300-k_d--20-unstable-system">4) \(\rho_0 = 2700kg/m^3, F = 1N, K_p = 10, K_i = 300, K_d = 20 (Unstable System)\)</h6> <p>Similar to the tracking simulation, I also simulated the regulation of an unstable system, defined by the condition \(K_dK_p &lt; K_i\). In this configuration, even a minor perturbation can cause the system to diverge rapidly. This sensitivity to disturbances highlights the challenges of controlling such a system. In my Video 12 and Figure 20, you can observe how these tiny perturbations escalated, leading to increasingly significant deviations from the stable state.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/13_regulation_5.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 12. Regulation of the Unstable Triple-Link Mechanism with \( K_p = 10, K_i = 30, K_d = 20, F = 1N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 20. Graphs of Joint Parameters with \( K_p = 10, K_i = 300, K_d = 20, F = 1N \). </div> <h1 id="iv-conclusion">IV. Conclusion</h1> <p>Today, I enhanced the control of a fully actuated multi-link mechanism using a PID controller integrated with the computed torque method. Compared to standalone PID control and PID with gravity compensation, this approach demonstrated superior performance. One notable advantage is that this system achieves full linearity through feedback linearization, simplifying the control loop.</p> <p>During the simulation, I observed two key findings: First, while the gains of the PID controller can be increased significantly, this does not necessarily translate to improved performance. Second, although the computed torque method markedly enhances system performance, it does not address inherent PID limitations such as the potential for overreaction. This suggests that while the PID controller remains a component, some of its fundamental drawbacks persist.</p> <p>Through Days 4 and 5, I studied and implemented the feedback linearization method for nonlinear systems. Now, equipped with this understanding, I am eager to explore a variety of other nonlinear control strategies. Stay tuned for more updates as I continue to explore the fascinating world of multi-link mechanisms and tackle the challenges associated with controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Simulink"/><category term="Computed_Torque_Method"/><summary type="html"><![CDATA[This post builds upon the lecture by Dr. Jun Ueda, exploring an enhanced control system for multi-link mechanisms.]]></summary></entry><entry><title type="html">[Controller Design] Day 4: PID Control with Gravity Compensation Method</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-4/" rel="alternate" type="text/html" title="[Controller Design] Day 4: PID Control with Gravity Compensation Method"/><published>2024-05-28T04:00:00+00:00</published><updated>2024-05-28T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-4</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-4/"><![CDATA[<p>This post builds upon the lecture by <a href="https://www.me.gatech.edu/faculty/ueda">Dr. Jun Ueda</a>, exploring an enhanced control system for multi-link mechanisms.</p> <h1 id="i-introduction">I. Introduction</h1> <p>PID (Proportional-Integral-Derivative) control systems are widely appreciated for their straightforward design, as they don’t require an in-depth understanding of the complex dynamic equations governing triple-link mechanisms. However, this simplicity can be a double-edged sword. The system may exhibit instability or overreaction due to its inability to account for intricate dynamics. Moreover, PID controllers often struggle to balance rapid response with minimal overshoot, and their inherent limitations in handling nonlinear behaviors can make designing an effective system challenging.</p> <p>In this post, I introduce a novel nonlinear control system that combines a PID controller with a gravity compensation method. This approach offers a robust yet accessible framework for managing triple-link mechanisms, enhancing both performance and ease of implementation. By integrating gravity compensation, this system improves upon traditional PID controllers by specifically addressing the nonlinearities induced by gravitational forces, thereby reducing settling time and improving overall stability.</p> <p>On Day 3, I derived the equations of motion for the triple-link mechanism:</p> \[\tau = M(q)\ddot{q} + h(q, \dot{q}) + g(q)\] <p>Where:</p> <ul> <li><strong>M(q) (Inertial Matrix)</strong>: Represents the system’s inertial properties, describing how the mechanism resists acceleration in response to applied torques.</li> <li><strong>h(q, ̇q) (Coriolis and Centrifugal Terms)</strong>: Accounts for the Coriolis and centrifugal forces, which depend on the system’s velocities and rotational dynamics.</li> <li><strong>g(q) (Gravitational Term)</strong>: Describes the torques induced by gravitational forces acting on each component of the mechanism.</li> </ul> <p>The gravity compensation method involves extracting the \(g(q)\) term from the equation of motion and incorporating it into the feedback loop of the PID controller. This approach allows the control system to proactively counteract gravitational effects, leading to more precise and efficient control. Figure 1 illustrates the block diagram of this enhanced control system.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 1. Block Diagram of the PID Control System with Gravity Compensation Method </div> <p>In the following sections, I will delve deeper into the implementation and advantages of this combined PID and gravity compensation approach, demonstrating its effectiveness in controlling triple-link mechanisms.</p> <h1 id="ii-a-multi-link-mechanism-with-a-fixed-base">II. A Multi-Link Mechanism with a Fixed Base</h1> <h3 id="a-overall-system">A. Overall System</h3> <p>The overall system is depicted in Figure 1. This system closely resembles that of Day 2, with the addition of a gravity calculation block. The angular displacement of each joint is fed into both the PID controller block and the gravity calculation block. Each block calculates its own feedback, which is then combined to determine the feedback torque needed to actuate the joints.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 2. Schematic of the Multi-Link Mechanism Control System with Fixed Base </div> <h3 id="b-gravity-calculation-block">B. Gravity Calculation Block</h3> <p>The gravity calculation block is relatively straightforward. Calculating the gravity term through circuit design is complex and time-consuming. Instead, I use a “MATLAB Function block,” as illustrated in Figure 2. This block allows me to write a MATLAB script to compute the gravity term, which is detailed in Figure 3.</p> <p>Extracting the gravity term from the equation of motion is straightforward. Given the symbolic representation of the motion equation, I apply partial differentiation with respect to \(g\), the gravitational constant, to isolate the gravity-related terms. After this differentiation, I multiply the result by \(g\) again to reintegrate the gravity constant into the equation. Additionally, I replace \(q_1\) with \(q_1 + \frac{\pi}{2}\) in the equation, as I used \(\theta\) as the variable instead of \(q\), in Day 3.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Gravity Calculation Block </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 4. MATLAB Script for MATLAB Function Block for Gravity Calculation </div> <h3 id="c-simulation">C. Simulation</h3> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the system with fixed base. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h5 id="1-tracking">1) Tracking</h5> <p>Firstly, I set all the gains of the PID controller to zero to test if compensating gravity alone could track the reference input. The results demonstrated that it could neither track the reference input nor stabilize the system. I ran the simulation for up to 10,000 seconds, but the system remained unstable. It resembled an upside-down, slow-moving triple-link mechanism, which also exhibited chaotic behavior. The simulation video and the graph for each joint parameter are displayed in Video 1 and Figure 5, respectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/01_fixed_no_PID.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Simulation of Triple-Link Mechanism with Compensating Gravity Only. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Joint Parameter Graphs for Sole Gravity Compensation Response. </div> <p>Following the initial simulation, I executed a second simulation using the same PID controller settings as on Day 2, incorporating the gravity calculation block as well. This simulation was intended to assess the impact of gravity compensation on the system’s overall performance. The results, as depicted in Video 2 and Figure 6, indicate that gravity compensation slightly enhanced the tracking speed. In Video 2, the left multi-link mechanism is controlled solely by a PID controller, while the right multi-link mechanism utilizes both PID control and gravity compensation. In Figure 6, you can slide the graphs to switch between the PID (left) and PID + gravity compensation (right) data for comparison.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/02_fixed_comparison.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2. Comparison of Tracking Performance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 6. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <p>Lastly, I extracted the feedback data from each PID controller and the gravity calculation block to analyze how the gravity term influences the overall feedback. Figures 7 through 9 display the feedback from each joint.</p> <p>To reduce the torque overshoot, the PID controller’s gain can be adjusted by decreasing \(K_p\) or increasing \(K_d\), though this tends to slow the system. However, as demonstrated in Figures 7 through 9, the feedback from gravity compensation acts to counterbalance the PID controller, effectively reducing torque overshoot without significantly affecting the system’s transient response time. This allows for quicker convergence.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 7 - 9. Feedback Analysis for Each Joint with PID and Gravity Compensation. </div> <h5 id="2-regulation">2) Regulation</h5> <p>Through simulation of the tracking, it was found that compensating for gravity aids in faster system convergence and reduces overshoot. Additionally, systems with gravity compensation restabilized more quickly and exhibited smaller overshoots compared to those without it under similar conditions when dealing with small disturbances. However, for larger disturbances, does gravity compensation resolve issues such as overreaction and destabilization? The answer is no. Despite implementing gravity compensation, these issues remained unresolved for larger disturbances. This conclusion is supported by the results shown in Videos 3 through 5 and Figures 10 through 12.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/03_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 3. Regulation Comparison Under 100N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 10. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <hr/> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/04_fixed_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 4. Regulation Comparison Under 110N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 11. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <hr/> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/03_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 5. Regulation Comparison Under 3000N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 12. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <p>Even though gravity compensation could not resolve the overreaction issue, it was observed that systems with gravity compensation recovered more quickly than those without. This quicker recovery was achieved by maintaining a faster angular speed when the angular displacement was small. Through simulation, it was determined that gravity compensation is more effective when there is a small angular displacement. Consequently, under conditions of small angular displacement, using a PID controller with gravity compensation can efficiently manage the system, optimizing performance and stability.</p> <h1 id="iii-a-multi-link-mechanism-with-a-moving-base">III. A Multi-Link Mechanism with a Moving Base</h1> <h3 id="a-overall-system-1">A. Overall System</h3> <p>Thankfully, the base moves only along the x-axis, and there are no gravity terms related to the base. As a result, this setup closely resembles a system with a fixed base. The overall system configuration is depicted in Figure 13.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 13. Schematic of the Multi-Link Mechanism Control System with Moving Base </div> <h3 id="b-simulation">B. Simulation</h3> <p>Since there were no significant changes, and I’ve already discussed all the findings in the fixed base section, I will present the results using the same parameters as Day 2. The results demonstrate faster stabilization.</p> <h5 id="1-tracking-1">1) Tracking</h5> <p>Videos 6 through 9 and Figures 14 through 17 demonstrate the tracking capabilities of the controller across various initial states in the simulation of a triple-link mechanism with a moving base. The initial states are defined as follows: for \(q_1\), the values are (180, -90, 150, 190); for \(q_2\), the values are (0, 0, 180, 180); and for \(q_3\), the values are (0, 0, 180, -110).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/06_moving_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/07_moving_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/08_moving_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/09_moving_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 6 - 9. Demonstrating the Tracking Capabilities of the Controller Across Various Initial States in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 14 - 17. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Initial States. </div> <h5 id="2-regulation-1">2) Regulation</h5> <p>Videos 10 through 13 and Figures 18 through 21 demonstrate the tracking capabilities of the controller across various initial states in the simulation of a triple-link mechanism with a moving base. All the initial states, \(q\), were set to 0. Adjustments were then made to the density of the base and the magnitude of disturbance. The densities, denoted as \(\rho_0\), are set to \((2700, 2700, 50000, 50000) kg/m^3\), and the forces, denoted as \(f\), are \((100, 500, 300, 500) N\).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/10_moving_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/11_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/12_moving_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/13_moving_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 10 - 13. Demonstrating the Regulation Capabilities of the Controller Across Various Disturbances in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 18 - 21. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Disturbances. </div> <h1 id="iv-conclusion-and-moving-forward">IV. Conclusion and Moving Forward</h1> <p>Today, I managed a fully actuated multi-link mechanism using a PID controller complemented by gravity compensation. The simulations revealed that gravity compensation significantly enhances stabilization by maintaining a high angular velocity when the angular displacement is minimal. Upon examining the torque feedback, I observed that gravity compensation acts as a counterbalance to the feedback from the PID, effectively reducing torque overshoot. Therefore, in scenarios involving only slight angular displacements, incorporating gravity compensation can markedly improve system performance.</p> <p>During today’s simulations, I realized that simulating the fixed base system might be time-consuming. Hence, starting from Day 5, I will omit simulations of the fixed base system. Stay tuned for more updates as I continue exploring the fascinating realm of multi-link mechanisms and tackle the challenges associated with controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Simulink"/><category term="Gravity_Compensation_Method"/><summary type="html"><![CDATA[This post builds upon the lecture by Dr. Jun Ueda, exploring an enhanced control system for multi-link mechanisms.]]></summary></entry><entry><title type="html">[Controller Design] Day 3: The Equations of Motion and the Jacobians of the Triple-Link Mechanism</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-3/" rel="alternate" type="text/html" title="[Controller Design] Day 3: The Equations of Motion and the Jacobians of the Triple-Link Mechanism"/><published>2024-05-24T04:00:00+00:00</published><updated>2024-05-24T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-3</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-3/"><![CDATA[<p>In my previous work, I implemented a PID controller that relied solely on the difference between the reference angle and the current angle. Due to its simplistic mechanism, an in-depth understanding of the triple-link mechanism’s behavior was not required. However, given the inherent nonlinearity of the triple-link mechanism, the PID controller proved somewhat inefficient and performed less effectively compared to other controllers.</p> <p>Subsequent controllers necessitate a thorough analysis of the triple-link mechanism’s behavior. Therefore, I will explore the equations of motion and the Jacobians of the triple-link mechanism in detail.</p> <h1 id="i-introduction">I. Introduction</h1> <h3 id="a-lagrangian-dynamics">A. Lagrangian Dynamics</h3> <p>Newtonian dynamics typically employs rectangular (orthogonal) coordinate systems and incorporates constraint forces directly into the system. In contrast, Lagrangian dynamics is more flexible, allowing the use of any set of variables—known as generalized coordinates, denoted q—as long as they uniquely describe the position of the bodies within the system. The general formulation of Lagrangian dynamics is often derived from Hamilton’s principle, but it can also be developed through Newtonian principles. This approach uses the relationship between work and force to formulate the equations of motion in terms of the desired coordinates within the system. Importantly, it is possible to initiate an analysis using Lagrangian dynamics without first employing other dynamical formulations.</p> <h3 id="b-derivation-of-dynamics-equations-of-motion">B. Derivation of Dynamics Equations of Motion</h3> <p>Lagrangian dynamics centers around the use of the Lagrangian, defined as:</p> \[L = KE - PE \tag{1}\] <p>Here, \(KE\) represents the total kinetic energy of the system, and \(PE\) PE denotes the total potential energy, both expressed in terms of generalized coordinates (e.g., \(x, \theta_1\)). This equation is manipulated to derive the equations of motion for the system through the following relationship:</p> \[\left(\frac{d}{dt}\frac{\partial L}{\partial \dot{q}} - \frac{\partial L}{\partial q}\right)^T = Q \tag{2}\] <p>In this equation, \(Q\) is a vector that includes each of the generalized forces associated with the chosen generalized coordinates (e.g., \(f_x, \tau_1\)).</p> <p>Let the following is the equation of motion of a double-link mechanism.</p> \[\begin{bmatrix}\tau_1 \\ \tau_2 \end{bmatrix} = \begin{bmatrix} M_{1, 1} &amp; M_{1, 2} \\ M_{2, 1} &amp; M_{2, 2} \end{bmatrix}\begin{bmatrix}\ddot{\theta}_1 \\ \ddot{\theta}_2 \end{bmatrix} + \begin{bmatrix} h_{1, 1}\dot{\theta}_2^2 + h_{1, 2}\dot{\theta}_1\dot{\theta}_2 \\ h_{2, 1}\dot{\theta}_1^2 \end{bmatrix} + \begin{bmatrix} g_{1} \\ g_{2}\end{bmatrix}g\] <p>Where:</p> <ul> <li><strong>Matrix M (Inertial Term)</strong>: Represents the Newtonian response of the system to applied forces, accounting for the inertia of the masses.</li> <li><strong>Matrix h (Coriolis and Centrifugal Forces)</strong>: <ul> <li><strong>Centrifugal Force</strong>: Arises from terms like \(\dot{\theta}_1^2, \dot{\theta}_2^2\) and affects the system when rotating.</li> <li><strong>Coriolis Force</strong>: Results from terms like \(\dot{\theta}_1\dot{\theta}_2\) and is evident when components of the system move relative to one another.</li> </ul> </li> <li><strong>Matrix g (Gravitational Term)</strong>: Accounts for the force due to gravity acting on each mass component.</li> </ul> <h3 id="c-derivation-of-jacobians">C. Derivation of Jacobians</h3> <p>The Jacobian matrix is a fundamental tool in linear approximation, playing a crucial role in understanding how small changes in input variables affect output variables. It is especially valuable for analyzing system behavior near a specific operational point.</p> <p>Suppose you have a function \(f\) that maps a set of inputs \(\mathbf{q} = (q_1, q_2, ..., q_n)\) in \(\mathbb{R}^n\) to outputs \(\mathbf{p} = (p_1, p_2, ..., p_m)\) in \(\mathbb{R}^m\):</p> \[\mathbf{f} : \mathbb{R}^n \rightarrow \mathbb{R}^m\] <p>where</p> \[\mathbf{f}(\mathbf{q}) = \begin{bmatrix} p_1(q_1, \dots, q_n) \\ p_2(q_1, \dots, q_n) \\ \vdots \\ p_m(q_1, \dots, q_n) \end{bmatrix}\] <p>The Jacobian matrix \(\mathbf{J}\) of the function \(\mathbf{f}\) at a point \(\mathbf{q}\) in its domain is given by the matrix of partial derivatives:</p> \[\mathbf{J} = \begin{bmatrix} \frac{\partial p_1}{\partial q_1} &amp; \frac{\partial p_1}{\partial q_2} &amp; \cdots &amp; \frac{\partial p_1}{\partial q_n} \\ \frac{\partial p_2}{\partial q_1} &amp; \frac{\partial p_2}{\partial q_2} &amp; \cdots &amp; \frac{\partial p_2}{\partial q_n} \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ \frac{\partial p_m}{\partial q_1} &amp; \frac{\partial p_m}{\partial q_2} &amp; \cdots &amp; \frac{\partial p_m}{\partial q_n} \end{bmatrix} \tag{3}\] <p>In my scenario, the Jacobian matrix captures the relationship between each joint parameter and the position and orientation of link3’s center of mass, since my system does not include a typical end-effector.</p> <h1 id="ii-my-scenario">II. My Scenario</h1> <h3 id="a-a-triple-link-mechanism-with-a-fixed-base">A. A Triple-Link Mechanism with a Fixed Base</h3> <p>The free body diagram of the triple-link mechanism with a fixed base is illustrated in Figure 1. In this diagram, the positive z-axis of the global frame is initially considered as the reference position. For simplification purposes, I have designated the x-axis of the global frame as the new reference position, leading to the relationship \(\theta_1 = \frac{\pi}{2} + q_1\). The variables \(q_2\) and \(q_3\) are retained as \(\theta_2\) and \(\theta_3\), respectively.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed-480.webp 480w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed-800.webp 800w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Free Body Diagram of the Triple-Link Mechanism with Fixed Base </div> <ul> <li>\(\theta_i\): the joint angle of joint \(i\)</li> <li>\(m_i\): the mass of link \(i\)</li> <li>\(I_i\): the moment of inertia of link \(i\) about the axis that passes through the center of mass and is parallel to the \(Z_i\)-axis</li> <li>\(l_i\): the length of link \(i\)</li> <li>\(g\): the magnitude of gravitational acceleration</li> <li>\(S_{ijk}\): \(\sin(\theta_i + \theta_j + \theta_k)\)</li> <li>\(C_{ijk}\): \(\cos(\theta_i + \theta_j + \theta_k)\)</li> </ul> <p>The moment of inertia for each link in my system can be calculated using the formula:</p> \[I = \frac{1}{12}m(l^2 + w^2) \approx \frac{1}{12}ml^2\] <p>This approximation holds because the length \(l\) of each link significantly exceeds its width \(w\). Given this, I can describe the center of mass for each link as follows:</p> <ul> <li>For the link 1: \(s_1 = \begin{bmatrix} \frac{1}{2} l_1 \cos(\theta_1) \\ \frac{1}{2} l_1 \sin(\theta_1) \end{bmatrix}\)</li> <li>For the link 2: \(s_2 = \begin{bmatrix} l_1 \cos(\theta_1) + \frac{1}{2} l_2 \cos(\theta_{12}) \\ l_1 \sin(\theta_1) + \frac{1}{2} l_2 \sin(\theta_{12}) \end{bmatrix}\)</li> <li>For the link 3: \(s_3 = \begin{bmatrix} l_1 \cos(\theta_1) + l_2 \cos(\theta_{12}) + \frac{1}{2} l_3 \cos(\theta_{123}) \\ l_1 \sin(\theta_1) + l_2 \sin(\theta_{12}) + \frac{1}{2} l_3 \sin(\theta_{123}) \end{bmatrix}\)</li> </ul> <h5 id="1-equation-of-motion">1) Equation of Motion</h5> <p>The linear velocity of each link’s center of mass is expressed as:</p> \[\dot{s} = \frac{ds}{dt}.\] <p>Similarly, the angular velocity for each link is summed up to:</p> \[\sum_{k=1}^i \dot{\theta}_k.\] <p>The energy dynamics of the system are defined by the kinetic and potential energies:</p> \[KE_i = \frac{1}{2} m_i \dot{s}_i^\top \dot{s}_i + \frac{1}{2} I_i \left( \sum_{k=1}^i \dot{\theta}_k \right)^2,\] \[PE_i = m_i g s_{i, 2},\] <p>where \(s_{i, 2}\) represents the y-component of the vector \(s_i\).</p> <p>The overall dynamics are governed by the Lagrangian, which is:</p> \[L = \sum_{i=1}^3 KE_i - \sum_{i=1}^3 PE_i.\] <p>Finally, by substituting \(L\) into equation (1), I derive the equations of motion. I will not detail the derivation and results here due to their length.</p> <h5 id="2-jacobian">2) Jacobian</h5> <p>The position and orientation of the center of mass of link 3 are represented as follows:</p> \[\mathbf{f} = \begin{bmatrix} x_{g, 3} \\ y_{g, 3} \\ \Omega \end{bmatrix} = \begin{bmatrix} l_1 \cos(\theta_1) + l_2 \cos(\theta_{12}) + \frac{1}{2} l_3 \cos(\theta_{123}) \\ l_1 \sin(\theta_1) + l_2 \sin(\theta_{12}) + \frac{1}{2} l_3 \sin(\theta_{123}) \\ \theta_1 + \theta_2 + \theta_3 \end{bmatrix}\] <p>Consequently, the Jacobian matrix is given by:</p> \[J = \begin{bmatrix} \frac{\partial x_{g, 3}}{\partial \theta_1} &amp; \frac{\partial x_{g, 3}}{\partial \theta_2} &amp; \frac{\partial x_{g, 3}}{\partial \theta_3} \\ \frac{\partial y_{g, 3}}{\partial \theta_1} &amp; \frac{\partial y_{g, 3}}{\partial \theta_2} &amp; \frac{\partial y_{g, 3}}{\partial \theta_3} \\ 1 &amp; 1 &amp; 1 \end{bmatrix}\] <p>where:</p> <ul> <li>\(x_{g, 3}\) and \(y_{g, 3}\) are the \(x\) and \(y\) coordinates of the center of mass of link 3.</li> <li>The derivatives \(\frac{\partial x_{g, 3}}{\partial \theta_i}\) and \(\frac{\partial y_{g, 3}}{\partial \theta_i}\) involve sine and cosine functions reflecting changes in position with respect to changes in the angles \(\theta_1\), \(\theta_2\), and \(\theta_3\).</li> <li>The third row reflects the direct additive impact of each joint angle on the overall orientation \(\Omega\).</li> </ul> <p>For the complete calculations and results, please refer to the ‘Day_03_Fixed_Base.m’ file available on <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</p> <h3 id="b-a-triple-link-mechanism-with-a-moving-base">B. A Triple-Link Mechanism with a Moving Base</h3> <p>The free body diagram of the triple-link mechanism with a moving base is illustrated in Figure 2. It is similar to the fixed base but I added another parameter (\(x\)).</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving-480.webp 480w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving-800.webp 800w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 2. Free Body Diagram of the Triple-Link Mechanism with Moving Base </div> <p>Since \(x\) influences the x-component of each center of mass, I must update them accordingly.</p> <ul> <li>For the base: \(s_0 = \begin{bmatrix} x \\ 0 \end{bmatrix}\)</li> <li>For the link 1: \(s_1 = \begin{bmatrix} x + \frac{1}{2} l_1 \cos(\theta_1) \\ \frac{1}{2} l_1 \sin(\theta_1) \end{bmatrix}\)</li> <li>For the link 2: \(s_2 = \begin{bmatrix} x + l_1 \cos(\theta_1) + \frac{1}{2} l_2 \cos(\theta_{12}) \\ l_1 \sin(\theta_1) + \frac{1}{2} l_2 \sin(\theta_{12}) \end{bmatrix}\)</li> <li>For the link 3: \(s_3 = \begin{bmatrix} x + l_1 \cos(\theta_1) + l_2 \cos(\theta_{12}) + \frac{1}{2} l_3 \cos(\theta_{123}) \\ l_1 \sin(\theta_1) + l_2 \sin(\theta_{12}) + \frac{1}{2} l_3 \sin(\theta_{123}) \end{bmatrix}\)</li> </ul> <h5 id="1-equation-of-motion-1">1) Equation of Motion</h5> <p>The approach remains the same as with the fixed base. However, I needed to account for the fact that there is only translational motion in the base.</p> \[L = \sum_{i=0}^3 KE_i - \sum_{i=0}^3 PE_i.\] <h5 id="2-jacobian-1">2) Jacobian</h5> <p>The function \(f\) f remains unchanged, but I must update the Jacobian matrix \(J\) as follows:</p> \[J = \begin{bmatrix} 1 &amp; \frac{\partial x*{g, 3}}{\partial \theta*1} &amp; \frac{\partial x*{g, 3}}{\partial \theta*2} &amp; \frac{\partial x*{g, 3}}{\partial \theta*3} \\ 0 &amp; \frac{\partial y*{g, 3}}{\partial \theta_1} &amp; \frac{\partial y*{g, 3}}{\partial \theta*2} &amp; \frac{\partial y*{g, 3}}{\partial \theta_3} \\ 0 &amp; 1 &amp; 1 &amp; 1 \end{bmatrix}\] <p>For the complete calculations and results, please refer to the ‘Day_03_Moving_Base.m’ file available on <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</p> <h3 id="c-a-pendulum-on-cart">C. A Pendulum on Cart</h3> <p>For a simplified model derived from the triple-link mechanism on a moving base, consider only the base and the first link.</p> <ul> <li><strong>Base coordinates</strong>: \(s_0 = \begin{bmatrix} x \\ 0 \end{bmatrix}\)</li> <li><strong>Link 1 coordinates</strong>: \(s_1 = \begin{bmatrix} x + \frac{1}{2} l_1 \cos(\theta_1) \\ \frac{1}{2} l_1 \sin(\theta_1) \end{bmatrix}\)</li> </ul> <h5 id="1-equations-of-motion">1) Equations of Motion:</h5> <p>The equations of motion for the system, including both inertial and gravitational effects, can be represented in matrix form as follows:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{m_1 l_1 \sin(\theta_1)}{2} \\ -\frac{l_1 m_1 \sin(\theta_1)}{2} &amp; \frac{l_1^2 m_1}{3} \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} + \begin{bmatrix} -\frac{1}{2}m_1 l_1 \cos(\theta_1) \dot{\theta}_1^2 \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ \frac{1}{2}g l_1 m_1 \cos(\theta_1) \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix}\] <p>These equations of motion may appear unconventional because the angle reference \(\theta_1\) is defined from the horizontal (positive x-axis), rather than the more typical vertical reference. This orientation alters the trigonometric components and their interactions within the dynamic model, influencing how terms involving \(\sin(\theta_1)\) and \(\cos(\theta_1)\) are applied in the system’s matrix representation.</p> <h1 id="iii-conclusion">III. Conclusion</h1> <p>Today, I derived the equations of motion for a triple-link mechanism with both fixed and moving bases. These results will be instrumental in developing advanced control mechanisms such as gravity compensation control, Jacobian transpose control, and controllers for underactuated systems. Please stay tuned for more updates!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Equation_of_Motion"/><summary type="html"><![CDATA[In my previous work, I implemented a PID controller that relied solely on the difference between the reference angle and the current angle. Due to its simplistic mechanism, an in-depth understanding of the triple-link mechanism’s behavior was not required. However, given the inherent nonlinearity of the triple-link mechanism, the PID controller proved somewhat inefficient and performed less effectively compared to other controllers.]]></summary></entry><entry><title type="html">[Controller Design] Day 2: PID Controller</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-2/" rel="alternate" type="text/html" title="[Controller Design] Day 2: PID Controller"/><published>2024-05-20T04:00:00+00:00</published><updated>2024-05-20T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-2</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-2/"><![CDATA[<p>A fully actuated system is one in which the number of independent actuators matches the number of degrees of freedom, allowing for direct control over each motion dimension. This setup is typical in industrial robots and other motor-driven mechanisms, where each joint or axis is controlled by its own motor, facilitating precise manipulation.</p> <p>For example, a fully actuated multi-link mechanism is easier to control because each degree of freedom—whether it involves rotation or translation—is directly managed by an independent actuator. This direct manipulation allows for precise adjustments to the multi-link mechanism’s position and motion, simplifying the control algorithms needed for maintaining stability and achieving desired behaviors. In such systems, the control can often be accomplished using linear controllers, though an understanding of nonlinear dynamics is still beneficial for optimizing performance and handling more complex scenarios.</p> <p>Today, I will simulate the PID controller, which is the simplest and most representative type of linear controller. The block diagram of the PID controller system is presented in Figure 0. I added this at the end and chose not to update the figure numbering.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 0. Block Diagram of the PID Controller System </div> <h1 id="i-a-multi-link-mechanism-with-a-fixed-base">I. A Multi-Link Mechanism with a Fixed Base</h1> <h3 id="a-overall-system">A. Overall System</h3> <p>The overall system is depicted in Figure 1. This system closely resembles that of Day 1 but includes an added PID control subsystem. The angular displacement of each joint is input into the PID controller block, which calculates the feedback torque to actuate the joints.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 1. Schematic of the Multi-Link Mechanism Control System with Fixed Base </div> <h3 id="b-subsystems">B. Subsystems</h3> <h5 id="1-links">1) Links</h5> <p>In the updated design of the link subsystems, illustrated in Figures 2, 3, and 4, I’ve introduced several modifications to enhance realism and functionality. These changes echo the foundational setups from Day 1 but with key differences:</p> <ul> <li>To better realize the oscillatory nature of real-world multi-link mechanism dynamics, I’ve configured the angular displacement of each link to be periodic, spanning a full circle from \(-\pi\) to \(\pi\).</li> <li>In a shift from the initial configuration, I’ve realigned the x-axis of link 1 to coincide with the z-axis of the world frame.</li> <li>Additionally, I’ve incorporated blocks to generate an impulsive external force at the end of link 3, to simulate external forces on the system and test its regulatory response.</li> </ul> <p>The modifications ensure that when the multi-link mechanism is upright, its angular displacement is set to \(0\). This allows me to use the origin as my equilibrium point in subsequent simulations.</p> <div class="col-sm mt-3 mt-md-0"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 2: Detailed View of Link 1 Subsystem. </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 3: Detailed View of Link 2 Subsystem. </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 4: Detailed View of Link 3 Subsystem. </div> </swiper-slide> </swiper-container> </div> <h5 id="2-pid-controller">2) PID Controller</h5> <p>Figure 5 shows a PID controller subsystem. It begins by comparing a desired target (q_d) with an actual value (q) to determine the error, or the difference between what is desired and what exists. This error is then processed through three types of control: Proportional (Kp), which reacts to the current error; Integral (Ki), which addresses the accumulation of past errors; and Derivative (Kd), which predicts future errors. The outputs from these controls are combined to produce a feedback signal that adjusts the system to minimize the error, helping maintain the desired output.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 5. Detailed View of PID Controller Subsystem. </div> <h3 id="c-simulation">C. Simulation</h3> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the system with fixed base. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h5 id="1-tracking">1) Tracking</h5> <p>Videos 1 through 4 demonstrate the behavior of the system from various initial states. Figures 6 through 9 present an analysis of angular displacement for different initial conditions. These results show the robust tracking capabilities of the control system, which efficiently elevates the multi-link mechanism to a vertical position from any initial state.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/01_fixed_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/02_fixed_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/03_fixed_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/04_fixed_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 1 - 4. Demonstrating the Tracking Capabilities of the Controller Across Various Initial States in the Triple-Link Mechanism with Fixed Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 6 - 9. Analysis of Angular Displacement in the Triple-Link Mechanism with Fixed Base Across Various Initial States. </div> <h5 id="2-regulation">2) Regulation</h5> <p>Videos 5 through 9 demonstrate the robust regulating capabilities of the control system, which efficiently rejects disturbances and maintains the reference position. Meanwhile, Figures 6 through 9 analyze the angular displacement under various disturbances. Specifically, Videos 6 and 7, along with Figures 11 and 12, showcase a simulation of a triple-link mechanism subjected to a substantial disturbance, significant enough to potentially cause a single rotation. However, in these demonstrations, the multi-link mechanism rotates almost twice. Similarly, As demonstrated in Video 8 and Figure 13, the system exhibits prolonged regulation times when subjected to a strong disturbance. I suspect this excessive rotation is due to the control system not accounting for the angular velocity and angular acceleration of the multi-link mechanism. This oversight in the control strategy leads to an over-response to the disturbance. I am uncertain whether this issue can be addressed by tuning the PID controller or changing system parameters. Please leave a comment if you have any ideas.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/05_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/06_fixed_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/07_fixed_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/08_fixed_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 5 - 8. Demonstrating the Regulation Capabilities of the Controller Across Various Disturbances in the Triple-Link Mechanism with Fixed Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 10 - 13. Analysis of Angular Displacement in the Triple-Link Mechanism with Fixed Base Across Various Disturbances. </div> <h1 id="ii-a-multi-link-mechanism-with-a-moving-base">II. A Multi-Link Mechanism with a Moving Base</h1> <h3 id="a-overall-system-1">A. Overall System</h3> <p>The overall system configuration of the triple-link mechanism with a moving base is similar to that of the fixed base, with the addition of a moving frame. Also, I have increased the density of the base to make it heavier.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 14. Schematic of the Multi-Link Mechanism Control System with Moving Base </div> <h3 id="b-simulation">B. Simulation</h3> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the system with moving base. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h5 id="1-tracking-1">1) Tracking</h5> <p>Videos 9 through 12 showcase the robust tracking capabilities of the control system, which efficiently brings the multi-link mechanism to a vertical position from any starting point. Meanwhile, Figures 15 through 18 provide an analysis of angular displacement across various initial states. Interestingly, the trajectory of the system with a moving base appears more sensible than that of the system with a fixed base, likely due to the addition of an extra degree of freedom.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/09_moving_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/10_moving_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/11_moving_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/12_moving_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 9 - 12. Demonstrating the Tracking Capabilities of the Controller Across Various Initial States in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 15 - 18. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Initial States. </div> <h5 id="2-regulation-1">2) Regulation</h5> <p>Videos 13 through 16 illustrate the regulating capabilities of the control system, which effectively rejects disturbances and maintains the reference position in most scenarios. Meanwhile, Figures 19 through 22 provide an analysis of angular displacement under various disturbances.</p> <p>Specifically, Videos 13 to 15 demonstrate conditions with low base density under mild and strong disturbances, and very high base density under strong disturbance, respectively. Under these setups, the system regulates effectively, either by the base dispersing the energy or functioning as a fixed base. However, as shown in Video 16, under certain combinations of base density and disturbance intensity, the regulation is not successful, and the system becomes unstable. This instability is likely because, similar to the fixed base scenario, the PID controller primarily considers angular displacement, which may not suffice under more challenging conditions.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/13_moving_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/14_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/15_moving_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/16_moving_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 13 - 16. Demonstrating the Regulation Capabilities of the Controller Across Various Disturbances in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 19 - 22. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Disturbances. </div> <h1 id="iii-conclusion-and-moving-forward">III. Conclusion and Moving Forward</h1> <p>Today, I dealt with a fully actuated multi-link mechanism using a PID controller. This control system offers the benefit of a relatively simple design, as it does not require consideration of the complete dynamic equations of the triple-link mechanism. However, this simplicity sometimes leads to drawbacks, such as overreaction or subsequent destabilization of the system. In my next post, I will explore alternative control systems that can address these issues. Stay tuned for more updates as I delve deeper into the intriguing world of multi-link mechanisms and confront the challenges of controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Simulink"/><category term="PID"/><summary type="html"><![CDATA[A fully actuated system is one in which the number of independent actuators matches the number of degrees of freedom, allowing for direct control over each motion dimension. This setup is typical in industrial robots and other motor-driven mechanisms, where each joint or axis is controlled by its own motor, facilitating precise manipulation.]]></summary></entry><entry><title type="html">[Controller Design] Day 1: Creating the Multibody System Using Simscape</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-1/" rel="alternate" type="text/html" title="[Controller Design] Day 1: Creating the Multibody System Using Simscape"/><published>2024-05-15T00:00:00+00:00</published><updated>2024-05-15T00:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-1</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-1/"><![CDATA[<p>Today marked the exciting beginning of my project on simulating multi-link mechanism control, a pivotal concept in dynamic systems and control theory. My objective for Day 1 was to construct the foundational multibody system using Simscape, which involved creating multi-link mechanism with varying numbers of links. The challenge here is not just about assembling a physical model, but also simulating how these systems behave under different conditions—a crucial aspect for anyone venturing into the world of advanced robotics and control systems.</p> <h1 id="i-a-multi-link-mechanism-with-a-fixed-base">I. A Multi-Link Mechanism with a Fixed Base</h1> <h3 id="a-overall-system">A. Overall System</h3> <p>The process began with setting up the basic structure of the multi-link mechanism with a fixed base. I designed a schematic that includes components like the links and the fixed base that manage the multi-link mechanism’s movement (See Figure 1). This visual setup helps in understanding how each part interacts within the system and serves as a good starting point for simulation.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 1. Schematic of the Multi-Link Mechanism with Fixed Base. </div> <h3 id="b-subsystem---link">B. Subsystem - Link</h3> <p>Next, I focused on the Links, zooming into the subsystem that plays a critical role in the multi-link mechanism’s dynamics. The revolute joint determine how the multi-link mechanism reacts to forces and movements applied to it, which is essential for analyzing stability and control (See Figure 2). Understanding each component is vital for refining the simulation and ensuring accurate results.</p> <p>In Figure 2, the subsystem of link 1 is depicted with several blocks.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 2. Detailed View of Link 1 Subsystem. </div> <p>Each block is enclosed in a color-coded box to indicate its specific function:</p> <ul> <li> <p><strong>Red Boxes</strong>: Blocks within the red boxes are crucial for adjusting the joint’s frame so that the joint’s rotational axis (default z-axis) aligns with the world frame’s y-axis.</p> </li> <li> <p><strong>Blue Boxes</strong>: Blocks within the blue boxes are used for linking the joints and the links together.</p> </li> <li> <p><strong>Green Box</strong>: The block in the green box is positioned at the end of the link. This setup is typically used for attaching additional components or for applying external forces to the system.</p> </li> </ul> <p>Similarly, Figure 3 illustrates the subsystem comprising links 2 and 3, depicted with several blocks. A rotational block is not required as the joint’s rotational axis is already aligned with the world frame’s y-axis.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 3. Detailed View of Link 2 and Link 3 Subsystem. </div> <p>By meticulously arranging these blocks and understanding their specific roles, I can create a versatile simulation environment that accurately mimics real-world physical conditions. This level of detail is imperative for developing effective control strategies and for the thorough analysis of the dynamics of multi-link mechanism.</p> <h3 id="c-parameter-customization">C. Parameter Customization</h3> <p>I utilized the mask editor in Simscape to enhance subsystem customization. This tool allowed me to encapsulate subsystems, thereby facilitating easy adjustments of parameters such as mass, length, and friction through a user-friendly interface. By clicking the “Edit” button, which is highlighted in a red box in Figure 4, I was able to add new parameters to the subsystems.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 4. Mask Editor Interface in Simscape. </div> <p>Figure 5 displays the interface after these additions. This makes much easier to modify the parameters without altering the core model structure.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Parameter Interface in Simscape After Masking. </div> <h3 id="d-simulation-results">D. Simulation Results</h3> <p>To solve the differential equation, I utilized the <strong>daessc</strong> solver, which is specifically designed for Simscape DAEs (Differential-Algebraic Equations), with variable step size.</p> <p>Video 1 illustrates a non-chaotic motion resulting from a specific initial angle and link’s length. This setup reveals predictable and stable behavior, demonstrating how controlled conditions can ensure system stability.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/01_fixed_non_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Demonstration of Non-Chaotic Motion in the Multi-Link Mechanism with Fixed Base Simulation. </div> <p>Figure 6 provides a detailed analysis of the angular displacement for each joint of the triple multi-link mechanism with a fixed base under non-chaotic conditions. This illustrates how each joint behaves in terms of movement and speed when the system is stable and predictable.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 6. Angular Displacement Analysis of Non-Chaotic Motion in the Multi-Link Mechanism with Fixed Base. </div> <p>Conversely, Video 2 captures the onset of chaotic behavior under a slightly altered set of conditions. A small change in the initial angle leads to unpredictable and complex dynamics. This showcases the system’s sensitive dependence on initial conditions—a defining characteristic of chaotic systems.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/02_fixed_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2. Demonstration of Chaotic Motion in the Multi-Link Mechanism with Fixed Base Simulation. </div> <p>Figure 7 showcases the same parameter under chaotic conditions, highlighting the significant differences when small changes in initial conditions lead to complex and unpredictable dynamics. Comparing these images helps underline the critical impact of initial setup variations on the system’s behavior, offering valuable insights for designing mechanisms to control or utilize chaotic responses effectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 7. Angular Displacement Analysis of Chaotic Motion in the Multi-Link Mechanism with Fixed Base. </div> <p><br/></p> <h1 id="ii-a-multi-link-mechanism-with-a-moving-base">II. A Multi-Link Mechanism with a Moving Base</h1> <h3 id="a-overall-system-1">A. Overall System</h3> <p>For the multi-link mechanism with a moving frame, I kept the links unchanged but made the base movable and added visualization along the x-axis.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 8. Schematic of the Multi-Link Mechanism with Moving Base. </div> <h3 id="b-subsystem---moving-base">B. Subsystem - Moving Base</h3> <p>Figure 9 shows the moving base subsystem. Similar to the revolute joint, the translational axis of prismatic joints is the z-axis. Therefore, I need to rotate the joint’s frame to align the joint’s z-axis with the world frame’s x-axis.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 9. Detailed View of the Base Subsystem. </div> <h3 id="c-simulation-results">C. Simulation Results</h3> <p>Video 3 depicts a non-chaotic motion resulting from a specific initial angle and link’s length, showing predictable behavior similar to systems with a fixed base, thus illustrating how controlled conditions can enhance system stability. Figure 10 captures the parameters of the base and each joint, providing a detailed view of the setup components.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/03_moving_non_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 3. Demonstration of Non-Chaotic Motion in the Multi-Link Mechanism Simulation with Moving Base. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 10. Angular Displacement Analysis of Non-Chaotic Motion in the Multi-Link Mechanism with Moving Base. </div> <p>Conversely, Video 4 and Figure 11, akin to Video 2 and Figure 7, display the chaotic motion of a system with a moving base, along with the parameters of the base and each joint. The displacement of the base has been scaled up by a factor of 10 to enhance its visualization.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/04_moving_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 4: Demonstration of Chaotic Motion in the Multi-Link Mechanism Simulation with Moving Base. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 11. Angular Displacement Analysis of Chaotic Motion in the Multi-Link Mechanism with Moving Base. </div> <h1 id="iii-conclusion">III. Conclusion</h1> <p>I chose different lengths for the multi-link mechanism primarily due to controllability concerns. Varying the lengths has helped in understanding how each variation impacts the system’s ability to be controlled, thus informing the development of more effective control strategies.</p> <p>In the later post, I plan to delve deeper into the relationship between the length of each link and its <a href="https://en.wikipedia.org/wiki/Controllability">controllability</a>. This analysis is crucial as it will inform the implementation of a controllers for the multi-link mechanism. Understanding these relationships is key to developing effective control strategies that can manage the complexity and inherent challenges of chaotic systems.</p> <p>It’s a blend of theory and practical application, and I’m eager to see where this journey takes me in the realm of control engineering. Stay tuned for more updates as I explore the fascinating world of multi-link mechanism and tackle the challenges of controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><category term="Simulink"/><category term="Simscape"/><summary type="html"><![CDATA[Today marked the exciting beginning of my project on simulating multi-link mechanism control, a pivotal concept in dynamic systems and control theory. My objective for Day 1 was to construct the foundational multibody system using Simscape, which involved creating multi-link mechanism with varying numbers of links. The challenge here is not just about assembling a physical model, but also simulating how these systems behave under different conditions—a crucial aspect for anyone venturing into the world of advanced robotics and control systems.]]></summary></entry><entry><title type="html">[Controller Design] Day 0: Kicking Off the Controller Design Project</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-0/" rel="alternate" type="text/html" title="[Controller Design] Day 0: Kicking Off the Controller Design Project"/><published>2024-05-14T15:31:00+00:00</published><updated>2024-05-14T15:31:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-0</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-0/"><![CDATA[<p><strong>This project was inspired by the following video:</strong></p> <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; margin-bottom: 3rem;"> <iframe src="https://www.youtube.com/embed/I5GvwWKkBmg" frameborder="0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> </div> <h2 id="journey-through-the-dynamics-of-multi-link-mechanisms-a-project-exploration">Journey Through the Dynamics of multi-link mechanisms: A Project Exploration</h2> <p>The inaugural step of this journey begins with constructing the multibody system for the multi-link mechanism. This stage is crucial as it sets the groundwork for all subsequent experiments. I am designing multi-link mechanisms with varying numbers of links, each introducing unique challenges and dynamics. By setting up the initial simulation environment and examining how the system behaves under different initial conditions, I aim to gather a robust understanding of the fundamental dynamics that govern these intriguing mechanical structures.</p> <h4 id="phase-1-building-the-foundation">Phase 1: Building the Foundation</h4> <p>The first phase involves building a multibody system for the multi-link mechanism. This foundational step includes designing multi-link mechanisms with different numbers of links and setting up the initial simulation environment. By understanding the basic dynamics and how the system responds under various initial conditions, I can prepare for more complex control implementations.</p> <h4 id="phase-2-achieving-stability-with-pid-and-lqr-control">Phase 2: Achieving Stability with PID and LQR Control</h4> <p>Once the basic system is operational, I focus on stabilizing a multi-link mechanism. Initially, a PID controller is applied to the joints to achieve stable, controlled motion. Tuning the PID parameters is crucial for maintaining the mechanism’s upright position despite disturbances. I also integrate a Linear Quadratic Regulator (LQR) to complement the PID controller. LQR optimally minimizes a cost function that balances state deviation and control effort, enhancing stability and robustness under linear conditions. The combination of PID and LQR establishes a robust control foundation, efficiently managing disturbances and laying the groundwork for more dynamic challenges in subsequent phases.</p> <h4 id="phase-3-calculating-the-equations-of-motion-for-non-linear-controller-design">Phase 3: Calculating the Equations of Motion for Non-linear Controller Design</h4> <p>Building on the foundational understanding and adaptations to a dynamic base, this phase focuses on calculating the equations of motion for the multi-link mechanism. I will use Lagrangian mechanics to derive precise mathematical models that describe the system’s dynamics, essential for predicting its behavior under various conditions. These equations will directly inform the design of advanced nonlinear controllers, enabling optimized control strategies and improved system performance in subsequent phases.</p> <h4 id="phase-4-advanced-nonlinear-control-strategies">Phase 4: Advanced Nonlinear Control Strategies</h4> <p>In the final phases of my project, I integrate several advanced nonlinear control strategies to handle my moving base multi-link mechanism, particularly focusing on robust and intelligent methodologies.</p> <ul> <li><strong>PID with Gravity Compensation:</strong> Enhances basic PID control by incorporating compensation for gravitational forces acting on the system, crucial for maintaining stability and control in vertically oriented mechanisms.</li> <li><strong>PID with Computed Torque Method:</strong> Combines conventional PID control with a model-based torque computation that accounts for the dynamics of the system, significantly improving precision and response to disturbances.</li> <li><strong>Bang-Bang Controller:</strong> Offers a simple yet effective control strategy for rapid switching between maximum states, useful for systems requiring stark transitions.</li> <li><strong>Fuzzy Logic Controller:</strong> Introduces an ability to handle uncertainties and imprecise inputs, making decisions based on ‘degrees of truth’ rather than binary logic, ideal for complex, nonlinear system behaviors.</li> <li><strong>Gain Scheduling Controller:</strong> Adjusts controller gains based on real-time changes in system parameters or operating conditions, enhancing control flexibility and responsiveness.</li> <li><strong>Self-Tuning Controller:</strong> Adapts its parameters in real-time based on system feedback, ensuring optimal performance under varying conditions.</li> <li><strong>Model-Reference Adaptive Control (MRAC):</strong> Aims to modify the system dynamics to follow a desired reference model, useful for ensuring stability in dynamically changing environments.</li> <li><strong>Model Predictive Control (MPC):</strong> Utilizes a model of the system to predict future states and optimize control actions over a set horizon, providing a strategic depth to immediate and future control needs.</li> <li><strong>Sliding Mode Control (SMC):</strong> Features a discontinuous control law ensuring robustness against model uncertainties and external disturbances, ideal for systems where precise control is crucial despite parameter variations.</li> <li><strong>Backstepping Controller:</strong> Utilizes a recursive design approach that builds a Lyapunov function step-by-step, making it suitable for systems with strict stability requirements.</li> <li><strong>Neural Network Controller:</strong> Employs artificial neural networks to model complex nonlinearities and dynamic behaviors, enabling adaptive control strategies tailored to specific operational profiles.</li> </ul> <p>These control strategies collectively aim to address the multi-faceted challenges presented by the multi-link mechanism, ensuring robustness, adaptability, and high performance in real-world operational scenarios.</p> <p><br/> <br/></p> <p>Each phase of this project is designed to not only build on the previous experiences but also to introduce and overcome new complexities. This systematic escalation ensures a thorough exploration and understanding of each control strategy implemented.</p> <p>I invite you to stay tuned as I document this exciting journey, sharing detailed insights and results from each phase of my exploration into the dynamic realm of multi-link mechanisms. This blog will serve as a chronicle of my learning, challenges, breakthroughs, and, ultimately, the evolution of my understanding of control dynamics. Join me on this adventure as I push the limits of technology and engineering!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Controller_Design"/><summary type="html"><![CDATA[This project was inspired by the following video:]]></summary></entry></feed>