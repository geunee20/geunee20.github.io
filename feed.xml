<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://gunee20.github.io/feed.xml" rel="self" type="application/atom+xml"/><link href="https://gunee20.github.io/" rel="alternate" type="text/html" hreflang="en"/><updated>2024-07-23T02:40:42+00:00</updated><id>https://gunee20.github.io/feed.xml</id><title type="html">Min-Geun Park</title><subtitle>A Mechanical Engineer with a keen interest in controller design. </subtitle><entry><title type="html">[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-6/" rel="alternate" type="text/html" title="[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang"/><published>2024-06-20T04:00:00+00:00</published><updated>2024-06-20T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-6</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-6/"><![CDATA[<p>Before diving into the technicalities, I must address a fundamental challenge encountered while implementing nonlinear controllers for multi-link mechanisms: the inherent high nonlinearity of these systems. This complexity can significantly complicate the design and effectiveness of controllers, posing a substantial barrier to achieving desired performance and stability.</p> <p>Given these challenges, and with the goal of this post to introduce and explore various controller designs, I have decided to simplify the scenario slightly by reducing the number of links in my mechanisms. This approach will help in isolating and understanding the specific impacts and benefits of each control strategy without the overwhelming interactions of a highly complex system.</p> <h1 id="i-introduction">I. Introduction</h1> <p>State Feedback Control is a fundamental technique in modern control theory that forms the basis for many advanced control strategies, including the Linear Quadratic Regulator (LQR). This approach allows us to precisely manipulate the behavior of a system by feeding back information about its current state. In this post, I’ll explore the principles, mathematics, and applications of State Feedback Control.</p> <h2 id="a-state-feedback-control">A. State Feedback Control</h2> <h3 id="1-principles-of-state-feedback-control">1. Principles of State Feedback Control</h3> <h5 id="a-system-model">a) System Model</h5> <p>State Feedback Control is designed for systems that can be described by a state-space model:</p> \[\dot{x} = Ax + Bu \tag{1}\] \[y = Cx + Du \tag{2}\] <p>Where:</p> <ul> <li>\(x\) is the state vector</li> <li>\(u\) is the control input vector</li> <li>\(y\) is the output vector</li> <li>\(A\), \(B\), \(C\), and \(D\) are matrices defining the system dynamics</li> </ul> <h5 id="b-control-law">b) Control Law</h5> <p>The core idea of State Feedback Control is to make the control input a linear function of the state:</p> \[u = -Kx \tag{3}\] <p>Here, \(K\) is the feedback gain matrix that I design to achieve desired system behavior.</p> <p><a id="Pendulum_Linearization"></a></p> <h3 id="2-equation-of-motion">2. Equation of Motion</h3> <p>To understand state feedback control in practice, let’s consider the example of a pendulum mounted on a cart. The following diagram illustrates the free body diagram of this system:</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Free Body Diagram of a Pendulum on Cart. </div> <p>The equation of motion for this system is:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \cos(\theta_1) \\ -\frac{1}{2}m_1 l_1 \cos(\theta_1) &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} + \begin{bmatrix} \frac{1}{2}m_1 l_1 \sin(\theta_1) \dot{\theta}_1^2 \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ - \frac{1}{2}g m_1 l_1\sin(\theta_1) \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix} \tag{4}\] <p>Where:</p> <ul> <li>\(m_0\) and \(m_1\) are the masses of the cart and pendulum</li> <li>\(l_1\) is the length of the pendulum</li> <li>\(\theta_1\) is the angle of the pendulum</li> <li>\(F\) is the force applied to the cart</li> <li>\(g\) is the acceleration due to gravity</li> </ul> <p>You can find the detailed calculation in <a href="/blog/2024/Controller-Design-Day-3/">Day 3</a>.</p> <h3 id="3-linearization">3. Linearization</h3> <p>To implement state feedback control, I need a linear state-space representation of the system. I linearize the equation around \(\theta_1 \approx 0\) using these approximations:</p> \[\left\{ \begin{array}{l} \sin(\theta_1) \approx \theta_1 \\ \cos(\theta_1) \approx 1 \\ \dot{\theta}_1^2 \approx 0 \end{array} \right.\] <p>After linearization, the system equation becomes:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \\ -\frac{1}{2}m_1 l_1 &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} - \begin{bmatrix} 0 \\ \frac{1}{2}g m_1 l_1\theta_1 \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix} \tag{5}\] <h3 id="4-state-space-representation">4. State Space Representation</h3> <p>To convert the linearized equations into a state space representation, I isolate the accelerations \(\ddot{x}\) and \(\ddot{\theta_1}\):</p> \[\begin{align*} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} &amp;= \begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \\ -\frac{1}{2}m_1 l_1 &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix}^{-1} \left( \begin{bmatrix} F \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ \frac{1}{2}g m_1 l_1 \theta_1 \end{bmatrix} \right) \\ &amp;= \begin{bmatrix} 0 &amp; \frac{3gm_1}{4m_0+m_1} \\ 0 &amp; \frac{6g(m_0+m_1)}{l_1(4m_0+m_1)} \end{bmatrix} \begin{bmatrix} x \\ \theta_1 \end{bmatrix} + \begin{bmatrix} \frac{4}{4m_0+m_1} \\ \frac{6}{l_1(4m_0+m_1)} \end{bmatrix}F\tag{6} \end{align*}\] <p>I then express the system in state space form by setting \(x_1 = x, x_2 = \theta_1, x_3 = \dot{x}\), and \(x_4 = \dot{\theta_1}\):</p> \[\dot{x} = \begin{bmatrix} \dot{x}_1 \\ \dot{x}_2 \\ \dot{x}_3 \\ \dot{x}_4 \end{bmatrix} = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; \frac{3gm_1}{4m_0+m_1} &amp; 0 &amp; 0 \\ 0 &amp; \frac{6g(m_0+m_1)}{l_1(4m_0+m_1)} &amp; 0 &amp; 0 \end{bmatrix} \begin{bmatrix} x_1 \\ x_2 \\ x_3 \\ x_4 \end{bmatrix} + \begin{bmatrix} 0 \\ 0 \\ \frac{4}{4m_0+m_1} \\ \frac{6}{l_1(4m_0+m_1)} \end{bmatrix}F \tag{7}\] <p>For my specific system with \(m_0 = 0.0027\), \(m_1 = 0.0378\), and \(l_1 = 0.14\), I get:</p> \[\dot{x} = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 22.89 &amp; 0 &amp; 0 \\ 0 &amp; 350.36 &amp; 0 &amp; 0 \end{bmatrix} \begin{bmatrix} x_1 \\ x_2 \\ x_3 \\ x_4 \end{bmatrix} + \begin{bmatrix} 0 \\ 0 \\ 82.30 \\ 881.83 \end{bmatrix}F\] <p>The output matrix \(y\) is defined as:</p> \[y = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \end{bmatrix}\] <p>Thus, my state space matrices \(A\), \(B\), \(C\), and \(D\) are:</p> \[A = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 22.89 &amp; 0 &amp; 0 \\ 0 &amp; 350.36 &amp; 0 &amp; 0 \end{bmatrix}, B = \begin{bmatrix} 0 \\ 0 \\ 82.30 \\ 881.83 \end{bmatrix}, C = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \end{bmatrix}, D = 0\] <h3 id="5-designing-the-feedback-gain-matrix">5. Designing the Feedback Gain Matrix</h3> <p>When designing the feedback gain matrix \(K\) for state feedback control using the pole placement method, two key aspects need to be considered:</p> <ol> <li>The pole placement method itself, which allows us to achieve desired closed-loop dynamics.</li> <li>The controllability of the system, which is a prerequisite for successful pole placement.</li> </ol> <p>Let’s explore each of these in detail:</p> <h5 id="a-pole-placement-method">a) Pole Placement Method</h5> <p>The pole placement method is a powerful technique for designing the feedback gain matrix \(K\) in state feedback control. This method allows us to directly specify the desired eigenvalues of the closed-loop system, which in turn determines its dynamic response characteristics.</p> <p>Here’s how it works:</p> <ol> <li> <p><strong>Closed-loop System</strong>: When I apply the state feedback control law \(u = -Kx\) to my system \(\dot{x} = Ax + Bu\), I get the closed-loop system:</p> \[\dot{x} = (A - BK)x \tag{8}\] </li> <li> <p><strong>Eigenvalues</strong>: The eigenvalues of \((A - BK)\) determine the system’s stability and transient response. These are the roots of the characteristic equation:</p> \[det(sI - (A - BK)) = 0 \tag{9}\] </li> <li> <p><strong>Desired Poles</strong>: I choose a set of desired eigenvalues \(\{\lambda_1, \lambda_2, ..., \lambda_n\}\) based on my performance requirements (stability, settling time, overshoot, etc.).</p> </li> <li> <p><strong>Characteristic Polynomial</strong>: I form the desired characteristic polynomial:</p> \[\alpha(s) = (s - \lambda_1)(s - \lambda_2)...(s - \lambda_n) \tag{10}\] </li> <li> <p><strong>Solving for K</strong>: I then solve for \(K\) by equating the coefficients of \(\alpha(s)\) with those of \(det(sI - (A - BK))\).</p> </li> </ol> <p>For example, in a second-order system, if I want the closed-loop poles at \(s = -2 \pm j2\), my desired characteristic polynomial would be:</p> \[\alpha(s) = s^2 + 4s + 8 \tag{11}\] <p>I would then solve for \(K\) to make \(det(sI - (A - BK))\) equal to this polynomial.</p> <p>The pole placement method gives us direct control over the system’s eigenvalues, allowing us to shape its response precisely. However, it requires that the system be completely state controllable.</p> <h5 id="b-controllability">b) Controllability</h5> <p>Controllability is a fundamental concept in control theory. A system is said to be controllable if it’s possible to transfer the system from any initial state to any desired final state within a finite time interval using the available control inputs.</p> <p>For a linear time-invariant system described by the state-space equations:</p> \[\dot{x} = Ax + Bu\] <p>The system is controllable if and only if the controllability matrix:</p> \[C = [B \quad AB \quad A^2B \quad ... \quad A^{n-1}B]\] <p>has full rank, where n is the number of states.</p> <h5 id="c-checking-controllability-in-matlab">c) Checking Controllability in MATLAB</h5> <p>MATLAB provides simple functions to check the controllability of a system. Here’s how you can do it:</p> <ol> <li> <p>First, create the state-space model:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sys</span> <span class="o">=</span> <span class="n">ss</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <p>Use the <code class="language-plaintext highlighter-rouge">ctrb</code> function to compute the controllability matrix:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Co</span> <span class="o">=</span> <span class="n">ctrb</span><span class="p">(</span><span class="n">sys</span><span class="p">);</span> <span class="p">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">defined</span> <span class="n">a</span> <span class="nb">system</span>

<span class="n">Co</span> <span class="o">=</span> <span class="n">ctrb</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span> <span class="p">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">have</span> <span class="n">the</span> <span class="n">matrix</span> <span class="n">A</span> <span class="nb">and</span> <span class="n">B</span>
</code></pre></div> </div> </li> <li> <p>Check the rank of the controllability matrix:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rank_Co</span> <span class="o">=</span> <span class="nb">rank</span><span class="p">(</span><span class="n">Co</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <p>Compare the rank with the number of states.</p> </li> </ol> <h3 id="6-effects-of-state-feedback">6. Effects of State Feedback</h3> <ol> <li><strong>Stability</strong>: Proper choice of \(K\) can stabilize an unstable system.</li> <li><strong>Transient Response</strong>: I can shape the system’s response speed and overshoot.</li> <li><strong>Steady-State Error</strong>: While basic state feedback doesn’t guarantee zero steady-state error, it can be combined with integral action to achieve this.</li> </ol> <h3 id="7-implementing-pole-placement-in-matlab">7. Implementing Pole Placement in MATLAB</h3> <p>MATLAB provides a straightforward way to implement the pole placement method using the <code class="language-plaintext highlighter-rouge">place</code> function. This function calculates the state-feedback gain matrix \(K\) for desired closed-loop pole locations.</p> <h5 id="a-using-the-place-function">a) Using the <code class="language-plaintext highlighter-rouge">place</code> Function</h5> <p>The basic syntax of the <code class="language-plaintext highlighter-rouge">place</code> function is:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">K</span> <span class="o">=</span> <span class="n">place</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
</code></pre></div></div> <p>Where:</p> <ul> <li>\(A\) and \(B\) are the system matrices from the state-space model</li> <li>\(P\) is a vector containing the desired closed-loop pole locations</li> <li>\(K\) is the resulting state-feedback gain matrix</li> </ul> <h2 id="b-bang-bang-control-for-swing-up-motion">B. Bang-Bang Control for Swing-Up Motion</h2> <p>While state feedback control is effective for balancing the inverted pendulum near its upright position, it may not have enough control authority to bring the pendulum up from its downward position. This is where Bang-Bang control comes into play for the swing-up motion.</p> <h3 id="1-principle-of-bang-bang-control">1. Principle of Bang-Bang Control</h3> <p>Bang-Bang control, also known as on-off control, is a feedback control strategy that switches abruptly between two states. In the context of an inverted pendulum, it involves applying maximum positive or negative force to the cart to swing the pendulum up.</p> <p>The control law for Bang-Bang control can be expressed as:</p> \[u = \begin{cases} u_{max}, &amp; \text{if } s(x) &gt; 0 \\ -u_{max}, &amp; \text{if } s(x) &lt; 0 \end{cases}\] <p>where \(u\) is the control input (force applied to the cart), \(u_{max}\) is the maximum allowable control input, and \(s(x)\) is a switching function that depends on the system state.</p> <p>For the inverted pendulum system, I can use a simple switching function based on the pendulum’s angular velocity:</p> \[s(x) = \dot{\theta}\] <p>This leads to the control law:</p> \[u = -u_{max} \cdot \text{sign}(\dot{\theta})\] <p>This control strategy ensures that the input force is always in the opposite direction of the pendulum’s angular velocity. Specifically:</p> <ul> <li>When the pendulum is moving clockwise (\(\dot{\theta} &gt; 0\)), a negative force is applied to the cart.</li> <li>When the pendulum is moving counterclockwise (\(\dot{\theta} &lt; 0\)), a positive force is applied to the cart.</li> </ul> <p>This strategy effectively opposes the pendulum’s motion, adding energy to the system and causing the pendulum to swing with increasing amplitude until it approaches the upright position.</p> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system">1. Overall System</h3> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 2. Block Diagram of the Control Loop for an Inverted Pendulum System </div> <p>This closed-loop block diagram illustrates the interaction between my controller and the inverted pendulum (my plant). The controller processes the system state and generates a control signal, which in turn affects the pendulum’s behavior.</p> <h3 id="2-input--output-block">2. Input &amp; Output Block</h3> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Block Diagram of the Input and Output Blocks. </div> <p>My system state is characterized by four variables:</p> <ul> <li>\(x_1 = x\): The cart’s position</li> <li>\(x_2 = \theta\): The pendulum’s angle</li> <li>\(x_3 = \dot{x}\): The cart’s velocity</li> <li>\(x_4 = \dot{\theta}\): The pendulum’s angular velocity</li> </ul> <p>These states are consolidated into a single vector in the input block and disaggregated in the output block, facilitating efficient manipulation within my control loop.</p> <h3 id="3-plant-block">3. Plant Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 4. Block Diagram Illustrating the Plant Dynamics of the Inverted Pendulum System. </div> <p>This block encapsulates the dynamics of my inverted pendulum system. It comprises a moving base (the cart) and the pendulum (link 1). The input \(u\) is applied exclusively to the moving base, which subsequently influences the pendulum’s motion.</p> <h3 id="4-controller-block">4. Controller Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Block Diagram Illustrating the Controller Components. </div> <p>The controller is the core of my system, responsible for maintaining the pendulum’s upright position and stability. Let’s break down its key components:</p> <ul> <li><strong>Red box (Switch)</strong>: This block determines which feedback value will be chosen based on the angular displacement of link 1. Stabilization feedback is applied when the angular displacement is between \(-30^{\circ} &lt; \theta &lt; 30^{\circ}\). Otherwise, Swing-Up control feedback is applied.</li> <li><strong>Blue box (Saturation)</strong>: This block limits the feedback’s magnitude.</li> </ul> <p>The controller switches to stabilization control when the pendulum angle is between -30° and 30° from vertical. The maximum control force is limited to 0.45 N.</p> <h3 id="5-bang-bang-block">5. Bang-Bang Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 6. Block Diagram Illustrating the Bang-Bang Control Block for Swing-Up Control. </div> <p>For swing-up control, I employ a bang-bang control strategy. This simple yet effective approach is used to bring the pendulum from its downward position to near the upright position, where the state feedback controller can then take over for stabilization.</p> <p>The bang-bang control block determines the control input based on the pendulum’s angular velocity. It applies the maximum force in either the positive or negative direction, depending on the sign of the angular velocity. This creates a pumping effect that increases the pendulum’s energy, causing it to swing up.</p> <h1 id="iii-simulation">III. Simulation</h1> <p>For my simulation, I aimed to create a critically damped system where all poles are positioned on the real axis of the s-plane. However, due to limitations of MATLAB’s <code class="language-plaintext highlighter-rouge">place</code> function, I had to choose poles with multiplicity smaller than rank(B). Since the rank of B is 1, I selected poles with a 0.002 gap, such as -0.000, -0.002, -0.004, -0.006. This approach allowed me to create a system very close to critically damped while satisfying the constraints of the <code class="language-plaintext highlighter-rouge">place</code> function.</p> <h3 id="1-tracking">1. Tracking</h3> <h5 id="a-initial-state-x--0-theta--5circ">a) Initial State: \(x = 0, \theta = 5^{\circ}\)</h5> <p>I first tested with a small initial angle of \(5^{\circ}\) in the initial state. For this small region, linearization was effective and the linear controller could manage the system well. As the poles move farther from the origin, the response becomes faster. The results are shown in Videos 1 - 4 and Figures 7 - 8.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/01_tracking_01.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/02_tracking_02.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/03_tracking_03.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/04_tracking_04.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 1 - 4. State Feedback Controller with \( 5^{\circ} \) Initial Angle. \( s = [-1, -5, -10, -15] \) from left top to right bottom. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 7 - 8. Graphs of States with Initial State of \( \theta = 5^{\circ} \) and different pole positions. </div> <h5 id="b-initial-state-x--0-theta--30circ">b) Initial State: \(x = 0, \theta = 30^{\circ}\)</h5> <p>Next, I increased the initial angle to \(\theta = 30^{\circ}\). Compared to the \(5^{\circ}\) initial angle, two different behaviors were observed:</p> <ol> <li>The controller with the smallest pole magnitude (s = -1) couldn’t generate feedback large enough to raise the pendulum, resulting in failure to stabilize.</li> <li>The controller with the largest pole magnitude (s = -15) initially lost some control, showing worse performance compared to the controller with poles at s = -10.</li> </ol> <p>The results are shown in Video 5 and Figures 9 - 10.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/05_tracking_05.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 5. State Feedback Controller with \( 30^{\circ} \) Initial Angle. \( s = [-1, -5, -10, -15] \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 9 - 10. Graphs of States with Initial State of \( \theta = 30^{\circ} \) and different pole positions. </div> <p>Through iterative optimization, I found that the controller showed the best performance for \(\theta = 30^{\circ}\) when the poles are at \(s = -12\). The comparisons are shown in Figures 11 and 12.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 11 - 12. Pole Placement Optimization at Initial State of \( \theta = 30^{\circ} \). </div> <h5 id="c-initial-state-x--0-theta--90circ">c) Initial State: \(x = 0, \theta = 90^{\circ}\)</h5> <p>I increased the initial angle further to \(90^{\circ}\), allowing the swing-up controller to come into play. I tested poles at \(s = [-10, -12, -15, -18]\). Contrary to expectations, the controller with \(s = -15\) showed the best performance. This highlights a limitation of the pole placement method: the optimal controller varies depending on initial states. The results are shown in Video 6 and Figures 13 and 14.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/06_tracking_06.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 6. State Feedback Controller with \( 90^{\circ} \) Initial Angle. \( s = [-10, -12, -15, -18] \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 13 - 14. Pole Placement Optimization at Initial State of \( \theta = 90^{\circ} \). </div> <h5 id="d-initial-state-x--0-theta--150circ">d) Initial State: \(x = 0, \theta = 150^{\circ}\)</h5> <p>Issues arose when the initial angle reached \(150^{\circ}\). The system was stable only for a small range of pole positions from \(s = -3\) to \(s = -10\). The results are shown in Video 7.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/07_tracking_07.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 7. State Feedback Controller with \( 150^{\circ} \) Initial Angle. \( s = [-3, -5, -10, -12] \). </div> <h5 id="e-initial-state-x--0-theta--180circ-f--01n">e) Initial State: \(x = 0, \theta = 180^{\circ}, F = 0.1N\)</h5> <p>A similar problem occurred when applying a small force (0.1N) to the stable position (\(\theta = 180^{\circ}\) ). The results are shown in Video 8.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/08_tracking_08.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 8. State Feedback Controller with \( 180^{\circ} \) Initial Position and 0.1N Force. \( s = [-3, -5, -10, -12] \). </div> <p>The issues observed in sections d) and e) may result from the transition between the Bang-Bang controller and the State Feedback Controller. If a pendulum is pushed by a user and loses its position, it could revolve very quickly. When the pendulum’s speed is high, the swing-up control law continues to accelerate the pendulum. As both acceleration and speed increase, the state feedback controller may fail to stabilize the system. This can cause the pendulum to rotate continuously, potentially leading to motor malfunction. Furthermore, finding the optimal controller parameters for these edge cases proves to be challenging.</p> <h3 id="2-regulation">2. Regulation</h3> <h5 id="a-disturbance-f--01n">a) Disturbance \(F = 0.1N\)</h5> <p>The regulation with small disturbance showed similar behavior to the tracking with small initial angle. The controller’s performance improves as the magnitude of poles increases. In this simulation, I used \(s = [-5, -10, -15, -20]\). The results are shown in Video 9 and Figures 15 and 16.</p> <div style="width: 100%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/09_regulation_01.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 9. Regulation performance with 0.1N disturbance for different pole positions: s = [-5, -10, -15, -20]. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 15 - 16. Cart position (x1) and pendulum angle (x2) responses to 0.1N disturbance for different pole positions. </div> <h5 id="b-disturbance-f--1n">b) Disturbance \(F = 1N\)</h5> <p>Lastly, I simulated with a disturbance of 1N and found that if the pendulum moves beyond its linearized region \([-30^{\circ} \leq \theta \leq 30^{\circ}]\), the system becomes unstable. The reason for this was similar to the issue observed in the tracking simulation with large initial angles. When the pendulum’s speed is high, the swing-up control law continues to accelerate the pendulum. As both acceleration and speed increase, the state feedback controller may fail to stabilize the system.</p> <p>For this simulation, I tested four cases, from small to large pole positions: \(s = [-1, -5, -10, -15]\). Similar to the large initial angle tracking, I found a sweet spot that can successfully regulate the system. Smaller pole magnitudes induced behavior similar to understeering, while bigger pole magnitudes led to oversteering. The results are shown in Video 10 and Figures 17 - 18.</p> <div style="width: 100%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/10_regulation_02.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 10. Regulation performance with 1N disturbance for different pole positions: s = [-1, -5, -10, -15]. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 17 - 18. Cart position (x1) and pendulum angle (x2) responses to 1N disturbance for different pole positions. </div> <h3 id="3-conclusion">3. Conclusion</h3> <p>Based on the simulations, I concluded that the best pole placement for this system is at \(s = -10\). The controller with this pole position demonstrated good tracking and regulation performance with short settling times. However, even this controller could not regulate the system when the disturbance exceeded 2N, as shown in Video 11 and Figure 19.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/11_conclusion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 11. System response to disturbances greater than 2N, demonstrating the limitations of the controller with s = -10. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 19. System response showing instability when subjected to disturbances greater than 2N with the controller at s = -10. </div> <h1 id="iv-moving-forward">IV. Moving Forward</h1> <p>Through my exploration of state feedback control for the inverted pendulum system, I’ve gained valuable insights into both the strengths and limitations of the pole placement method and Bang-Bang control. My simulations demonstrated the effectiveness of these approaches within certain bounds, but also revealed challenges when dealing with large disturbances or initial conditions.</p> <p>Based on these findings, my next steps will focus on implementing more advanced control strategies to address the limitations I’ve encountered:</p> <ol> <li> <p><strong>LQR Controller for Stabilization</strong>: I will implement a Linear Quadratic Regulator (LQR) controller, which can be seen as an upgraded version of the pole placement method. LQR offers several advantages:</p> <ul> <li>It provides a systematic way to find the optimal feedback gain matrix.</li> <li>It allows us to balance the trade-off between control effort and state regulation through the Q and R matrices.</li> <li>It often results in more robust control compared to simple pole placement.</li> </ul> <p>By implementing LQR, I aim to achieve better stabilization performance, especially for larger initial angles around the upright position.</p> </li> <li> <p><strong>Energy Shaping Control for Swing-Up</strong>: To improve upon the Bang-Bang control used for swing-up, I will implement Energy Shaping control. This method offers several benefits:</p> <ul> <li>It provides a smoother control action compared to Bang-Bang control.</li> <li>It explicitly considers the system’s energy, making it well-suited for the swing-up task.</li> <li>It can potentially provide a more reliable transition to the stabilization controller.</li> </ul> <p>With Energy Shaping control, I hope to achieve more consistent swing-up performance and a smoother handover to the stabilization controller.</p> </li> </ol> <p>These advancements should address several of the limitations I observed:</p> <ul> <li>The sensitivity to pole placement that I encountered should be mitigated by the LQR’s systematic approach to gain selection.</li> <li>The challenges in transitioning from swing-up to stabilization control should be reduced with the more sophisticated Energy Shaping method.</li> <li>The overall robustness of the system should improve, potentially allowing us to handle larger disturbances and a wider range of initial conditions.</li> </ul> <p>In my next update, I’ll dive into the theory behind LQR and Energy Shaping control, implement these methods for my inverted pendulum system, and compare their performance against my current pole placement and Bang-Bang control strategies. I’re excited to see how these advanced techniques will improve my inverted pendulum’s behavior across various scenarios!</p> <p>Stay tuned as I continue to push the boundaries of control for this fascinating nonlinear system! <br/> <br/> <br/></p> <h6 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h6> \[\]]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Simulink"/><category term="State_Feedback"/><category term="Bang-Bang"/><category term="Controller_Design"/><summary type="html"><![CDATA[Before diving into the technicalities, I must address a fundamental challenge encountered while implementing nonlinear controllers for multi-link mechanisms: the inherent high nonlinearity of these systems. This complexity can significantly complicate the design and effectiveness of controllers, posing a substantial barrier to achieving desired performance and stability.]]></summary></entry><entry><title type="html">[Controller Design] Day 5: PID Control with Computed Torque Method</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-5/" rel="alternate" type="text/html" title="[Controller Design] Day 5: PID Control with Computed Torque Method"/><published>2024-06-03T04:00:00+00:00</published><updated>2024-06-03T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-5</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-5/"><![CDATA[<h1 id="i-introduction">I. Introduction</h1> <p>On Day 4, I realized that while a PID controller with gravity compensation stabilizes the system faster, it often struggles with overreactions and potential destabilizations. This occurs because it focuses solely on angular positions, neglecting angular velocities.</p> <p>Building on the equations of motion derived on Day 3 for the triple-link mechanism:</p> \[\tau = M(q)\ddot{q} + h(q, \dot{q}) + g(q) \tag{1}\] <p>Where:</p> <ul> <li><strong>Matrix M (Inertial Term)</strong>: Reflects the Newtonian response to applied forces, considering the inertia of the masses.</li> <li><strong>Matrix h (Coriolis and Centrifugal Forces)</strong>: Accounts for forces due to system velocities and rotational dynamics.</li> <li><strong>Matrix g (Gravitational Term)</strong>: Represents the gravitational forces acting on each segment.</li> </ul> <p>Today, I introduce a nonlinear control system that combines a PID controller with the computed torque method. This system tackles the nonlinear dynamics effectively, compensating for gravity and dynamic forces while integrating displacement and velocity feedback. This approach, known as feedback linearization, linearizes the control by canceling out nonlinearities, enhancing system stability and tracking accuracy.</p> <p>The updated methodology reduces the need for extensive parameter tuning and improves response times, making the system more reliable and user-friendly. It is particularly suited for advanced robotics and precision engineering applications where accuracy and dynamic performance are crucial.</p> <p>The revised block diagrams in Figures 1 and 2 illustrate how the computed torque method enhances the PID controller by leveraging the system’s full dynamics to accurately predict and correct disturbances. These diagrams are referenced from Dr. Jun Ueda’s lecture slides.</p> <ol> <li> <p><strong>Linearized Dynamics:</strong> The linearized system dynamics are introduced using the equation:</p> \[\tau = M(q)\ddot{q}' + h(q, \dot{q}) + g(q) \tag{2}\] <p>This formula for \(\tau\), based on the computed input \(\ddot{q}'\), quantifies the total force required to achieve the control objectives. The dynamics without control input adjustment, given by Equation 1, are aligned with this formulation to yield:</p> \[M(q)\ddot{q}' + h(q, \dot{q}) + g(q) = M(q)\ddot{q} + h(q, \dot{q}) + g(q) \Rightarrow \ddot{q}' = \ddot{q} \tag{3}\] <p>This result indicates that under ideal control conditions, where the system accurately follows the control input, \(\ddot{q}'\) aligns with the actual acceleration \(\ddot{q}\) needed to match the desired trajectory, thereby confirming that the new control input effectively compensates for all dynamic forces impacting the system.</p> </li> <li> <p><strong>Input Through PID Controller:</strong> The new input \(\ddot{q}'\) is formulated using a PID controller to correct the error, described by the equation:</p> \[\ddot{q}' = \ddot{q}_d + K_d(\dot{q}_d - \dot{q}) + K_p(q_d - q) + K_i\int{(q_d - q)}dt \tag{4}\] <p>Using Equations 3 and 4, the dynamics correction can be expressed as:</p> \[(\ddot{q}_d - \ddot{q}) + K_d(\dot{q}_d - \dot{q}) + K_p(q_d - q) + K_i\int{(q_d - q)}dt \tag{5}\] </li> <li> <p><strong>Define the Error Dynamics:</strong> The tracking error is foundational for deriving the system’s dynamics, defined by:</p> \[e = q_d - q \tag{6}\] <p>This definition facilitates the expression of derivatives in terms of error:</p> \[\dot{e} = \dot{q}_d - \dot{q}, \quad \ddot{e} = \ddot{q}_d - \ddot{q} \tag{7}\] </li> <li> <p><strong>Error Dynamics Equation:</strong> Derived from Equation 5 by substituting Equations 6 and 7, the full error dynamics is given by:</p> \[\ddot{e} + K_d\dot{e} + K_pe + K_i \int{e}dt = 0 \tag{9}\] <p>This equation establishes the control dynamics under the implemented inputs, serving as a crucial indicator for system stability.</p> </li> <li> <p><strong>Stability Analysis:</strong> The stability of the system is evaluated using the <a href="https://en.wikipedia.org/wiki/Routh%E2%80%93Hurwitz_stability_criterion">Routh–Hurwitz criterion</a>, which is a well-established method for determining the stability of linear control systems. According to this criterion, the system is considered stable if:</p> \[K_dK_p &gt; K_i \tag{8}\] <p>This inequality must hold to ensure that the system approaches stability, meaning that as time approaches infinity, the error effectively reduces to zero:</p> \[t \rightarrow \infty \Rightarrow e \rightarrow 0.\] </li> </ol> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system">1. Overall System</h3> <p>The overall system is illustrated in Figure 3. As observed, the system architecture bears resemblance to a traditional PID control setup but incorporates additional subsystems and components to enhance functionality. These new elements are the “MUX (Red box)” and “DEMUX (Blue box)”, which play critical roles in handling signal matrices within the control loop.</p> <ul> <li> <p><strong>MUX (Red box)</strong>: The Multiplexer (MUX) is used to combine multiple single signals into a single matrix. This is particularly useful in control systems like ours where multiple input signals need to be processed simultaneously in a compact form. In Simulink, a MUX block simplifies system connections by aggregating several input lines into one output, feeding into systems that require a single input stream containing multiple signals.</p> </li> <li> <p><strong>DEMUX (Blue box)</strong>: Conversely, the Demultiplexer (DEMUX) is used to split a matrix into its component single signals. This is essential for systems that process signals in a matrix form but then require individual signal handling downstream. In Simulink, the DEMUX block facilitates the distribution of a single input containing multiple data points into multiple outputs, which can then be directed to specific parts of the system.</p> </li> </ul> <p>By channeling matrices through a “Computed Torque” subsystem using these blocks, the system is able to compute and output a new feedback torque that is more accurately aligned with the dynamic requirements of the controlled process.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 3. Schematic of the Multi-Link Mechanism Control System. </div> <h3 id="2-computed-torque-method-block">2. Computed Torque Method Block</h3> <p>Calculating torque through circuit design can be complex and time-consuming. Similar to the gravity calculation block described on Day 4, the computed torque method block simplifies this process. As depicted in Figure 4 and detailed through MATLAB scripts in Figures 5-7, I utilize “MATLAB Function blocks” within the computed torque block. These blocks allow me to script MATLAB code directly to compute each term of Equation 1. It’s important to note that I used a Matrix multiplication block instead of an element-wise multiplication block because Equation 1 involves matrix calculations, necessitating proper alignment and dimension matching of matrices.</p> <ul> <li> <p><strong>\(M(q)\)</strong>: This block computes the mass matrix (M) from Equation 1, which is critical as it reflects the system’s inertia. The matrix \(M\) is derived by partially differentiating Equation 1 with respect to each angular acceleration.</p> </li> <li> <p><strong>\(h(q, \dot{q})\)</strong>: This block calculates the Coriolis and centrifugal forces, represented as the second term in Equation 1. These dynamic forces are crucial for accurately modeling the behavior of rotating systems. The matrix \(h\) is obtained by isolating these forces in Equation 1, which can be done by subtracting \(M(q)\ddot{q} + g(q)\) from the total torque \(\tau\).</p> </li> <li> <p><strong>\(g(q)\)</strong>: This block computes the gravitational forces, consistent with the gravity block used on Day 4. This ensures that gravitational effects are accurately integrated into the torque computation. The matrix \(g\) is derived by isolating the gravitational term in Equation 1, which involves differentiating the gravitational components and then reintegrating them into the model.</p> </li> </ul> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 4. Computed Torque Method Block, illustrating the integration of MATLAB Function blocks for computing torque components. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 5 - 7. MATLAB Script for MATLAB Function Blocks for M, h, and g matrices. </div> <p>It’s important to note that \(q1\) has been defined as \(q(2) + \frac{\pi}{2}\). This definition is used because \(\theta_1\) is set as \(\theta_1 = \frac{\pi}{2} + q_1\) on Day 3.</p> <h1 id="iii-simulation">III. Simulation</h1> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the multi-link mechanism control system. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h3 id="1-tracking">1. Tracking</h3> <h5 id="a-no-pid-input">a) No PID Input</h5> <p>Initially, I set all the gains of the PID controller to zero to evaluate whether the computed torque block alone could effectively track the reference input. The results indicated that without the PID gains, the system failed to track the reference input and could not stabilize. I extended the simulation to 10,000 seconds, but the system remained unstable throughout, exhibiting behavior akin to an upside-down, slowly oscillating triple-link mechanism, which also showed signs of chaotic dynamics. This instability likely stems from the absence of error correction typically provided by the PID controller. The simulation video and the graph depicting each joint’s parameters are presented in Video 1 and Figure 8, respectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/01_no_PID_input.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Tracking of the Triple-Link Mechanism without PID input. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 8. Graphs of Joint Parameters without PID input. </div> <h5 id="b-varying-pid-gains">b) Varying PID gains</h5> <h6 id="1-k_p--01-k_i--0001-k_d--001">1) \(K_p = 0.1, K_i = 0.001, K_d = 0.01\)</h6> <p>I began with very small PID controller gains, anticipating that the results would be similar to those without PID input. However, the outcome was entirely different from what I had expected. The system rotated counterclockwise and was not fully chaotic. While Base 1, Link 1, and Link 3 became marginally stable, Link 2 remained unstable. Video 2 and Figure 9 depict the initial phase of the triple-link mechanism, while Video 3 and Figure 10 showcase the middle phase.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/02_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/03_tracking_1_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2 - 3. Tracking of the Triple-Link Mechanism with \( K_p = 0.1, K_i = 0.001, K_d = 0.01 \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 9 - 10. Graphs of Joint Parameters with \( K_p = 0.1, K_i = 0.001, K_d = 0.01 \). </div> <h6 id="2-k_p--1-k_i--001-k_d--01">2) \(K_p = 1, K_i = 0.01, K_d = 0.1\)</h6> <p>When I increased the gains slightly, the multi-link mechanism stabilized after oscillating for an extended period. An interesting observation was the lag in oscillation between the links. The maximum amplitude of Link 1 occurs first, followed by Link 2, and then Link 3. Also, intriguingly, when all the links are oscillating, the motion resembles that of a tail. Video 4 and Figure 11 display the results of the simulation.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/04_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 4. Tracking of the Triple-Link Mechanism with \( K_p = 1, K_i = 0.01, K_d = 0.1 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 11. Graphs of Joint Parameters with \( K_p = 1, K_i = 0.01, K_d = 0.1 \). </div> <h6 id="3-k_p--100-k_i--1-k_d--20">3) \(K_p = 100, K_i = 1, K_d = 20\)</h6> <p>I further increased the gain, resulting in rapid stabilization of the multi-link mechanism. An interesting behavior observed was that the multi-link mechanism maintained an almost straight posture during its movement. Video 5 and Figure 12 display the results of the simulation.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/05_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 5. Tracking of the Triple-Link Mechanism with \( K_p = 100, K_i = 1, K_d = 20 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 12. Graphs of Joint Parameters with \( K_p = 100, K_i = 1, K_d = 20 \). </div> <h6 id="4-k_p--106-k_i--104-k_d--2times105">4) \(K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>An interesting discovery was that although I could increase the PID gains indefinitely, the system’s performance has a distinct upper limit. Despite higher PID gains, performance actually deteriorated. It appears that for this controller, iterative testing is necessary to determine the optimal set of gains. Video 6 and Figure 12 compare the PID settings of \((K_p, K_i, K_d) = (100, 1, 20) and (10^6, 10^4, 2 \times 10^5)\).</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/06_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 6. Comparison of performance with PID gains of \( (100, 1, 20) \) versus \( (10^6, 10^4, 2\times10^5) \). </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 13. Interactive graphs comparing PID gains of \( (100, 1, 20) \) to \( (10^6, 10^4, 2 \times 10^5) \). </div> <h6 id="5-k_p--10-k_i--300-k_d--20-unstable-system">5) \(K_p = 10, K_i = 300, K_d = 20\) (Unstable System)</h6> <p>In the final phase of my tracking experiment, I simulated an unstable system characterized by the condition \(K_dK_p &lt; K_i\). As demonstrated in Video 7, Link 1, which experienced the most significant initial perturbation, exhibited signs of instability first. This instability progressively influenced Link 2 and Link 3, causing their perturbations to intensify. Ultimately, all links displayed unstable behavior. Figure 14 vividly illustrates this phenomenon, showing the angular positions of Link 2 and Link 3 diverging over time.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/07_tracking_5.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 7. Tracking of the Unstable Triple-Link Mechanism with \( K_p = 10, K_i = 300, K_d = 20 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 14. Graphs of Joint Parameters with \( K_p = 10, K_i = 300, K_d = 20 \). </div> <h3 id="2-regulation">2. Regulation</h3> <p>For the controller regulation simulation, I configured the initial joint PID gains to (100, 1, 20), which yielded the best performance in the tracking simulation. Additionally, I set the PID gains for the moving base to (10, 0.01, 4).</p> <h6 id="1-rho_0--2700kgm3-f--100n">1) \(\rho_0 = 2700kg/m^3, F = 100N\)</h6> <p>Compared to the PID + gravity compensation controller, there was less force propagation through the links, with most of the force being compensated by the rotation of Link 3, and the base remaining almost stationary. Video 7 and Figure 14 compare the simulations of PID + Gravity Compensation (PID + g) and PID + Computed Torque (PID + t).</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/08_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 8. Regulation Comparison Under 100N Disturbance: PID with Gravity Compensation vs. PID with Computed Torque. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 15. Interactive Graphs of PID with Gravity Compensation vs. PID with Computed Torque. </div> <h6 id="2-rho_0--2700kgm3-f--500n">2) \(\rho_0 = 2700kg/m^3, F = 500N\)</h6> <p>In Video 8, the “PID + gravity compensation” method enabled force to propagate through the links, requiring all the actuators at the joints to exert a similar effort to stabilize the system. In contrast, Video 9 demonstrates the “PID + computed torque” method, where force propagation was significantly reduced, concentrating the effort predominantly on Joint 3. This led to a longer stabilization time for the system, as the impact was not effectively absorbed by all the links and the base, but was largely managed by link 3. The differences in actuator displacement, as shown in Figure 15 and Figure 16, related to the difference in the distribution of impact absorption between the two methods.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/11_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/10_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 9 - 10. Triple-Link Mechanism Simulations with PID Control: PID + gravity compensation vs. PID + computed torque. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 16 - 17. Actuator Displacement Comparison in Triple-Link Mechanism Simulations: PID + gravity compensation vs. PID + computed torque. </div> <h6 id="3-rho_0--2700kgm3-f--500n-k_p--106-k_i--104-k_d--2times105">3) \(\rho_0 = 2700kg/m^3, F = 500N, K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>As observed during the tracking simulation, I was able to set the PID gains extremely high. With these settings, the regulation was effectively managed; the links hardly moved. Interestingly, the base moved toward the left, opposite to the direction of the external force. This is due to the efforts of the joints. The results are showcased in Video 10 and Figure 17.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/11_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 11. Regulation of the Triple-Link Mechanism with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 500N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 18. Graphs of Joint Parameters with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 500N \). </div> <h6 id="3-rho_0--2700kgm3-f--50000n-k_p--106-k_i--104-k_d--2times105">3) \(\rho_0 = 2700kg/m^3, F = 50000N, K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>However, as demonstrated in Video 11 and Figure 18, if the force is sufficiently strong, the base moves to the right, aligning with the direction of the external force.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/12_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 12. Regulation of the Triple-Link Mechanism with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 50000N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 19. Graphs of Joint Parameters with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5 , F = 50000N\). </div> <h6 id="4-rho_0--2700kgm3-f--1n-k_p--10-k_i--300-k_d--20-unstable-system">4) \(\rho_0 = 2700kg/m^3, F = 1N, K_p = 10, K_i = 300, K_d = 20 (Unstable System)\)</h6> <p>Similar to the tracking simulation, I also simulated the regulation of an unstable system, defined by the condition \(K_dK_p &lt; K_i\). In this configuration, even a minor perturbation can cause the system to diverge rapidly. This sensitivity to disturbances highlights the challenges of controlling such a system. In our Video 12 and Figure 20, you can observe how these tiny perturbations escalated, leading to increasingly significant deviations from the stable state.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/13_regulation_5.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 12. Regulation of the Unstable Triple-Link Mechanism with \( K_p = 10, K_i = 30, K_d = 20, F = 1N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 20. Graphs of Joint Parameters with \( K_p = 10, K_i = 300, K_d = 20, F = 1N \). </div> <h1 id="iv-moving-forward">IV. Moving Forward</h1> <p>Today, I enhanced the control of a fully actuated multi-link mechanism using a PID controller integrated with the computed torque method. Compared to standalone PID control and PID with gravity compensation, this approach demonstrated superior performance. One notable advantage is that this system achieves full linearity through feedback linearization, simplifying the control loop.</p> <p>During the simulation, I observed two key findings: First, while the gains of the PID controller can be increased significantly, this does not necessarily translate to improved performance. Second, although the computed torque method markedly enhances system performance, it does not address inherent PID limitations such as the potential for overreaction. This suggests that while the PID controller remains a component, some of its fundamental drawbacks persist.</p> <p>Through Days 4 and 5, I studied and implemented the feedback linearization method for nonlinear systems. Now, equipped with this understanding, I am eager to explore a variety of other nonlinear control strategies. Stay tuned for more updates as we continue to explore the fascinating world of multi-link mechanisms and tackle the challenges associated with controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Simulink"/><category term="Computed_Torque"/><category term="Controller_Design"/><summary type="html"><![CDATA[Refining multi-link mechanism control using PID techniques combined with the computed torque method for improved precision and dynamic stability.]]></summary></entry><entry><title type="html">[Controller Design] Day 4: PID Control with Gravity Compensation Method</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-4/" rel="alternate" type="text/html" title="[Controller Design] Day 4: PID Control with Gravity Compensation Method"/><published>2024-05-28T04:00:00+00:00</published><updated>2024-05-28T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-4</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-4/"><![CDATA[<p>A PID control system is valued for its straightforward design, as it does not necessitate a detailed understanding of the dynamic equations governing a triple-link mechanism. However, this simplicity can also be a drawback. The system may overreact or destabilize because it does not account for complex dynamics. Additionally, PID controllers often struggle with balancing between faster response and overshoot, and designing an effective system can be challenging due to its inherent limitations in handling nonlinear behaviors.</p> <p>Today, I will introduce the first nonlinear control system that combines a PID controller with gravity compensation method. This approach offers a straightforward yet effective framework for managing a triple-link mechanism, enhancing the simplicity of implementation. By integrating gravity compensation method, this system improves upon traditional PID controllers, specifically addressing the nonlinearities induced by gravitational forces and reducing the settling time.</p> <p>On Day 3, I derived the equations of motion for the triple-link mechanism:</p> \[\tau = M(q)\ddot{q} + h(q, \dot{q}) + g(q)\] <p>Where:</p> <ul> <li><strong>Matrix M (Inertial Term)</strong>: Represents the Newtonian response of the system to applied forces, accounting for the inertia of the masses.</li> <li><strong>Matrix h (Coriolis and Centrifugal Forces)</strong>: Quantifies the Coriolis and centrifugal forces, dependent on system velocities and rotational dynamics.</li> <li><strong>Matrix g (Gravitational Term)</strong>: Accounts for the force due to gravity acting on each mass component.</li> </ul> <p>To compensate for gravity, I extract the \(g\) matrix from the equation of motion and add it to the feedback from the PID controller. The block diagram of this system is shown in Figure 1.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 1. Block Diagram of the PID Control System with Gravity Compensation Method </div> <h1 id="i-a-multi-link-mechanism-with-a-fixed-base">I. A Multi-Link Mechanism with a Fixed Base</h1> <h3 id="a-overall-system">A. Overall System</h3> <p>The overall system is depicted in Figure 1. This system closely resembles that of Day 2, with the addition of a gravity calculation block. The angular displacement of each joint is fed into both the PID controller block and the gravity calculation block. Each block calculates its own feedback, which is then combined to determine the feedback torque needed to actuate the joints.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 2. Schematic of the Multi-Link Mechanism Control System with Fixed Base </div> <h3 id="b-gravity-calculation-block">B. Gravity Calculation Block</h3> <p>The gravity calculation block is relatively straightforward. Calculating the gravity term through circuit design is complex and time-consuming. Instead, I use a “MATLAB Function block,” as illustrated in Figure 2. This block allows me to write a MATLAB script to compute the gravity term, which is detailed in Figure 3.</p> <p>Extracting the gravity term from the equation of motion is straightforward. Given the symbolic representation of the motion equation, I apply partial differentiation with respect to \(g\), the gravitational constant, to isolate the gravity-related terms. After this differentiation, I multiply the result by \(g\) again to reintegrate the gravity constant into the equation. Additionally, I replace \(q_1\) with \(q_1 + \frac{\pi}{2}\) in the equation, as I used \(\theta\) as the variable instead of \(q\), in Day 3.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Gravity Calculation Block </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 4. MATLAB Script for MATLAB Function Block for Gravity Calculation </div> <h3 id="c-simulation">C. Simulation</h3> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the system with fixed base. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h5 id="1-tracking">1) Tracking</h5> <p>Firstly, I set all the gains of the PID controller to zero to test if compensating gravity alone could track the reference input. The results demonstrated that it could neither track the reference input nor stabilize the system. I ran the simulation for up to 10,000 seconds, but the system remained unstable. It resembled an upside-down, slow-moving triple-link mechanism, which also exhibited chaotic behavior. The simulation video and the graph for each joint parameter are displayed in Video 1 and Figure 5, respectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/01_fixed_no_PID.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Simulation of Triple-Link Mechanism with Compensating Gravity Only. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Joint Parameter Graphs for Sole Gravity Compensation Response. </div> <p>Following the initial simulation, I executed a second simulation using the same PID controller settings as on Day 2, incorporating the gravity calculation block as well. This simulation was intended to assess the impact of gravity compensation on the system’s overall performance. The results, as depicted in Video 2 and Figure 6, indicate that gravity compensation slightly enhanced the tracking speed. In Video 2, the left multi-link mechanism is controlled solely by a PID controller, while the right multi-link mechanism utilizes both PID control and gravity compensation. In Figure 6, you can slide the graphs to switch between the PID (left) and PID + gravity compensation (right) data for comparison.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/02_fixed_comparison.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2. Comparison of Tracking Performance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 6. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <p>Lastly, I extracted the feedback data from each PID controller and the gravity calculation block to analyze how the gravity term influences the overall feedback. Figures 7 through 9 display the feedback from each joint.</p> <p>To reduce the torque overshoot, the PID controller’s gain can be adjusted by decreasing \(K_p\) or increasing \(K_d\), though this tends to slow the system. However, as demonstrated in Figures 7 through 9, the feedback from gravity compensation acts to counterbalance the PID controller, effectively reducing torque overshoot without significantly affecting the system’s transient response time. This allows for quicker convergence.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 7 - 9. Feedback Analysis for Each Joint with PID and Gravity Compensation. </div> <h5 id="2-regulation">2) Regulation</h5> <p>Through simulation of the tracking, it was found that compensating for gravity aids in faster system convergence and reduces overshoot. Additionally, systems with gravity compensation restabilized more quickly and exhibited smaller overshoots compared to those without it under similar conditions when dealing with small disturbances. However, for larger disturbances, does gravity compensation resolve issues such as overreaction and destabilization? The answer is no. Despite implementing gravity compensation, these issues remained unresolved for larger disturbances. This conclusion is supported by the results shown in Videos 3 through 5 and Figures 10 through 12.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/03_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 3. Regulation Comparison Under 100N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 10. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <hr/> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/04_fixed_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 4. Regulation Comparison Under 110N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 11. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <hr/> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/03_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 5. Regulation Comparison Under 3000N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 12. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <p>Even though gravity compensation could not resolve the overreaction issue, it was observed that systems with gravity compensation recovered more quickly than those without. This quicker recovery was achieved by maintaining a faster angular speed when the angular displacement was small. Through simulation, it was determined that gravity compensation is more effective when there is a small angular displacement. Consequently, under conditions of small angular displacement, using a PID controller with gravity compensation can efficiently manage the system, optimizing performance and stability.</p> <h1 id="ii-a-multi-link-mechanism-with-a-moving-base">II. A Multi-Link Mechanism with a Moving Base</h1> <h3 id="a-overall-system-1">A. Overall System</h3> <p>Thankfully, the base moves only along the x-axis, and there are no gravity terms related to the base. As a result, this setup closely resembles a system with a fixed base. The overall system configuration is depicted in Figure 13.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 13. Schematic of the Multi-Link Mechanism Control System with Moving Base </div> <h3 id="b-simulation">B. Simulation</h3> <p>Since there were no significant changes, and I’ve already discussed all the findings in the fixed base section, I will present the results using the same parameters as Day 2. The results demonstrate faster stabilization.</p> <h5 id="1-tracking-1">1) Tracking</h5> <p>Videos 6 through 9 and Figures 14 through 17 demonstrate the tracking capabilities of the controller across various initial states in the simulation of a triple-link mechanism with a moving base. The initial states are defined as follows: for \(q_1\), the values are (180, -90, 150, 190); for \(q_2\), the values are (0, 0, 180, 180); and for \(q_3\), the values are (0, 0, 180, -110).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/06_moving_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/07_moving_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/08_moving_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/09_moving_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 6 - 9. Demonstrating the Tracking Capabilities of the Controller Across Various Initial States in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 14 - 17. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Initial States. </div> <h5 id="2-regulation-1">2) Regulation</h5> <p>Videos 10 through 13 and Figures 18 through 21 demonstrate the tracking capabilities of the controller across various initial states in the simulation of a triple-link mechanism with a moving base. All the initial states, \(q\), were set to 0. Adjustments were then made to the density of the base and the magnitude of disturbance. The densities, denoted as \(\rho_0\), are set to \((2700, 2700, 50000, 50000) kg/m^3\), and the forces, denoted as \(f\), are \((100, 500, 300, 500) N\).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/10_moving_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/11_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/12_moving_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/13_moving_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 10 - 13. Demonstrating the Regulation Capabilities of the Controller Across Various Disturbances in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 18 - 21. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Disturbances. </div> <h1 id="iii-moving-forward">III. Moving Forward</h1> <p>Today, I managed a fully actuated multi-link mechanism using a PID controller complemented by gravity compensation. The simulations revealed that gravity compensation significantly enhances stabilization by maintaining a high angular velocity when the angular displacement is minimal. Upon examining the torque feedback, I observed that gravity compensation acts as a counterbalance to the feedback from the PID, effectively reducing torque overshoot. Therefore, in scenarios involving only slight angular displacements, incorporating gravity compensation can markedly improve system performance.</p> <p>During today’s simulations, I realized that simulating the fixed base system might be time-consuming. Hence, starting from Day 5, I will omit simulations of the fixed base system. Stay tuned for more updates as we continue exploring the fascinating realm of multi-link mechanisms and tackle the challenges associated with controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Simulink"/><category term="Gravity_Compensation"/><category term="Controller_Design"/><summary type="html"><![CDATA[Optimizing multi-link mechanism control through advanced PID strategies integrated with gravity compensation method to enhance system response and stability.]]></summary></entry><entry><title type="html">[Controller Design] Day 3: The Equations of Motion and the Jacobians of the Triple-Link Mechanism</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-3/" rel="alternate" type="text/html" title="[Controller Design] Day 3: The Equations of Motion and the Jacobians of the Triple-Link Mechanism"/><published>2024-05-24T04:00:00+00:00</published><updated>2024-05-24T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-3</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-3/"><![CDATA[<p>In our previous work, I implemented a PID controller that relied solely on the difference between the reference angle and the current angle. Due to its simplistic mechanism, an in-depth understanding of the triple-link mechanism’s behavior was not required. However, given the inherent nonlinearity of the triple-link mechanism, the PID controller proved somewhat inefficient and performed less effectively compared to other controllers.</p> <p>Subsequent controllers necessitate a thorough analysis of the triple-link mechanism’s behavior. Therefore, I will explore the equations of motion and the Jacobians of the triple-link mechanism in detail.</p> <h1 id="i-background">I. Background</h1> <h3 id="a-lagrangian-dynamics">A. Lagrangian Dynamics</h3> <p>Newtonian dynamics typically employs rectangular (orthogonal) coordinate systems and incorporates constraint forces directly into the system. In contrast, Lagrangian dynamics is more flexible, allowing the use of any set of variables—known as generalized coordinates, denoted q—as long as they uniquely describe the position of the bodies within the system. The general formulation of Lagrangian dynamics is often derived from Hamilton’s principle, but it can also be developed through Newtonian principles. This approach uses the relationship between work and force to formulate the equations of motion in terms of the desired coordinates within the system. Importantly, it is possible to initiate an analysis using Lagrangian dynamics without first employing other dynamical formulations.</p> <h3 id="b-derivation-of-dynamics-equations-of-motion">B. Derivation of Dynamics Equations of Motion</h3> <p>Lagrangian dynamics centers around the use of the Lagrangian, defined as:</p> \[L = KE - PE \tag{1}\] <p>Here, \(KE\) represents the total kinetic energy of the system, and \(PE\) PE denotes the total potential energy, both expressed in terms of generalized coordinates (e.g., \(x, \theta_1\)). This equation is manipulated to derive the equations of motion for the system through the following relationship:</p> \[\left(\frac{d}{dt}\frac{\partial L}{\partial \dot{q}} - \frac{\partial L}{\partial q}\right)^T = Q \tag{2}\] <p>In this equation, \(Q\) is a vector that includes each of the generalized forces associated with the chosen generalized coordinates (e.g., \(f_x, \tau_1\)).</p> <p>Let the following is the equation of motion of a double-link mechanism.</p> \[\begin{bmatrix}\tau_1 \\ \tau_2 \end{bmatrix} = \begin{bmatrix} M_{1, 1} &amp; M_{1, 2} \\ M_{2, 1} &amp; M_{2, 2} \end{bmatrix}\begin{bmatrix}\ddot{\theta}_1 \\ \ddot{\theta}_2 \end{bmatrix} + \begin{bmatrix} h_{1, 1}\dot{\theta}_2^2 + h_{1, 2}\dot{\theta}_1\dot{\theta}_2 \\ h_{2, 1}\dot{\theta}_1^2 \end{bmatrix} + \begin{bmatrix} g_{1} \\ g_{2}\end{bmatrix}g\] <p>Where:</p> <ul> <li><strong>Matrix M (Inertial Term)</strong>: Represents the Newtonian response of the system to applied forces, accounting for the inertia of the masses.</li> <li><strong>Matrix h (Coriolis and Centrifugal Forces)</strong>: <ul> <li><strong>Centrifugal Force</strong>: Arises from terms like \(\dot{\theta}_1^2, \dot{\theta}_2^2\) and affects the system when rotating.</li> <li><strong>Coriolis Force</strong>: Results from terms like \(\dot{\theta}_1\dot{\theta}_2\) and is evident when components of the system move relative to one another.</li> </ul> </li> <li><strong>Matrix g (Gravitational Term)</strong>: Accounts for the force due to gravity acting on each mass component.</li> </ul> <h3 id="c-derivation-of-jacobians">C. Derivation of Jacobians</h3> <p>The Jacobian matrix is a fundamental tool in linear approximation, playing a crucial role in understanding how small changes in input variables affect output variables. It is especially valuable for analyzing system behavior near a specific operational point.</p> <p>Suppose you have a function \(f\) that maps a set of inputs \(\mathbf{q} = (q_1, q_2, ..., q_n)\) in \(\mathbb{R}^n\) to outputs \(\mathbf{p} = (p_1, p_2, ..., p_m)\) in \(\mathbb{R}^m\):</p> \[\mathbf{f} : \mathbb{R}^n \rightarrow \mathbb{R}^m\] <p>where</p> \[\mathbf{f}(\mathbf{q}) = \begin{bmatrix} p_1(q_1, \dots, q_n) \\ p_2(q_1, \dots, q_n) \\ \vdots \\ p_m(q_1, \dots, q_n) \end{bmatrix}\] <p>The Jacobian matrix \(\mathbf{J}\) of the function \(\mathbf{f}\) at a point \(\mathbf{q}\) in its domain is given by the matrix of partial derivatives:</p> \[\mathbf{J} = \begin{bmatrix} \frac{\partial p_1}{\partial q_1} &amp; \frac{\partial p_1}{\partial q_2} &amp; \cdots &amp; \frac{\partial p_1}{\partial q_n} \\ \frac{\partial p_2}{\partial q_1} &amp; \frac{\partial p_2}{\partial q_2} &amp; \cdots &amp; \frac{\partial p_2}{\partial q_n} \\ \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\ \frac{\partial p_m}{\partial q_1} &amp; \frac{\partial p_m}{\partial q_2} &amp; \cdots &amp; \frac{\partial p_m}{\partial q_n} \end{bmatrix} \tag{3}\] <p>In our scenario, the Jacobian matrix captures the relationship between each joint parameter and the position and orientation of link3’s center of mass, since our system does not include a typical end-effector.</p> <h1 id="ii-our-scenario">II. Our Scenario</h1> <h3 id="a-a-triple-link-mechanism-with-a-fixed-base">A. A Triple-Link Mechanism with a Fixed Base</h3> <p>The free body diagram of the triple-link mechanism with a fixed base is illustrated in Figure 1. In this diagram, the positive z-axis of the global frame is initially considered as the reference position. For simplification purposes, I have designated the x-axis of the global frame as the new reference position, leading to the relationship \(\theta_1 = \frac{\pi}{2} + q_1\). The variables \(q_2\) and \(q_3\) are retained as \(\theta_2\) and \(\theta_3\), respectively.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed-480.webp 480w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed-800.webp 800w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-24-Controller-Design-Day-3/01_fixed.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Free Body Diagram of the Triple-Link Mechanism with Fixed Base </div> <ul> <li>\(\theta_i\): the joint angle of joint \(i\)</li> <li>\(m_i\): the mass of link \(i\)</li> <li>\(I_i\): the moment of inertia of link \(i\) about the axis that passes through the center of mass and is parallel to the \(Z_i\)-axis</li> <li>\(l_i\): the length of link \(i\)</li> <li>\(g\): the magnitude of gravitational acceleration</li> <li>\(S_{ijk}\): \(\sin(\theta_i + \theta_j + \theta_k)\)</li> <li>\(C_{ijk}\): \(\cos(\theta_i + \theta_j + \theta_k)\)</li> </ul> <p>The moment of inertia for each link in our system can be calculated using the formula:</p> \[I = \frac{1}{12}m(l^2 + w^2) \approx \frac{1}{12}ml^2\] <p>This approximation holds because the length \(l\) of each link significantly exceeds its width \(w\). Given this, I can describe the center of mass for each link as follows:</p> <ul> <li>For the link 1: \(s_1 = \begin{bmatrix} \frac{1}{2} l_1 \cos(\theta_1) \\ \frac{1}{2} l_1 \sin(\theta_1) \end{bmatrix}\)</li> <li>For the link 2: \(s_2 = \begin{bmatrix} l_1 \cos(\theta_1) + \frac{1}{2} l_2 \cos(\theta_{12}) \\ l_1 \sin(\theta_1) + \frac{1}{2} l_2 \sin(\theta_{12}) \end{bmatrix}\)</li> <li>For the link 3: \(s_3 = \begin{bmatrix} l_1 \cos(\theta_1) + l_2 \cos(\theta_{12}) + \frac{1}{2} l_3 \cos(\theta_{123}) \\ l_1 \sin(\theta_1) + l_2 \sin(\theta_{12}) + \frac{1}{2} l_3 \sin(\theta_{123}) \end{bmatrix}\)</li> </ul> <h5 id="1-equation-of-motion">1) Equation of Motion</h5> <p>The linear velocity of each link’s center of mass is expressed as:</p> \[\dot{s} = \frac{ds}{dt}.\] <p>Similarly, the angular velocity for each link is summed up to:</p> \[\sum_{k=1}^i \dot{\theta}_k.\] <p>The energy dynamics of the system are defined by the kinetic and potential energies:</p> \[KE_i = \frac{1}{2} m_i \dot{s}_i^\top \dot{s}_i + \frac{1}{2} I_i \left( \sum_{k=1}^i \dot{\theta}_k \right)^2,\] \[PE_i = m_i g s_{i, 2},\] <p>where \(s_{i, 2}\) represents the y-component of the vector \(s_i\).</p> <p>The overall dynamics are governed by the Lagrangian, which is:</p> \[L = \sum_{i=1}^3 KE_i - \sum_{i=1}^3 PE_i.\] <p>Finally, by substituting \(L\) into equation (1), I derive the equations of motion. I will not detail the derivation and results here due to their length.</p> <h5 id="2-jacobian">2) Jacobian</h5> <p>The position and orientation of the center of mass of link 3 are represented as follows:</p> \[\mathbf{f} = \begin{bmatrix} x_{g, 3} \\ y_{g, 3} \\ \Omega \end{bmatrix} = \begin{bmatrix} l_1 \cos(\theta_1) + l_2 \cos(\theta_{12}) + \frac{1}{2} l_3 \cos(\theta_{123}) \\ l_1 \sin(\theta_1) + l_2 \sin(\theta_{12}) + \frac{1}{2} l_3 \sin(\theta_{123}) \\ \theta_1 + \theta_2 + \theta_3 \end{bmatrix}\] <p>Consequently, the Jacobian matrix is given by:</p> \[J = \begin{bmatrix} \frac{\partial x_{g, 3}}{\partial \theta_1} &amp; \frac{\partial x_{g, 3}}{\partial \theta_2} &amp; \frac{\partial x_{g, 3}}{\partial \theta_3} \\ \frac{\partial y_{g, 3}}{\partial \theta_1} &amp; \frac{\partial y_{g, 3}}{\partial \theta_2} &amp; \frac{\partial y_{g, 3}}{\partial \theta_3} \\ 1 &amp; 1 &amp; 1 \end{bmatrix}\] <p>where:</p> <ul> <li>\(x_{g, 3}\) and \(y_{g, 3}\) are the \(x\) and \(y\) coordinates of the center of mass of link 3.</li> <li>The derivatives \(\frac{\partial x_{g, 3}}{\partial \theta_i}\) and \(\frac{\partial y_{g, 3}}{\partial \theta_i}\) involve sine and cosine functions reflecting changes in position with respect to changes in the angles \(\theta_1\), \(\theta_2\), and \(\theta_3\).</li> <li>The third row reflects the direct additive impact of each joint angle on the overall orientation \(\Omega\).</li> </ul> <p>For the complete calculations and results, please refer to the ‘Day_03_Fixed_Base.m’ file available on <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</p> <h3 id="b-a-triple-link-mechanism-with-a-moving-base">B. A Triple-Link Mechanism with a Moving Base</h3> <p>The free body diagram of the triple-link mechanism with a moving base is illustrated in Figure 2. It is similar to the fixed base but I added another parameter (\(x\)).</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving-480.webp 480w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving-800.webp 800w,/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-24-Controller-Design-Day-3/02_moving.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 2. Free Body Diagram of the Triple-Link Mechanism with Moving Base </div> <p>Since \(x\) influences the x-component of each center of mass, I must update them accordingly.</p> <ul> <li>For the base: \(s_0 = \begin{bmatrix} x \\ 0 \end{bmatrix}\)</li> <li>For the link 1: \(s_1 = \begin{bmatrix} x + \frac{1}{2} l_1 \cos(\theta_1) \\ \frac{1}{2} l_1 \sin(\theta_1) \end{bmatrix}\)</li> <li>For the link 2: \(s_2 = \begin{bmatrix} x + l_1 \cos(\theta_1) + \frac{1}{2} l_2 \cos(\theta_{12}) \\ l_1 \sin(\theta_1) + \frac{1}{2} l_2 \sin(\theta_{12}) \end{bmatrix}\)</li> <li>For the link 3: \(s_3 = \begin{bmatrix} x + l_1 \cos(\theta_1) + l_2 \cos(\theta_{12}) + \frac{1}{2} l_3 \cos(\theta_{123}) \\ l_1 \sin(\theta_1) + l_2 \sin(\theta_{12}) + \frac{1}{2} l_3 \sin(\theta_{123}) \end{bmatrix}\)</li> </ul> <h5 id="1-equation-of-motion-1">1) Equation of Motion</h5> <p>The approach remains the same as with the fixed base. However, I needed to account for the fact that there is only translational motion in the base.</p> \[L = \sum_{i=0}^3 KE_i - \sum_{i=0}^3 PE_i.\] <h5 id="2-jacobian-1">2) Jacobian</h5> <p>The function \(f\) f remains unchanged, but we must update the Jacobian matrix \(J\) as follows:</p> \[J = \begin{bmatrix} 1 &amp; \frac{\partial x*{g, 3}}{\partial \theta*1} &amp; \frac{\partial x*{g, 3}}{\partial \theta*2} &amp; \frac{\partial x*{g, 3}}{\partial \theta*3} \\ 0 &amp; \frac{\partial y*{g, 3}}{\partial \theta_1} &amp; \frac{\partial y*{g, 3}}{\partial \theta*2} &amp; \frac{\partial y*{g, 3}}{\partial \theta_3} \\ 0 &amp; 1 &amp; 1 &amp; 1 \end{bmatrix}\] <p>For the complete calculations and results, please refer to the ‘Day_03_Moving_Base.m’ file available on <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</p> <h3 id="c-a-pendulum-on-cart">C. A Pendulum on Cart</h3> <p>For a simplified model derived from the triple-link mechanism on a moving base, consider only the base and the first link.</p> <ul> <li><strong>Base coordinates</strong>: \(s_0 = \begin{bmatrix} x \\ 0 \end{bmatrix}\)</li> <li><strong>Link 1 coordinates</strong>: \(s_1 = \begin{bmatrix} x + \frac{1}{2} l_1 \cos(\theta_1) \\ \frac{1}{2} l_1 \sin(\theta_1) \end{bmatrix}\)</li> </ul> <h5 id="1-equations-of-motion">1) Equations of Motion:</h5> <p>The equations of motion for the system, including both inertial and gravitational effects, can be represented in matrix form as follows:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{m_1 l_1 \sin(\theta_1)}{2} \\ -\frac{l_1 m_1 \sin(\theta_1)}{2} &amp; \frac{l_1^2 m_1}{3} \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} + \begin{bmatrix} -\frac{1}{2}m_1 l_1 \cos(\theta_1) \dot{\theta}_1^2 \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ \frac{1}{2}g l_1 m_1 \cos(\theta_1) \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix}\] <p>These equations of motion may appear unconventional because the angle reference \(\theta_1\) is defined from the horizontal (positive x-axis), rather than the more typical vertical reference. This orientation alters the trigonometric components and their interactions within the dynamic model, influencing how terms involving \(\sin(\theta_1)\) and \(\cos(\theta_1)\) are applied in the system’s matrix representation.</p> <h1 id="iii-moving-forward">III. Moving Forward</h1> <p>Today, I derived the equations of motion for a triple-link mechanism with both fixed and moving bases. These results will be instrumental in developing advanced control mechanisms such as gravity compensation control, Jacobian transpose control, and controllers for underactuated systems. Please stay tuned for more updates!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Simulink"/><category term="Equation_of_Motion"/><category term="Controller_Design"/><summary type="html"><![CDATA[Analyzing the equations of motion and Jacobians for a triple-link mechanism with fixed and moving bases, essential for advanced control designs.]]></summary></entry><entry><title type="html">[Controller Design] Day 2: PID Controller</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-2/" rel="alternate" type="text/html" title="[Controller Design] Day 2: PID Controller"/><published>2024-05-20T04:00:00+00:00</published><updated>2024-05-20T04:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-2</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-2/"><![CDATA[<p>A fully actuated system is one in which the number of independent actuators matches the number of degrees of freedom, allowing for direct control over each motion dimension. This setup is typical in industrial robots and other motor-driven mechanisms, where each joint or axis is controlled by its own motor, facilitating precise manipulation.</p> <p>For example, a fully actuated multi-link mechanism is easier to control because each degree of freedom—whether it involves rotation or translation—is directly managed by an independent actuator. This direct manipulation allows for precise adjustments to the multi-link mechanism’s position and motion, simplifying the control algorithms needed for maintaining stability and achieving desired behaviors. In such systems, the control can often be accomplished using linear controllers, though an understanding of nonlinear dynamics is still beneficial for optimizing performance and handling more complex scenarios.</p> <p>Today, I will simulate the PID controller, which is the simplest and most representative type of linear controller. The block diagram of the PID controller system is presented in Figure 0. I added this at the end and chose not to update the figure numbering.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/00_block_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 0. Block Diagram of the PID Controller System </div> <h1 id="i-a-multi-link-mechanism-with-a-fixed-base">I. A Multi-Link Mechanism with a Fixed Base</h1> <h3 id="a-overall-system">A. Overall System</h3> <p>The overall system is depicted in Figure 1. This system closely resembles that of Day 1 but includes an added PID control subsystem. The angular displacement of each joint is input into the PID controller block, which calculates the feedback torque to actuate the joints.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/01_fixed_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 1. Schematic of the Multi-Link Mechanism Control System with Fixed Base </div> <h3 id="b-subsystems">B. Subsystems</h3> <h5 id="1-links">1) Links</h5> <p>In the updated design of the link subsystems, illustrated in Figures 2, 3, and 4, I’ve introduced several modifications to enhance realism and functionality. These changes echo the foundational setups from Day 1 but with key differences:</p> <ul> <li>To better realize the oscillatory nature of real-world multi-link mechanism dynamics, I’ve configured the angular displacement of each link to be periodic, spanning a full circle from \(-\pi\) to \(\pi\).</li> <li>In a shift from the initial configuration, I’ve realigned the x-axis of link 1 to coincide with the z-axis of the world frame.</li> <li>Additionally, I’ve incorporated blocks to generate an impulsive external force at the end of link 3, to simulate external forces on the system and test its regulatory response.</li> </ul> <p>The modifications ensure that when the multi-link mechanism is upright, its angular displacement is set to \(0\). This allows us to use the origin as our equilibrium point in subsequent simulations.</p> <div class="col-sm mt-3 mt-md-0"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/02_subsystem_link1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 2: Detailed View of Link 1 Subsystem. </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/03_subsystem_link2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 3: Detailed View of Link 2 Subsystem. </div> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/04_subsystem_link3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> <div class="caption"> Figure 4: Detailed View of Link 3 Subsystem. </div> </swiper-slide> </swiper-container> </div> <h5 id="2-pid-controller">2) PID Controller</h5> <p>Figure 5 shows a PID controller subsystem. It begins by comparing a desired target (q_d) with an actual value (q) to determine the error, or the difference between what is desired and what exists. This error is then processed through three types of control: Proportional (Kp), which reacts to the current error; Integral (Ki), which addresses the accumulation of past errors; and Derivative (Kd), which predicts future errors. The outputs from these controls are combined to produce a feedback signal that adjusts the system to minimize the error, helping maintain the desired output.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/05_subsystem_PID_controller.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 5. Detailed View of PID Controller Subsystem. </div> <h3 id="c-simulation">C. Simulation</h3> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the system with fixed base. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h5 id="1-tracking">1) Tracking</h5> <p>Videos 1 through 4 demonstrate the behavior of the system from various initial states. Figures 6 through 9 present an analysis of angular displacement for different initial conditions. These results show the robust tracking capabilities of the control system, which efficiently elevates the multi-link mechanism to a vertical position from any initial state.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/01_fixed_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/02_fixed_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/03_fixed_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/04_fixed_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 1 - 4. Demonstrating the Tracking Capabilities of the Controller Across Various Initial States in the Triple-Link Mechanism with Fixed Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/06_fixed_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/07_fixed_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/08_fixed_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/09_fixed_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 6 - 9. Analysis of Angular Displacement in the Triple-Link Mechanism with Fixed Base Across Various Initial States. </div> <h5 id="2-regulation">2) Regulation</h5> <p>Videos 5 through 9 demonstrate the robust regulating capabilities of the control system, which efficiently rejects disturbances and maintains the reference position. Meanwhile, Figures 6 through 9 analyze the angular displacement under various disturbances. Specifically, Videos 6 and 7, along with Figures 11 and 12, showcase a simulation of a triple-link mechanism subjected to a substantial disturbance, significant enough to potentially cause a single rotation. However, in these demonstrations, the multi-link mechanism rotates almost twice. Similarly, As demonstrated in Video 8 and Figure 13, the system exhibits prolonged regulation times when subjected to a strong disturbance. I suspect this excessive rotation is due to the control system not accounting for the angular velocity and angular acceleration of the multi-link mechanism. This oversight in the control strategy leads to an over-response to the disturbance. I am uncertain whether this issue can be addressed by tuning the PID controller or changing system parameters. Please leave a comment if you have any ideas.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/05_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/06_fixed_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/07_fixed_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/08_fixed_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 5 - 8. Demonstrating the Regulation Capabilities of the Controller Across Various Disturbances in the Triple-Link Mechanism with Fixed Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/10_fixed_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/11_fixed_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/12_fixed_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/13_fixed_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 10 - 13. Analysis of Angular Displacement in the Triple-Link Mechanism with Fixed Base Across Various Disturbances. </div> <h1 id="ii-a-multi-link-mechanism-with-a-moving-base">II. A Multi-Link Mechanism with a Moving Base</h1> <h3 id="a-overall-system-1">A. Overall System</h3> <p>The overall system configuration of the triple-link mechanism with a moving base is similar to that of the fixed base, with the addition of a moving frame. Also, I have increased the density of the base to make it heavier.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/14_moving_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 14. Schematic of the Multi-Link Mechanism Control System with Moving Base </div> <h3 id="b-simulation">B. Simulation</h3> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the system with moving base. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h5 id="1-tracking-1">1) Tracking</h5> <p>Videos 9 through 12 showcase the robust tracking capabilities of the control system, which efficiently brings the multi-link mechanism to a vertical position from any starting point. Meanwhile, Figures 15 through 18 provide an analysis of angular displacement across various initial states. Interestingly, the trajectory of the system with a moving base appears more sensible than that of the system with a fixed base, likely due to the addition of an extra degree of freedom.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/09_moving_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/10_moving_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/11_moving_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/12_moving_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 9 - 12. Demonstrating the Tracking Capabilities of the Controller Across Various Initial States in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/15_moving_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/16_moving_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/17_moving_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/18_moving_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 15 - 18. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Initial States. </div> <h5 id="2-regulation-1">2) Regulation</h5> <p>Videos 13 through 16 illustrate the regulating capabilities of the control system, which effectively rejects disturbances and maintains the reference position in most scenarios. Meanwhile, Figures 19 through 22 provide an analysis of angular displacement under various disturbances.</p> <p>Specifically, Videos 13 to 15 demonstrate conditions with low base density under mild and strong disturbances, and very high base density under strong disturbance, respectively. Under these setups, the system regulates effectively, either by the base dispersing the energy or functioning as a fixed base. However, as shown in Video 16, under certain combinations of base density and disturbance intensity, the regulation is not successful, and the system becomes unstable. This instability is likely because, similar to the fixed base scenario, the PID controller primarily considers angular displacement, which may not suffice under more challenging conditions.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/13_moving_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/14_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/15_moving_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-20-Controller-Design-Day-2/16_moving_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Videos 13 - 16. Demonstrating the Regulation Capabilities of the Controller Across Various Disturbances in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/19_moving_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/20_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/21_moving_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4-480.webp 480w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4-800.webp 800w,/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-20-Controller-Design-Day-2/22_moving_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 19 - 22. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Disturbances. </div> <h1 id="iii-moving-forward">III. Moving Forward</h1> <p>Today, I dealt with a fully actuated multi-link mechanism using a PID controller. This control system offers the benefit of a relatively simple design, as it does not require consideration of the complete dynamic equations of the triple-link mechanism. However, this simplicity sometimes leads to drawbacks, such as overreaction or subsequent destabilization of the system. In my next post, I will explore alternative control systems that can address these issues. Stay tuned for more updates as we delve deeper into the intriguing world of multi-link mechanisms and confront the challenges of controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Simulink"/><category term="PID"/><category term="Controller_Design"/><summary type="html"><![CDATA[An in-depth exploration of a fully actuated triple-link mechanism using a PID controller, with its tracking accuracy, and regulation effectiveness.]]></summary></entry><entry><title type="html">[Controller Design] Day 1: Creating the Multibody System Using Simscape</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-1/" rel="alternate" type="text/html" title="[Controller Design] Day 1: Creating the Multibody System Using Simscape"/><published>2024-05-15T00:00:00+00:00</published><updated>2024-05-15T00:00:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-1</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-1/"><![CDATA[<p>Today marked the exciting beginning of my project on simulating multi-link mechanism control, a pivotal concept in dynamic systems and control theory. My objective for Day 1 was to construct the foundational multibody system using Simscape, which involved creating multi-link mechanism with varying numbers of links. The challenge here is not just about assembling a physical model, but also simulating how these systems behave under different conditions—a crucial aspect for anyone venturing into the world of advanced robotics and control systems.</p> <h1 id="i-a-multi-link-mechanism-with-a-fixed-base">I. A Multi-Link Mechanism with a Fixed Base</h1> <h3 id="a-overall-system">A. Overall System</h3> <p>The process began with setting up the basic structure of the multi-link mechanism with a fixed base. I designed a schematic that includes components like the links and the fixed base that manage the multi-link mechanism’s movement (See Figure 1). This visual setup helps in understanding how each part interacts within the system and serves as a good starting point for simulation.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 1. Schematic of the Multi-Link Mechanism with Fixed Base. </div> <h3 id="b-subsystem---link">B. Subsystem - Link</h3> <p>Next, I focused on the Links, zooming into the subsystem that plays a critical role in the multi-link mechanism’s dynamics. The revolute joint determine how the multi-link mechanism reacts to forces and movements applied to it, which is essential for analyzing stability and control (See Figure 2). Understanding each component is vital for refining the simulation and ensuring accurate results.</p> <p>In Figure 2, the subsystem of link 1 is depicted with several blocks.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/02_sub_system_link1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 2. Detailed View of Link 1 Subsystem. </div> <p>Each block is enclosed in a color-coded box to indicate its specific function:</p> <ul> <li> <p><strong>Red Boxes</strong>: Blocks within the red boxes are crucial for adjusting the joint’s frame so that the joint’s rotational axis (default z-axis) aligns with the world frame’s y-axis.</p> </li> <li> <p><strong>Blue Boxes</strong>: Blocks within the blue boxes are used for linking the joints and the links together.</p> </li> <li> <p><strong>Green Box</strong>: The block in the green box is positioned at the end of the link. This setup is typically used for attaching additional components or for applying external forces to the system.</p> </li> </ul> <p>Similarly, Figure 3 illustrates the subsystem comprising links 2 and 3, depicted with several blocks. A rotational block is not required as the joint’s rotational axis is already aligned with the world frame’s y-axis.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/03_sub_system_link2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 3. Detailed View of Link 2 and Link 3 Subsystem. </div> <p>By meticulously arranging these blocks and understanding their specific roles, I can create a versatile simulation environment that accurately mimics real-world physical conditions. This level of detail is imperative for developing effective control strategies and for the thorough analysis of the dynamics of multi-link mechanism.</p> <h3 id="c-parameter-customization">C. Parameter Customization</h3> <p>I utilized the mask editor in Simscape to enhance subsystem customization. This tool allowed me to encapsulate subsystems, thereby facilitating easy adjustments of parameters such as mass, length, and friction through a user-friendly interface. By clicking the “Edit” button, which is highlighted in a red box in Figure 4, I was able to add new parameters to the subsystems.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/01_overall_system_fixed.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 4. Mask Editor Interface in Simscape. </div> <p>Figure 5 displays the interface after these additions. This makes much easier to modify the parameters without altering the core model structure.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/05_parameter_setting.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Parameter Interface in Simscape After Masking. </div> <h3 id="d-simulation-results">D. Simulation Results</h3> <p>To solve the differential equation, I utilized the <strong>daessc</strong> solver, which is specifically designed for Simscape DAEs (Differential-Algebraic Equations), with variable step size.</p> <p>Video 1 illustrates a non-chaotic motion resulting from a specific initial angle and link’s length. This setup reveals predictable and stable behavior, demonstrating how controlled conditions can ensure system stability.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/01_fixed_non_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 1. Demonstration of Non-Chaotic Motion in the Multi-Link Mechanism with Fixed Base Simulation. </div> <p>Figure 6 provides a detailed analysis of the angular displacement for each joint of the triple multi-link mechanism with a fixed base under non-chaotic conditions. This illustrates how each joint behaves in terms of movement and speed when the system is stable and predictable.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/06_fixed_non_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 6. Angular Displacement Analysis of Non-Chaotic Motion in the Multi-Link Mechanism with Fixed Base. </div> <p>Conversely, Video 2 captures the onset of chaotic behavior under a slightly altered set of conditions. A small change in the initial angle leads to unpredictable and complex dynamics. This showcases the system’s sensitive dependence on initial conditions—a defining characteristic of chaotic systems.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/02_fixed_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 2. Demonstration of Chaotic Motion in the Multi-Link Mechanism with Fixed Base Simulation. </div> <p>Figure 7 showcases the same parameter under chaotic conditions, highlighting the significant differences when small changes in initial conditions lead to complex and unpredictable dynamics. Comparing these images helps underline the critical impact of initial setup variations on the system’s behavior, offering valuable insights for designing mechanisms to control or utilize chaotic responses effectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/07_fixed_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 7. Angular Displacement Analysis of Chaotic Motion in the Multi-Link Mechanism with Fixed Base. </div> <p><br/></p> <h1 id="ii-a-multi-link-mechanism-with-a-moving-base">II. A Multi-Link Mechanism with a Moving Base</h1> <h3 id="a-overall-system-1">A. Overall System</h3> <p>For the multi-link mechanism with a moving frame, I kept the links unchanged but made the base movable and added visualization along the x-axis.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/08_overall_system_moving.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 8. Schematic of the Multi-Link Mechanism with Moving Base. </div> <h3 id="b-subsystem---moving-base">B. Subsystem - Moving Base</h3> <p>Figure 9 shows the moving base subsystem. Similar to the revolute joint, the translational axis of prismatic joints is the z-axis. Therefore, we need to rotate the joint’s frame to align the joint’s z-axis with the world frame’s x-axis.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/09_sub_system_base.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> <div class="caption"> Figure 9. Detailed View of the Base Subsystem. </div> <h3 id="c-simulation-results">C. Simulation Results</h3> <p>Video 3 depicts a non-chaotic motion resulting from a specific initial angle and link’s length, showing predictable behavior similar to systems with a fixed base, thus illustrating how controlled conditions can enhance system stability. Figure 10 captures the parameters of the base and each joint, providing a detailed view of the setup components.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/03_moving_non_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 3. Demonstration of Non-Chaotic Motion in the Multi-Link Mechanism Simulation with Moving Base. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/10_moving_non_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 10. Angular Displacement Analysis of Non-Chaotic Motion in the Multi-Link Mechanism with Moving Base. </div> <p>Conversely, Video 4 and Figure 11, akin to Video 2 and Figure 7, display the chaotic motion of a system with a moving base, along with the parameters of the base and each joint. The displacement of the base has been scaled up by a factor of 10 to enhance its visualization.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-15-Controller-Design-Day-1/04_moving_chaotic_motion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""/> </figure> </div> </div> <div class="caption"> Video 4: Demonstration of Chaotic Motion in the Multi-Link Mechanism Simulation with Moving Base. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic-480.webp 480w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic-800.webp 800w,/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic-1400.webp 1400w," sizes="95vw" type="image/webp"/> <img src="/assets/img/posts/2024-05-15-Controller-Design-Day-1/11_moving_chaotic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Figure 11. Angular Displacement Analysis of Chaotic Motion in the Multi-Link Mechanism with Moving Base. </div> <h1 id="iii-moving-forward">III. Moving Forward</h1> <p>I chose different lengths for the multi-link mechanism primarily due to controllability concerns. Varying the lengths has helped in understanding how each variation impacts the system’s ability to be controlled, thus informing the development of more effective control strategies.</p> <p>In the later post, I plan to delve deeper into the relationship between the length of each link and its <a href="https://en.wikipedia.org/wiki/Controllability">controllability</a>. This analysis is crucial as it will inform the implementation of a controllers for the multi-link mechanism. Understanding these relationships is key to developing effective control strategies that can manage the complexity and inherent challenges of chaotic systems.</p> <p>It’s a blend of theory and practical application, and I’m eager to see where this journey takes me in the realm of control engineering. Stay tuned for more updates as I explore the fascinating world of multi-link mechanism and tackle the challenges of controlling chaotic systems!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Simulink"/><category term="Simscape"/><category term="Controller_Design"/><summary type="html"><![CDATA[Exploring the dynamics of a multi-link mechanism by constructing and simulating a multibody system using Simscape.]]></summary></entry><entry><title type="html">[Controller Design] Day 0: Kicking Off the Controller Design Project</title><link href="https://gunee20.github.io/blog/2024/Controller-Design-Day-0/" rel="alternate" type="text/html" title="[Controller Design] Day 0: Kicking Off the Controller Design Project"/><published>2024-05-14T15:31:00+00:00</published><updated>2024-05-14T15:31:00+00:00</updated><id>https://gunee20.github.io/blog/2024/Controller-Design-Day-0</id><content type="html" xml:base="https://gunee20.github.io/blog/2024/Controller-Design-Day-0/"><![CDATA[<p><strong>This project was inspired by the following video:</strong></p> <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; margin-bottom: 3rem;"> <iframe src="https://www.youtube.com/embed/I5GvwWKkBmg" frameborder="0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> </div> <h2 id="journey-through-the-dynamics-of-multi-link-mechanisms-a-project-exploration">Journey Through the Dynamics of multi-link mechanisms: A Project Exploration</h2> <p>The inaugural step of this journey begins with constructing the multibody system for the multi-link mechanism. This stage is crucial as it sets the groundwork for all subsequent experiments. I am designing multi-link mechanisms with varying numbers of links, each introducing unique challenges and dynamics. By setting up the initial simulation environment and examining how the system behaves under different initial conditions, I aim to gather a robust understanding of the fundamental dynamics that govern these intriguing mechanical structures.</p> <h4 id="phase-1-building-the-foundation">Phase 1: Building the Foundation</h4> <p>The first phase involves building a multibody system for the multi-link mechanism. This foundational step includes designing multi-link mechanisms with different numbers of links and setting up the initial simulation environment. By understanding the basic dynamics and how the system responds under various initial conditions, I can prepare for more complex control implementations.</p> <h4 id="phase-2-achieving-stability-with-pid-and-lqr-control">Phase 2: Achieving Stability with PID and LQR Control</h4> <p>Once the basic system is operational, I focus on stabilizing a multi-link mechanism. Initially, a PID controller is applied to the joints to achieve stable, controlled motion. Tuning the PID parameters is crucial for maintaining the mechanism’s upright position despite disturbances. I also integrate a Linear Quadratic Regulator (LQR) to complement the PID controller. LQR optimally minimizes a cost function that balances state deviation and control effort, enhancing stability and robustness under linear conditions. The combination of PID and LQR establishes a robust control foundation, efficiently managing disturbances and laying the groundwork for more dynamic challenges in subsequent phases.</p> <h4 id="phase-3-calculating-the-equations-of-motion-for-non-linear-controller-design">Phase 3: Calculating the Equations of Motion for Non-linear Controller Design</h4> <p>Building on the foundational understanding and adaptations to a dynamic base, this phase focuses on calculating the equations of motion for the multi-link mechanism. I will use Lagrangian mechanics to derive precise mathematical models that describe the system’s dynamics, essential for predicting its behavior under various conditions. These equations will directly inform the design of advanced nonlinear controllers, enabling optimized control strategies and improved system performance in subsequent phases.</p> <h4 id="phase-4-advanced-nonlinear-control-strategies">Phase 4: Advanced Nonlinear Control Strategies</h4> <p>In the final phases of our project, I integrate several advanced nonlinear control strategies to handle our moving base multi-link mechanism, particularly focusing on robust and intelligent methodologies.</p> <ul> <li><strong>PID with Gravity Compensation:</strong> Enhances basic PID control by incorporating compensation for gravitational forces acting on the system, crucial for maintaining stability and control in vertically oriented mechanisms.</li> <li><strong>PID with Computed Torque Method:</strong> Combines conventional PID control with a model-based torque computation that accounts for the dynamics of the system, significantly improving precision and response to disturbances.</li> <li><strong>Bang-Bang Controller:</strong> Offers a simple yet effective control strategy for rapid switching between maximum states, useful for systems requiring stark transitions.</li> <li><strong>Fuzzy Logic Controller:</strong> Introduces an ability to handle uncertainties and imprecise inputs, making decisions based on ‘degrees of truth’ rather than binary logic, ideal for complex, nonlinear system behaviors.</li> <li><strong>Gain Scheduling Controller:</strong> Adjusts controller gains based on real-time changes in system parameters or operating conditions, enhancing control flexibility and responsiveness.</li> <li><strong>Self-Tuning Controller:</strong> Adapts its parameters in real-time based on system feedback, ensuring optimal performance under varying conditions.</li> <li><strong>Model-Reference Adaptive Control (MRAC):</strong> Aims to modify the system dynamics to follow a desired reference model, useful for ensuring stability in dynamically changing environments.</li> <li><strong>Model Predictive Control (MPC):</strong> Utilizes a model of the system to predict future states and optimize control actions over a set horizon, providing a strategic depth to immediate and future control needs.</li> <li><strong>Sliding Mode Control (SMC):</strong> Features a discontinuous control law ensuring robustness against model uncertainties and external disturbances, ideal for systems where precise control is crucial despite parameter variations.</li> <li><strong>Backstepping Controller:</strong> Utilizes a recursive design approach that builds a Lyapunov function step-by-step, making it suitable for systems with strict stability requirements.</li> <li><strong>Neural Network Controller:</strong> Employs artificial neural networks to model complex nonlinearities and dynamic behaviors, enabling adaptive control strategies tailored to specific operational profiles.</li> </ul> <p>These control strategies collectively aim to address the multi-faceted challenges presented by the multi-link mechanism, ensuring robustness, adaptability, and high performance in real-world operational scenarios.</p> <p><br/> <br/></p> <p>Each phase of this project is designed to not only build on the previous experiences but also to introduce and overcome new complexities. This systematic escalation ensures a thorough exploration and understanding of each control strategy implemented.</p> <p>I invite you to stay tuned as I document this exciting journey, sharing detailed insights and results from each phase of my exploration into the dynamic realm of multi-link mechanisms. This blog will serve as a chronicle of my learning, challenges, breakthroughs, and, ultimately, the evolution of my understanding of control dynamics. Join me on this adventure as I push the limits of technology and engineering!</p> <p><br/> <br/> <br/></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design">GitHub repository</a>.</h5>]]></content><author><name></name></author><category term="Study_with_Me"/><category term="Simulink"/><category term="Control"/><category term="Controller_Design"/><summary type="html"><![CDATA[An overview of project exploring controller design techniques.]]></summary></entry></feed>