<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> [Controller Design] Day 5: PID Control with Computed Torque Method | Min-Geun Park </title> <meta name="author" content="Min-Geun Park"> <meta name="description" content="Refining multi-link mechanism control using PID techniques combined with the computed torque method for improved precision and dynamic stability."> <meta name="keywords" content="Control Dynamics, Mechatronics, Robotics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="/assets/libs/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="/assets/libs/google-fonts.css"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/icon.png?f1bd8f37a5b2f79c21160a88659d529b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gunee20.github.io/blog/2024/Controller-Design-Day-5/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <link defer rel="stylesheet" href="/assets/libs/styles.min.css"> <link defer rel="stylesheet" href="/assets/libs/swiper-bundle.min.css" integrity="sha256-yUoNxsvX+Vo8Trj3lZ/Y5ZBf8HlBFsB6Xwm7rH75/9E=" crossorigin="anonymous"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-light" href="/"> <span class="name font-weight-bold">Min-Geun</span> <span class="name">Park</span> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About me </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/volunteerings/">Volunteerings </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">[Controller Design] Day 5: PID Control with Computed Torque Method</h1> <p class="post-meta"> Created in June 03, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/simulink"> <i class="fa-solid fa-hashtag fa-sm"></i> Simulink</a>   <a href="/blog/tag/computed-torque"> <i class="fa-solid fa-hashtag fa-sm"></i> Computed_Torque</a>   <a href="/blog/tag/controller-design"> <i class="fa-solid fa-hashtag fa-sm"></i> Controller_Design</a>     ·   <a href="/blog/category/study-with-me"> <i class="fa-solid fa-tag fa-sm"></i> Study_with_Me</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="i-introduction">I. Introduction</h1> <p>On Day 4, I realized that while a PID controller with gravity compensation stabilizes the system faster, it often struggles with overreactions and potential destabilizations. This occurs because it focuses solely on angular positions, neglecting angular velocities.</p> <p>Building on the equations of motion derived on Day 3 for the triple-link mechanism:</p> \[\tau = M(q)\ddot{q} + h(q, \dot{q}) + g(q) \tag{1}\] <p>Where:</p> <ul> <li> <strong>Matrix M (Inertial Term)</strong>: Reflects the Newtonian response to applied forces, considering the inertia of the masses.</li> <li> <strong>Matrix h (Coriolis and Centrifugal Forces)</strong>: Accounts for forces due to system velocities and rotational dynamics.</li> <li> <strong>Matrix g (Gravitational Term)</strong>: Represents the gravitational forces acting on each segment.</li> </ul> <p>Today, I introduce a nonlinear control system that combines a PID controller with the computed torque method. This system tackles the nonlinear dynamics effectively, compensating for gravity and dynamic forces while integrating displacement and velocity feedback. This approach, known as feedback linearization, linearizes the control by canceling out nonlinearities, enhancing system stability and tracking accuracy.</p> <p>The updated methodology reduces the need for extensive parameter tuning and improves response times, making the system more reliable and user-friendly. It is particularly suited for advanced robotics and precision engineering applications where accuracy and dynamic performance are crucial.</p> <p>The revised block diagrams in Figures 1 and 2 illustrate how the computed torque method enhances the PID controller by leveraging the system’s full dynamics to accurately predict and correct disturbances. These diagrams are referenced from Dr. Jun Ueda’s lecture slides.</p> <ol> <li> <p><strong>Linearized Dynamics:</strong> The linearized system dynamics are introduced using the equation:</p> \[\tau = M(q)\ddot{q}' + h(q, \dot{q}) + g(q) \tag{2}\] <p>This formula for \(\tau\), based on the computed input \(\ddot{q}'\), quantifies the total force required to achieve the control objectives. The dynamics without control input adjustment, given by Equation 1, are aligned with this formulation to yield:</p> \[M(q)\ddot{q}' + h(q, \dot{q}) + g(q) = M(q)\ddot{q} + h(q, \dot{q}) + g(q) \Rightarrow \ddot{q}' = \ddot{q} \tag{3}\] <p>This result indicates that under ideal control conditions, where the system accurately follows the control input, \(\ddot{q}'\) aligns with the actual acceleration \(\ddot{q}\) needed to match the desired trajectory, thereby confirming that the new control input effectively compensates for all dynamic forces impacting the system.</p> </li> <li> <p><strong>Input Through PID Controller:</strong> The new input \(\ddot{q}'\) is formulated using a PID controller to correct the error, described by the equation:</p> \[\ddot{q}' = \ddot{q}_d + K_d(\dot{q}_d - \dot{q}) + K_p(q_d - q) + K_i\int{(q_d - q)}dt \tag{4}\] <p>Using Equations 3 and 4, the dynamics correction can be expressed as:</p> \[(\ddot{q}_d - \ddot{q}) + K_d(\dot{q}_d - \dot{q}) + K_p(q_d - q) + K_i\int{(q_d - q)}dt \tag{5}\] </li> <li> <p><strong>Define the Error Dynamics:</strong> The tracking error is foundational for deriving the system’s dynamics, defined by:</p> \[e = q_d - q \tag{6}\] <p>This definition facilitates the expression of derivatives in terms of error:</p> \[\dot{e} = \dot{q}_d - \dot{q}, \quad \ddot{e} = \ddot{q}_d - \ddot{q} \tag{7}\] </li> <li> <p><strong>Error Dynamics Equation:</strong> Derived from Equation 5 by substituting Equations 6 and 7, the full error dynamics is given by:</p> \[\ddot{e} + K_d\dot{e} + K_pe + K_i \int{e}dt = 0 \tag{9}\] <p>This equation establishes the control dynamics under the implemented inputs, serving as a crucial indicator for system stability.</p> </li> <li> <p><strong>Stability Analysis:</strong> The stability of the system is evaluated using the <a href="https://en.wikipedia.org/wiki/Routh%E2%80%93Hurwitz_stability_criterion" rel="external nofollow noopener" target="_blank">Routh–Hurwitz criterion</a>, which is a well-established method for determining the stability of linear control systems. According to this criterion, the system is considered stable if:</p> \[K_dK_p &gt; K_i \tag{8}\] <p>This inequality must hold to ensure that the system approaches stability, meaning that as time approaches infinity, the error effectively reduces to zero:</p> \[t \rightarrow \infty \Rightarrow e \rightarrow 0.\] </li> </ol> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system">1. Overall System</h3> <p>The overall system is illustrated in Figure 3. As observed, the system architecture bears resemblance to a traditional PID control setup but incorporates additional subsystems and components to enhance functionality. These new elements are the “MUX (Red box)” and “DEMUX (Blue box)”, which play critical roles in handling signal matrices within the control loop.</p> <ul> <li> <p><strong>MUX (Red box)</strong>: The Multiplexer (MUX) is used to combine multiple single signals into a single matrix. This is particularly useful in control systems like ours where multiple input signals need to be processed simultaneously in a compact form. In Simulink, a MUX block simplifies system connections by aggregating several input lines into one output, feeding into systems that require a single input stream containing multiple signals.</p> </li> <li> <p><strong>DEMUX (Blue box)</strong>: Conversely, the Demultiplexer (DEMUX) is used to split a matrix into its component single signals. This is essential for systems that process signals in a matrix form but then require individual signal handling downstream. In Simulink, the DEMUX block facilitates the distribution of a single input containing multiple data points into multiple outputs, which can then be directed to specific parts of the system.</p> </li> </ul> <p>By channeling matrices through a “Computed Torque” subsystem using these blocks, the system is able to compute and output a new feedback torque that is more accurately aligned with the dynamic requirements of the controlled process.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/03_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption"> Figure 3. Schematic of the Multi-Link Mechanism Control System. </div> <h3 id="2-computed-torque-method-block">2. Computed Torque Method Block</h3> <p>Calculating torque through circuit design can be complex and time-consuming. Similar to the gravity calculation block described on Day 4, the computed torque method block simplifies this process. As depicted in Figure 4 and detailed through MATLAB scripts in Figures 5-7, I utilize “MATLAB Function blocks” within the computed torque block. These blocks allow me to script MATLAB code directly to compute each term of Equation 1. It’s important to note that I used a Matrix multiplication block instead of an element-wise multiplication block because Equation 1 involves matrix calculations, necessitating proper alignment and dimension matching of matrices.</p> <ul> <li> <p><strong>\(M(q)\)</strong>: This block computes the mass matrix (M) from Equation 1, which is critical as it reflects the system’s inertia. The matrix \(M\) is derived by partially differentiating Equation 1 with respect to each angular acceleration.</p> </li> <li> <p><strong>\(h(q, \dot{q})\)</strong>: This block calculates the Coriolis and centrifugal forces, represented as the second term in Equation 1. These dynamic forces are crucial for accurately modeling the behavior of rotating systems. The matrix \(h\) is obtained by isolating these forces in Equation 1, which can be done by subtracting \(M(q)\ddot{q} + g(q)\) from the total torque \(\tau\).</p> </li> <li> <p><strong>\(g(q)\)</strong>: This block computes the gravitational forces, consistent with the gravity block used on Day 4. This ensures that gravitational effects are accurately integrated into the torque computation. The matrix \(g\) is derived by isolating the gravitational term in Equation 1, which involves differentiating the gravitational components and then reintegrating them into the model.</p> </li> </ul> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/04_computed_torque_method.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 4. Computed Torque Method Block, illustrating the integration of MATLAB Function blocks for computing torque components. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/05_block_M.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/06_block_h.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/07_block_g.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 5 - 7. MATLAB Script for MATLAB Function Blocks for M, h, and g matrices. </div> <p>It’s important to note that \(q1\) has been defined as \(q(2) + \frac{\pi}{2}\). This definition is used because \(\theta_1\) is set as \(\theta_1 = \frac{\pi}{2} + q_1\) on Day 3.</p> <h1 id="iii-simulation">III. Simulation</h1> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the multi-link mechanism control system. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h3 id="1-tracking">1. Tracking</h3> <h5 id="a-no-pid-input">a) No PID Input</h5> <p>Initially, I set all the gains of the PID controller to zero to evaluate whether the computed torque block alone could effectively track the reference input. The results indicated that without the PID gains, the system failed to track the reference input and could not stabilize. I extended the simulation to 10,000 seconds, but the system remained unstable throughout, exhibiting behavior akin to an upside-down, slowly oscillating triple-link mechanism, which also showed signs of chaotic dynamics. This instability likely stems from the absence of error correction typically provided by the PID controller. The simulation video and the graph depicting each joint’s parameters are presented in Video 1 and Figure 8, respectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/01_no_PID_input.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 1. Tracking of the Triple-Link Mechanism without PID input. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/08_No_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 8. Graphs of Joint Parameters without PID input. </div> <h5 id="b-varying-pid-gains">b) Varying PID gains</h5> <h6 id="1-k_p--01-k_i--0001-k_d--001">1) \(K_p = 0.1, K_i = 0.001, K_d = 0.01\)</h6> <p>I began with very small PID controller gains, anticipating that the results would be similar to those without PID input. However, the outcome was entirely different from what I had expected. The system rotated counterclockwise and was not fully chaotic. While Base 1, Link 1, and Link 3 became marginally stable, Link 2 remained unstable. Video 2 and Figure 9 depict the initial phase of the triple-link mechanism, while Video 3 and Figure 10 showcase the middle phase.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/02_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/03_tracking_1_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 2 - 3. Tracking of the Triple-Link Mechanism with \( K_p = 0.1, K_i = 0.001, K_d = 0.01 \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/09_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/10_tracking_1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 9 - 10. Graphs of Joint Parameters with \( K_p = 0.1, K_i = 0.001, K_d = 0.01 \). </div> <h6 id="2-k_p--1-k_i--001-k_d--01">2) \(K_p = 1, K_i = 0.01, K_d = 0.1\)</h6> <p>When I increased the gains slightly, the multi-link mechanism stabilized after oscillating for an extended period. An interesting observation was the lag in oscillation between the links. The maximum amplitude of Link 1 occurs first, followed by Link 2, and then Link 3. Also, intriguingly, when all the links are oscillating, the motion resembles that of a tail. Video 4 and Figure 11 display the results of the simulation.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/04_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 4. Tracking of the Triple-Link Mechanism with \( K_p = 1, K_i = 0.01, K_d = 0.1 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/11_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 11. Graphs of Joint Parameters with \( K_p = 1, K_i = 0.01, K_d = 0.1 \). </div> <h6 id="3-k_p--100-k_i--1-k_d--20">3) \(K_p = 100, K_i = 1, K_d = 20\)</h6> <p>I further increased the gain, resulting in rapid stabilization of the multi-link mechanism. An interesting behavior observed was that the multi-link mechanism maintained an almost straight posture during its movement. Video 5 and Figure 12 display the results of the simulation.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/05_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 5. Tracking of the Triple-Link Mechanism with \( K_p = 100, K_i = 1, K_d = 20 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 12. Graphs of Joint Parameters with \( K_p = 100, K_i = 1, K_d = 20 \). </div> <h6 id="4-k_p--106-k_i--104-k_d--2times105">4) \(K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>An interesting discovery was that although I could increase the PID gains indefinitely, the system’s performance has a distinct upper limit. Despite higher PID gains, performance actually deteriorated. It appears that for this controller, iterative testing is necessary to determine the optimal set of gains. Video 6 and Figure 12 compare the PID settings of \((K_p, K_i, K_d) = (100, 1, 20) and (10^6, 10^4, 2 \times 10^5)\).</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/06_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 6. Comparison of performance with PID gains of \( (100, 1, 20) \) versus \( (10^6, 10^4, 2\times10^5) \). </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/12_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/13_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 13. Interactive graphs comparing PID gains of \( (100, 1, 20) \) to \( (10^6, 10^4, 2 \times 10^5) \). </div> <h6 id="5-k_p--10-k_i--300-k_d--20-unstable-system">5) \(K_p = 10, K_i = 300, K_d = 20\) (Unstable System)</h6> <p>In the final phase of my tracking experiment, I simulated an unstable system characterized by the condition \(K_dK_p &lt; K_i\). As demonstrated in Video 7, Link 1, which experienced the most significant initial perturbation, exhibited signs of instability first. This instability progressively influenced Link 2 and Link 3, causing their perturbations to intensify. Ultimately, all links displayed unstable behavior. Figure 14 vividly illustrates this phenomenon, showing the angular positions of Link 2 and Link 3 diverging over time.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/07_tracking_5.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 7. Tracking of the Unstable Triple-Link Mechanism with \( K_p = 10, K_i = 300, K_d = 20 \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/14_tracking_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 14. Graphs of Joint Parameters with \( K_p = 10, K_i = 300, K_d = 20 \). </div> <h3 id="2-regulation">2. Regulation</h3> <p>For the controller regulation simulation, I configured the initial joint PID gains to (100, 1, 20), which yielded the best performance in the tracking simulation. Additionally, I set the PID gains for the moving base to (10, 0.01, 4).</p> <h6 id="1-rho_0--2700kgm3-f--100n">1) \(\rho_0 = 2700kg/m^3, F = 100N\)</h6> <p>Compared to the PID + gravity compensation controller, there was less force propagation through the links, with most of the force being compensated by the rotation of Link 3, and the base remaining almost stationary. Video 7 and Figure 14 compare the simulations of PID + Gravity Compensation (PID + g) and PID + Computed Torque (PID + t).</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/08_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 8. Regulation Comparison Under 100N Disturbance: PID with Gravity Compensation vs. PID with Computed Torque. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/15_regulation_1_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 15. Interactive Graphs of PID with Gravity Compensation vs. PID with Computed Torque. </div> <h6 id="2-rho_0--2700kgm3-f--500n">2) \(\rho_0 = 2700kg/m^3, F = 500N\)</h6> <p>In Video 8, the “PID + gravity compensation” method enabled force to propagate through the links, requiring all the actuators at the joints to exert a similar effort to stabilize the system. In contrast, Video 9 demonstrates the “PID + computed torque” method, where force propagation was significantly reduced, concentrating the effort predominantly on Joint 3. This led to a longer stabilization time for the system, as the impact was not effectively absorbed by all the links and the base, but was largely managed by link 3. The differences in actuator displacement, as shown in Figure 15 and Figure 16, related to the difference in the distribution of impact absorption between the two methods.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/11_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/10_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 9 - 10. Triple-Link Mechanism Simulations with PID Control: PID + gravity compensation vs. PID + computed torque. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/17_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 16 - 17. Actuator Displacement Comparison in Triple-Link Mechanism Simulations: PID + gravity compensation vs. PID + computed torque. </div> <h6 id="3-rho_0--2700kgm3-f--500n-k_p--106-k_i--104-k_d--2times105">3) \(\rho_0 = 2700kg/m^3, F = 500N, K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>As observed during the tracking simulation, I was able to set the PID gains extremely high. With these settings, the regulation was effectively managed; the links hardly moved. Interestingly, the base moved toward the left, opposite to the direction of the external force. This is due to the efforts of the joints. The results are showcased in Video 10 and Figure 17.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/11_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 11. Regulation of the Triple-Link Mechanism with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 500N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/18_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 18. Graphs of Joint Parameters with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 500N \). </div> <h6 id="3-rho_0--2700kgm3-f--50000n-k_p--106-k_i--104-k_d--2times105">3) \(\rho_0 = 2700kg/m^3, F = 50000N, K_p = 10^6, K_i = 10^4, K_d = 2\times10^5\)</h6> <p>However, as demonstrated in Video 11 and Figure 18, if the force is sufficiently strong, the base moves to the right, aligning with the direction of the external force.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/12_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 12. Regulation of the Triple-Link Mechanism with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5, F = 50000N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/19_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 19. Graphs of Joint Parameters with \( K_p = 10^6, K_i = 10^4, K_d = 2\times 10^5 , F = 50000N\). </div> <h6 id="4-rho_0--2700kgm3-f--1n-k_p--10-k_i--300-k_d--20-unstable-system">4) \(\rho_0 = 2700kg/m^3, F = 1N, K_p = 10, K_i = 300, K_d = 20 (Unstable System)\)</h6> <p>Similar to the tracking simulation, I also simulated the regulation of an unstable system, defined by the condition \(K_dK_p &lt; K_i\). In this configuration, even a minor perturbation can cause the system to diverge rapidly. This sensitivity to disturbances highlights the challenges of controlling such a system. In our Video 12 and Figure 20, you can observe how these tiny perturbations escalated, leading to increasingly significant deviations from the stable state.</p> <div style="width: 80%; margin: 0 auto; display: flex; justify-content: center;"> <div> <figure> <video src="/assets/video/posts/2024-06-03-Controller-Design-Day-5/13_regulation_5.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 12. Regulation of the Unstable Triple-Link Mechanism with \( K_p = 10, K_i = 30, K_d = 20, F = 1N \). </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-480.webp 480w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-800.webp 800w,/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-03-Controller-Design-Day-5/20_regulation_5.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 20. Graphs of Joint Parameters with \( K_p = 10, K_i = 300, K_d = 20, F = 1N \). </div> <h1 id="iv-moving-forward">IV. Moving Forward</h1> <p>Today, I enhanced the control of a fully actuated multi-link mechanism using a PID controller integrated with the computed torque method. Compared to standalone PID control and PID with gravity compensation, this approach demonstrated superior performance. One notable advantage is that this system achieves full linearity through feedback linearization, simplifying the control loop.</p> <p>During the simulation, I observed two key findings: First, while the gains of the PID controller can be increased significantly, this does not necessarily translate to improved performance. Second, although the computed torque method markedly enhances system performance, it does not address inherent PID limitations such as the potential for overreaction. This suggests that while the PID controller remains a component, some of its fundamental drawbacks persist.</p> <p>Through Days 4 and 5, I studied and implemented the feedback linearization method for nonlinear systems. Now, equipped with this understanding, I am eager to explore a variety of other nonlinear control strategies. Stay tuned for more updates as we continue to explore the fascinating world of multi-link mechanisms and tackle the challenges associated with controlling chaotic systems!</p> <p><br> <br> <br></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design" rel="external nofollow noopener" target="_blank">GitHub repository</a>.</h5> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-4/">[Controller Design] Day 4: PID Control with Gravity Compensation Method</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-6/">[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-2/">[Controller Design] Day 2: PID Controller</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-1/">[Controller Design] Day 1: Creating the Multibody System Using Simscape</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-3/">[Controller Design] Day 3: The Equations of Motion and the Jacobians of the Triple-Link Mechanism</a> </li> <div id="disqus_thread" style="max-width: 800px; margin: 0 auto;"> <script type="text/javascript">var disqus_shortname="mingeunpark",disqus_identifier="/blog/2024/Controller-Design-Day-5",disqus_title="[Controller Design] Day 5: PID Control with Computed Torque Method";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by Disqus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Min-Geun Park. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Last updated: July 23, 2024. </div> </footer> <script src="/assets/libs/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="/assets/libs/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="/assets/libs/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="/assets/libs/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="/assets/libs/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/libs/tex-mml-chtml.min.js"></script> <script defer src="/assets/libs/polyfill.min.js"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script defer src="/assets/libs/index.min.js"></script> <script defer src="/assets/libs/swiper-element-bundle.min.js" integrity="sha256-BPrwikijIybg9OQC5SYFFqhBjERYOn97tCureFgYH1E=" crossorigin="anonymous"></script> </body> </html>