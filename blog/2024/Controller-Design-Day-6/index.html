<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> [Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang | Min-Geun Park </title> <meta name="author" content="Min-Geun Park"> <meta name="description" content="A Mechanical Engineer with a keen interest in controller design. "> <meta name="keywords" content="Control Dynamics, Mechatronics, Robotics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="/assets/libs/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="/assets/libs/google-fonts.css"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/icon.png?f1bd8f37a5b2f79c21160a88659d529b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gunee20.github.io/blog/2024/Controller-Design-Day-6/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <link defer rel="stylesheet" href="/assets/libs/styles.min.css"> <link defer rel="stylesheet" href="/assets/libs/swiper-bundle.min.css" integrity="sha256-yUoNxsvX+Vo8Trj3lZ/Y5ZBf8HlBFsB6Xwm7rH75/9E=" crossorigin="anonymous"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-light" href="/"> <span class="name font-weight-bold">Min-Geun</span> <span class="name">Park</span> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About me </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/volunteerings/">Volunteerings </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang</h1> <p class="post-meta"> Created in June 20, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/simulink"> <i class="fa-solid fa-hashtag fa-sm"></i> Simulink</a>   <a href="/blog/tag/state-feedback-control"> <i class="fa-solid fa-hashtag fa-sm"></i> State_Feedback_Control</a>   <a href="/blog/tag/pole-placement-method"> <i class="fa-solid fa-hashtag fa-sm"></i> Pole_Placement_Method</a>   <a href="/blog/tag/bang-bang-control"> <i class="fa-solid fa-hashtag fa-sm"></i> Bang-Bang_Control</a>     ·   <a href="/blog/category/study-with-me"> <i class="fa-solid fa-tag fa-sm"></i> Study_with_Me</a>   <a href="/blog/category/controller-design"> <i class="fa-solid fa-tag fa-sm"></i> Controller_Design</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Before diving into the technicalities, I must address a fundamental challenge encountered while implementing nonlinear controllers for multi-link mechanisms: the inherent high nonlinearity of these systems. This complexity can significantly complicate the design and effectiveness of controllers, posing a substantial barrier to achieving desired performance and stability.</p> <p>Given these challenges, and with the goal of this post to introduce and explore various controller designs, I have decided to simplify the scenario slightly by reducing the number of links in my mechanisms. This approach will help in isolating and understanding the specific impacts and benefits of each control strategy without the overwhelming interactions of a highly complex system.</p> <h1 id="i-introduction">I. Introduction</h1> <p>State Feedback Control is a fundamental technique in modern control theory that forms the basis for many advanced control strategies, including the Linear Quadratic Regulator (LQR). This approach allows me to precisely manipulate the behavior of a system by feeding back information about its current state. In this post, I’ll explore the principles, mathematics, and applications of State Feedback Control.</p> <h2 id="a-state-feedback-control">A. State Feedback Control</h2> <h3 id="1-principles-of-state-feedback-control">1. Principles of State Feedback Control</h3> <h5 id="a-system-model">a) System Model</h5> <p>State Feedback Control is designed for systems that can be described by a state-space model:</p> \[\dot{x} = Ax + Bu \tag{1}\] \[y = Cx + Du \tag{2}\] <p>Where:</p> <ul> <li>\(x\) is the state vector</li> <li>\(u\) is the control input vector</li> <li>\(y\) is the output vector</li> <li>\(A\), \(B\), \(C\), and \(D\) are matrices defining the system dynamics</li> </ul> <h5 id="b-control-law">b) Control Law</h5> <p>The core idea of State Feedback Control is to make the control input a linear function of the state:</p> \[u = -Kx \tag{3}\] <p>Here, \(K\) is the feedback gain matrix that I design to achieve desired system behavior.</p> <h3 id="2-equation-of-motion">2. Equation of Motion</h3> <p><a id="Equation4"></a></p> <p>To understand state feedback control in practice, let’s consider the example of a pendulum mounted on a cart. The following diagram illustrates the free body diagram of this system:</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/01_free_body_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 1. Free Body Diagram of a Pendulum on Cart. </div> <p>The equation of motion for this system is:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \cos(\theta_1) \\ -\frac{1}{2}m_1 l_1 \cos(\theta_1) &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} + \begin{bmatrix} \frac{1}{2}m_1 l_1 \sin(\theta_1) \dot{\theta}_1^2 \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ - \frac{1}{2}g m_1 l_1\sin(\theta_1) \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix} \tag{4}\] <p>Where:</p> <ul> <li>\(m_0\) and \(m_1\) are the masses of the cart and pendulum</li> <li>\(l_1\) is the length of the pendulum</li> <li>\(\theta_1\) is the angle of the pendulum</li> <li>\(F\) is the force applied to the cart</li> <li>\(g\) is the acceleration due to gravity</li> </ul> <p>You can find the detailed calculation in <a href="/blog/2024/Controller-Design-Day-3/">Day 3</a>.</p> <p><a id="Pendulum_Linearization"></a></p> <h3 id="3-linearization">3. Linearization</h3> <p>To implement state feedback control, I need a linear state-space representation of the system. I linearize the equation around \(\theta_1 \approx 0\) using these approximations:</p> \[\left\{ \begin{array}{l} \sin(\theta_1) \approx \theta_1 \\ \cos(\theta_1) \approx 1 \\ \dot{\theta}_1^2 \approx 0 \end{array} \right.\] <p>After linearization, the system equation becomes:</p> \[\begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \\ -\frac{1}{2}m_1 l_1 &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} - \begin{bmatrix} 0 \\ \frac{1}{2}g m_1 l_1\theta_1 \end{bmatrix} = \begin{bmatrix} F \\ 0 \end{bmatrix} \tag{5}\] <h3 id="4-state-space-representation">4. State Space Representation</h3> <p>To convert the linearized equations into a state space representation, I isolate the accelerations \(\ddot{x}\) and \(\ddot{\theta_1}\):</p> \[\begin{align*} \begin{bmatrix} \ddot{x} \\ \ddot{\theta}_1 \end{bmatrix} &amp;= \begin{bmatrix} m_0 + m_1 &amp; -\frac{1}{2}m_1 l_1 \\ -\frac{1}{2}m_1 l_1 &amp; \frac{1}{3}l_1^2 m_1 \end{bmatrix}^{-1} \left( \begin{bmatrix} F \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ \frac{1}{2}g m_1 l_1 \theta_1 \end{bmatrix} \right) \\ &amp;= \begin{bmatrix} 0 &amp; \frac{3gm_1}{4m_0+m_1} \\ 0 &amp; \frac{6g(m_0+m_1)}{l_1(4m_0+m_1)} \end{bmatrix} \begin{bmatrix} x \\ \theta_1 \end{bmatrix} + \begin{bmatrix} \frac{4}{4m_0+m_1} \\ \frac{6}{l_1(4m_0+m_1)} \end{bmatrix}F\tag{6} \end{align*}\] <p>I then express the system in state space form by setting \(x_1 = x, x_2 = \theta_1, x_3 = \dot{x}\), and \(x_4 = \dot{\theta_1}\):</p> \[\dot{x} = \begin{bmatrix} \dot{x}_1 \\ \dot{x}_2 \\ \dot{x}_3 \\ \dot{x}_4 \end{bmatrix} = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; \frac{3gm_1}{4m_0+m_1} &amp; 0 &amp; 0 \\ 0 &amp; \frac{6g(m_0+m_1)}{l_1(4m_0+m_1)} &amp; 0 &amp; 0 \end{bmatrix} \begin{bmatrix} x_1 \\ x_2 \\ x_3 \\ x_4 \end{bmatrix} + \begin{bmatrix} 0 \\ 0 \\ \frac{4}{4m_0+m_1} \\ \frac{6}{l_1(4m_0+m_1)} \end{bmatrix}F \tag{7}\] <p>For my specific system with \(m_0 = 0.0027\), \(m_1 = 0.0378\), and \(l_1 = 0.14\), I get:</p> \[\dot{x} = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 22.89 &amp; 0 &amp; 0 \\ 0 &amp; 350.36 &amp; 0 &amp; 0 \end{bmatrix} \begin{bmatrix} x_1 \\ x_2 \\ x_3 \\ x_4 \end{bmatrix} + \begin{bmatrix} 0 \\ 0 \\ 82.30 \\ 881.83 \end{bmatrix}F\] <p>The output matrix \(y\) is defined as:</p> \[y = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \end{bmatrix}\] <p>Thus, my state space matrices \(A\), \(B\), \(C\), and \(D\) are:</p> \[A = \begin{bmatrix} 0 &amp; 0 &amp; 1 &amp; 0 \\ 0 &amp; 0 &amp; 0 &amp; 1 \\ 0 &amp; 22.89 &amp; 0 &amp; 0 \\ 0 &amp; 350.36 &amp; 0 &amp; 0 \end{bmatrix}, B = \begin{bmatrix} 0 \\ 0 \\ 82.30 \\ 881.83 \end{bmatrix}, C = \begin{bmatrix} 1 &amp; 0 &amp; 0 &amp; 0 \\ 0 &amp; 1 &amp; 0 &amp; 0 \end{bmatrix}, D = 0\] <h3 id="5-designing-the-feedback-gain-matrix">5. Designing the Feedback Gain Matrix</h3> <p>When designing the feedback gain matrix \(K\) for state feedback control using the pole placement method, two key aspects need to be considered:</p> <ol> <li>The pole placement method itself, which allows me to achieve desired closed-loop dynamics.</li> <li>The controllability of the system, which is a prerequisite for successful pole placement.</li> </ol> <p>Let’s explore each of these in detail:</p> <h5 id="a-pole-placement-method">a) Pole Placement Method</h5> <p>The pole placement method is a powerful technique for designing the feedback gain matrix \(K\) in state feedback control. This method allows me to directly specify the desired eigenvalues of the closed-loop system, which in turn determines its dynamic response characteristics.</p> <p>Here’s how it works:</p> <ol> <li> <p><strong>Closed-loop System</strong>: When I apply the state feedback control law \(u = -Kx\) to my system \(\dot{x} = Ax + Bu\), I get the closed-loop system:</p> \[\dot{x} = (A - BK)x \tag{8}\] </li> <li> <p><strong>Eigenvalues</strong>: The eigenvalues of \((A - BK)\) determine the system’s stability and transient response. These are the roots of the characteristic equation:</p> \[det(sI - (A - BK)) = 0 \tag{9}\] </li> <li> <p><strong>Desired Poles</strong>: I choose a set of desired eigenvalues \(\{\lambda_1, \lambda_2, ..., \lambda_n\}\) based on my performance requirements (stability, settling time, overshoot, etc.).</p> </li> <li> <p><strong>Characteristic Polynomial</strong>: I form the desired characteristic polynomial:</p> \[\alpha(s) = (s - \lambda_1)(s - \lambda_2)...(s - \lambda_n) \tag{10}\] </li> <li> <p><strong>Solving for K</strong>: I then solve for \(K\) by equating the coefficients of \(\alpha(s)\) with those of \(det(sI - (A - BK))\).</p> </li> </ol> <p>For example, in a second-order system, if I want the closed-loop poles at \(s = -2 \pm j2\), my desired characteristic polynomial would be:</p> \[\alpha(s) = s^2 + 4s + 8 \tag{11}\] <p>I would then solve for \(K\) to make \(det(sI - (A - BK))\) equal to this polynomial.</p> <p>The pole placement method gives me direct control over the system’s eigenvalues, allowing me to shape its response precisely. However, it requires that the system be completely state controllable.</p> <h5 id="b-controllability">b) Controllability</h5> <p>Controllability is a fundamental concept in control theory. A system is said to be controllable if it’s possible to transfer the system from any initial state to any desired final state within a finite time interval using the available control inputs.</p> <p>For a linear time-invariant system described by the state-space equations:</p> \[\dot{x} = Ax + Bu\] <p>The system is controllable if and only if the controllability matrix:</p> \[C = [B \quad AB \quad A^2B \quad ... \quad A^{n-1}B]\] <p>has full rank, where n is the number of states.</p> <h5 id="c-checking-controllability-in-matlab">c) Checking Controllability in MATLAB</h5> <p>MATLAB provides simple functions to check the controllability of a system. Here’s how you can do it:</p> <ol> <li> <p>First, create the state-space model:</p> <div class="language-matlab highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">sys</span> <span class="o">=</span> <span class="n">ss</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <p>Use the <code class="language-plaintext highlighter-rouge">ctrb</code> function to compute the controllability matrix:</p> <div class="language-matlab highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">Co</span> <span class="o">=</span> <span class="n">ctrb</span><span class="p">(</span><span class="n">sys</span><span class="p">);</span> <span class="p">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">defined</span> <span class="n">a</span> <span class="nb">system</span>

<span class="n">Co</span> <span class="o">=</span> <span class="n">ctrb</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span> <span class="p">//</span> <span class="n">If</span> <span class="n">you</span> <span class="n">have</span> <span class="n">the</span> <span class="n">matrix</span> <span class="n">A</span> <span class="nb">and</span> <span class="n">B</span>
</code></pre></div> </div> </li> <li> <p>Check the rank of the controllability matrix:</p> <div class="language-matlab highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">rank_Co</span> <span class="o">=</span> <span class="nb">rank</span><span class="p">(</span><span class="n">Co</span><span class="p">);</span>
</code></pre></div> </div> </li> <li> <p>Compare the rank with the number of states.</p> </li> </ol> <h3 id="6-effects-of-state-feedback">6. Effects of State Feedback</h3> <ol> <li> <strong>Stability</strong>: Proper choice of \(K\) can stabilize an unstable system.</li> <li> <strong>Transient Response</strong>: I can shape the system’s response speed and overshoot.</li> <li> <strong>Steady-State Error</strong>: While basic state feedback doesn’t guarantee zero steady-state error, it can be combined with integral action to achieve this.</li> </ol> <h3 id="7-implementing-pole-placement-in-matlab">7. Implementing Pole Placement in MATLAB</h3> <p>MATLAB provides a straightforward way to implement the pole placement method using the <code class="language-plaintext highlighter-rouge">place</code> function. This function calculates the state-feedback gain matrix \(K\) for desired closed-loop pole locations.</p> <h5 id="a-using-the-place-function">a) Using the <code class="language-plaintext highlighter-rouge">place</code> Function</h5> <p>The basic syntax of the <code class="language-plaintext highlighter-rouge">place</code> function is:</p> <div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">K</span> <span class="o">=</span> <span class="n">place</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">P</span><span class="p">)</span>
</code></pre></div></div> <p>Where:</p> <ul> <li>\(A\) and \(B\) are the system matrices from the state-space model</li> <li>\(P\) is a vector containing the desired closed-loop pole locations</li> <li>\(K\) is the resulting state-feedback gain matrix</li> </ul> <h2 id="b-bang-bang-control-for-swing-up-motion">B. Bang-Bang Control for Swing-Up Motion</h2> <p>While state feedback control is effective for balancing the inverted pendulum near its upright position, it may not have enough control authority to bring the pendulum up from its downward position. This is where Bang-Bang control comes into play for the swing-up motion.</p> <h3 id="1-principle-of-bang-bang-control">1. Principle of Bang-Bang Control</h3> <p>Bang-Bang control, also known as on-off control, is a feedback control strategy that switches abruptly between two states. In the context of an inverted pendulum, it involves applying maximum positive or negative force to the cart to swing the pendulum up.</p> <p>The control law for Bang-Bang control can be expressed as:</p> \[u = \begin{cases} u_{max}, &amp; \text{if } s(x) &gt; 0 \\ -u_{max}, &amp; \text{if } s(x) &lt; 0 \end{cases}\] <p>where \(u\) is the control input (force applied to the cart), \(u_{max}\) is the maximum allowable control input, and \(s(x)\) is a switching function that depends on the system state.</p> <p>For the inverted pendulum system, I can use a simple switching function based on the pendulum’s angular velocity:</p> \[s(x) = \dot{\theta}\] <p>This leads to the control law:</p> \[u = -u_{max} \cdot \text{sign}(\dot{\theta})\] <p>This control strategy ensures that the input force is always in the opposite direction of the pendulum’s angular velocity. Specifically:</p> <ul> <li>When the pendulum is moving clockwise (\(\dot{\theta} &gt; 0\)), a negative force is applied to the cart.</li> <li>When the pendulum is moving counterclockwise (\(\dot{\theta} &lt; 0\)), a positive force is applied to the cart.</li> </ul> <p>This strategy effectively opposes the pendulum’s motion, adding energy to the system and causing the pendulum to swing with increasing amplitude until it approaches the upright position.</p> <p><a id="Modeling"></a></p> <h1 id="ii-modeling">II. Modeling</h1> <h3 id="1-overall-system">1. Overall System</h3> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/02_Overall_System.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption"> Figure 2. Block Diagram of the Control Loop for an Inverted Pendulum System </div> <p>This closed-loop block diagram illustrates the interaction between my controller and the inverted pendulum (my plant). The controller processes the system state and generates a control signal, which in turn affects the pendulum’s behavior.</p> <h3 id="2-input--output-block">2. Input &amp; Output Block</h3> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/03_Input_Output.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Block Diagram of the Input and Output Blocks. </div> <p>My system state is characterized by four variables:</p> <ul> <li>\(x_1 = x\): The cart’s position</li> <li>\(x_2 = \theta\): The pendulum’s angle</li> <li>\(x_3 = \dot{x}\): The cart’s velocity</li> <li>\(x_4 = \dot{\theta}\): The pendulum’s angular velocity</li> </ul> <p>These states are consolidated into a single vector in the input block and disaggregated in the output block, facilitating efficient manipulation within my control loop.</p> <h3 id="3-plant-block">3. Plant Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/04_Plant.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 4. Block Diagram Illustrating the Plant Dynamics of the Inverted Pendulum System. </div> <p>This block encapsulates the dynamics of my inverted pendulum system. It comprises a moving base (the cart) and the pendulum (link 1). The input \(u\) is applied exclusively to the moving base, which subsequently influences the pendulum’s motion.</p> <h3 id="4-controller-block">4. Controller Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/05_Controller.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Block Diagram Illustrating the Controller Components. </div> <p>The controller is the core of my system, responsible for maintaining the pendulum’s upright position and stability. Let’s break down its key components:</p> <ul> <li> <strong>Red box (Switch)</strong>: This block determines which feedback value will be chosen based on the angular displacement of link 1. Stabilization feedback is applied when the angular displacement is between \(-30^{\circ} &lt; \theta &lt; 30^{\circ}\). Otherwise, Swing-Up control feedback is applied.</li> <li> <strong>Blue box (Saturation)</strong>: This block limits the feedback’s magnitude.</li> </ul> <p>The controller switches to stabilization control when the pendulum angle is between -30° and 30° from vertical. The maximum control force is limited to 0.45 N.</p> <h3 id="5-bang-bang-block">5. Bang-Bang Block</h3> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/06_Bang_Bang.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 6. Block Diagram Illustrating the Bang-Bang Control Block for Swing-Up Control. </div> <p>For swing-up control, I employ a bang-bang control strategy. This simple yet effective approach is used to bring the pendulum from its downward position to near the upright position, where the state feedback controller can then take over for stabilization.</p> <p>The bang-bang control block determines the control input based on the pendulum’s angular velocity. It applies the maximum force in either the positive or negative direction, depending on the sign of the angular velocity. This creates a pumping effect that increases the pendulum’s energy, causing it to swing up.</p> <h1 id="iii-simulation">III. Simulation</h1> <p>For my simulation, I aimed to create a critically damped system where all poles are positioned on the real axis of the s-plane. However, due to limitations of MATLAB’s <code class="language-plaintext highlighter-rouge">place</code> function, I had to choose poles with multiplicity smaller than rank(B). Since the rank of B is 1, I selected poles with a 0.002 gap, such as -0.000, -0.002, -0.004, -0.006. This approach allowed me to create a system very close to critically damped while satisfying the constraints of the <code class="language-plaintext highlighter-rouge">place</code> function.</p> <h3 id="1-tracking">1. Tracking</h3> <h5 id="a-initial-state-x--0-theta--5circ">a) Initial State: \(x = 0, \theta = 5^{\circ}\)</h5> <p>I first tested with a small initial angle of \(5^{\circ}\) in the initial state. For this small region, linearization was effective and the linear controller could manage the system well. As the poles move farther from the origin, the response becomes faster. The results are shown in Videos 1 - 4 and Figures 7 - 8.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/01_tracking_01.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/02_tracking_02.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/03_tracking_03.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/04_tracking_04.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Videos 1 - 4. State Feedback Controller with \( 5^{\circ} \) Initial Angle. \( s = [-1, -5, -10, -15] \) from left top to right bottom. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/07_tracking_5degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/08_tracking_5degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 7 - 8. Graphs of States with Initial State of \( \theta = 5^{\circ} \) and different pole positions. </div> <h5 id="b-initial-state-x--0-theta--30circ">b) Initial State: \(x = 0, \theta = 30^{\circ}\)</h5> <p>Next, I increased the initial angle to \(\theta = 30^{\circ}\). Compared to the \(5^{\circ}\) initial angle, two different behaviors were observed:</p> <ol> <li>The controller with the smallest pole magnitude (s = -1) couldn’t generate feedback large enough to raise the pendulum, resulting in failure to stabilize.</li> <li>The controller with the largest pole magnitude (s = -15) initially lost some control, showing worse performance compared to the controller with poles at s = -10.</li> </ol> <p>The results are shown in Video 5 and Figures 9 - 10.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/05_tracking_05.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 5. State Feedback Controller with \( 30^{\circ} \) Initial Angle. \( s = [-1, -5, -10, -15] \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/09_tracking_30degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/10_tracking_30degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 9 - 10. Graphs of States with Initial State of \( \theta = 30^{\circ} \) and different pole positions. </div> <p>Through iterative optimization, I found that the controller showed the best performance for \(\theta = 30^{\circ}\) when the poles are at \(s = -12\). The comparisons are shown in Figures 11 and 12.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/11_optimization_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/12_optimization_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 11 - 12. Pole Placement Optimization at Initial State of \( \theta = 30^{\circ} \). </div> <h5 id="c-initial-state-x--0-theta--90circ">c) Initial State: \(x = 0, \theta = 90^{\circ}\)</h5> <p>I increased the initial angle further to \(90^{\circ}\), allowing the swing-up controller to come into play. I tested poles at \(s = [-10, -12, -15, -18]\). Contrary to expectations, the controller with \(s = -15\) showed the best performance. This highlights a limitation of the pole placement method: the optimal controller varies depending on initial states. The results are shown in Video 6 and Figures 13 and 14.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/06_tracking_06.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 6. State Feedback Controller with \( 90^{\circ} \) Initial Angle. \( s = [-10, -12, -15, -18] \). </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/13_tracking_90degree_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/14_tracking_90degree_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 13 - 14. Pole Placement Optimization at Initial State of \( \theta = 90^{\circ} \). </div> <h5 id="d-initial-state-x--0-theta--150circ">d) Initial State: \(x = 0, \theta = 150^{\circ}\)</h5> <p>Issues arose when the initial angle reached \(150^{\circ}\). The system was stable only for a small range of pole positions from \(s = -3\) to \(s = -10\). The results are shown in Video 7.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/07_tracking_07.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 7. State Feedback Controller with \( 150^{\circ} \) Initial Angle. \( s = [-3, -5, -10, -12] \). </div> <h5 id="e-initial-state-x--0-theta--180circ-f--01n">e) Initial State: \(x = 0, \theta = 180^{\circ}, F = 0.1N\)</h5> <p>A similar problem occurred when applying a small force (0.1N) to the stable position (\(\theta = 180^{\circ}\) ). The results are shown in Video 8.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/08_tracking_08.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 8. State Feedback Controller with \( 180^{\circ} \) Initial Position and 0.1N Force. \( s = [-3, -5, -10, -12] \). </div> <p>The issues observed in sections d) and e) may result from the transition between the Bang-Bang controller and the State Feedback Controller. If a pendulum is pushed by a user and loses its position, it could revolve very quickly. When the pendulum’s speed is high, the swing-up control law continues to accelerate the pendulum. As both acceleration and speed increase, the state feedback controller may fail to stabilize the system. This can cause the pendulum to rotate continuously, potentially leading to motor malfunction. Furthermore, finding the optimal controller parameters for these edge cases proves to be challenging.</p> <h3 id="2-regulation">2. Regulation</h3> <h5 id="a-disturbance-f--01n">a) Disturbance \(F = 0.1N\)</h5> <p>The regulation with small disturbance showed similar behavior to the tracking with small initial angle. The controller’s performance improves as the magnitude of poles increases. In this simulation, I used \(s = [-5, -10, -15, -20]\). The results are shown in Video 9 and Figures 15 and 16.</p> <div style="width: 100%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/09_regulation_01.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 9. Regulation performance with 0.1N disturbance for different pole positions: s = [-5, -10, -15, -20]. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/15_regulation_0.1_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/16_regulation_0.1_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 15 - 16. Cart position (x1) and pendulum angle (x2) responses to 0.1N disturbance for different pole positions. </div> <h5 id="b-disturbance-f--1n">b) Disturbance \(F = 1N\)</h5> <p>Lastly, I simulated with a disturbance of 1N and found that if the pendulum moves beyond its linearized region \([-30^{\circ} \leq \theta \leq 30^{\circ}]\), the system becomes unstable. The reason for this was similar to the issue observed in the tracking simulation with large initial angles. When the pendulum’s speed is high, the swing-up control law continues to accelerate the pendulum. As both acceleration and speed increase, the state feedback controller may fail to stabilize the system.</p> <p>For this simulation, I tested four cases, from small to large pole positions: \(s = [-1, -5, -10, -15]\). Similar to the large initial angle tracking, I found a sweet spot that can successfully regulate the system. Smaller pole magnitudes induced behavior similar to understeering, while bigger pole magnitudes led to oversteering. The results are shown in Video 10 and Figures 17 - 18.</p> <div style="width: 100%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/10_regulation_02.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 10. Regulation performance with 1N disturbance for different pole positions: s = [-1, -5, -10, -15]. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/17_regulation_1_x1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/18_regulation_1_x2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figure 17 - 18. Cart position (x1) and pendulum angle (x2) responses to 1N disturbance for different pole positions. </div> <h3 id="3-conclusion">3. Conclusion</h3> <p>Based on the simulations, I concluded that the best pole placement for this system is at \(s = -10\). The controller with this pole position demonstrated good tracking and regulation performance with short settling times. However, even this controller could not regulate the system when the disturbance exceeded 2N, as shown in Video 11 and Figure 19.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-06-20-Controller-Design-Day-6/11_conclusion.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 11. System response to disturbances greater than 2N, demonstrating the limitations of the controller with s = -10. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-480.webp 480w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-800.webp 800w,/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-06-20-Controller-Design-Day-6/19_conclusion.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 19. System response showing instability when subjected to disturbances greater than 2N with the controller at s = -10. </div> <h1 id="iv-conclusion-and-moving-forward">IV. Conclusion and Moving Forward</h1> <p>Through my exploration of state feedback control for the inverted pendulum system, I’ve gained valuable insights into both the strengths and limitations of the pole placement method and Bang-Bang control. My simulations demonstrated the effectiveness of these approaches within certain bounds, but also revealed challenges when dealing with large disturbances or initial conditions.</p> <p>Based on these findings, my next steps will focus on implementing more advanced control strategies to address the limitations I’ve encountered:</p> <ol> <li> <strong>LQR Controller for Stabilization</strong>: I will implement a Linear Quadratic Regulator (LQR) controller, which can be seen as an upgraded version of the pole placement method. LQR offers several advantages: <ul> <li>It provides a systematic way to find the optimal feedback gain matrix.</li> <li>It allows me to balance the trade-off between control effort and state regulation through the Q and R matrices.</li> <li>It often results in more robust control compared to simple pole placement.</li> </ul> <p>By implementing LQR, I aim to achieve better stabilization performance, especially for larger initial angles around the upright position.</p> </li> <li> <strong>Energy Shaping Control for Swing-Up</strong>: To improve upon the Bang-Bang control used for swing-up, I will implement Energy Shaping control. This method offers several benefits: <ul> <li>It provides a smoother control action compared to Bang-Bang control.</li> <li>It explicitly considers the system’s energy, making it well-suited for the swing-up task.</li> <li>It can potentially provide a more reliable transition to the stabilization controller.</li> </ul> <p>With Energy Shaping control, I hope to achieve more consistent swing-up performance and a smoother handover to the stabilization controller.</p> </li> </ol> <p><strong>These advancements should address several of the limitations I observed:</strong></p> <ul> <li>The sensitivity to pole placement that I encountered should be mitigated by the LQR’s systematic approach to gain selection.</li> <li>The challenges in transitioning from swing-up to stabilization control should be reduced with the more sophisticated Energy Shaping method.</li> <li>The overall robustness of the system should improve, potentially allowing me to handle larger disturbances and a wider range of initial conditions.</li> </ul> <p>In my next update, I’ll dive into the theory behind LQR and Energy Shaping control, implement these methods for my inverted pendulum system, and compare their performance against my current pole placement and Bang-Bang control strategies. I’re excited to see how these advanced techniques will improve my inverted pendulum’s behavior across various scenarios!</p> <p>Stay tuned as I continue to push the boundaries of control for this fascinating nonlinear system! <br> <br> <br></p> <h6 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design" rel="external nofollow noopener" target="_blank">GitHub repository</a>.</h6> \[\] </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-7/">[Controller Design] Day7: State Feedbak Control - LQR Controller and Energy Shaping</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-8/">[Controller Design] Day8: Sliding Mode Control</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-5/">[Controller Design] Day 5: PID Control with Computed Torque Method</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-4/">[Controller Design] Day 4: PID Control with Gravity Compensation Method</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-2/">[Controller Design] Day 2: PID Controller</a> </li> <div id="disqus_thread" style="max-width: 800px; margin: 0 auto;"> <script type="text/javascript">var disqus_shortname="mingeunpark",disqus_identifier="/blog/2024/Controller-Design-Day-6",disqus_title="[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by Disqus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Min-Geun Park. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Last updated: August 05, 2024. </div> </footer> <script src="/assets/libs/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="/assets/libs/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="/assets/libs/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="/assets/libs/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="/assets/libs/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/libs/tex-mml-chtml.min.js"></script> <script defer src="/assets/libs/polyfill.min.js"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script defer src="/assets/libs/index.min.js"></script> <script defer src="/assets/libs/swiper-element-bundle.min.js" integrity="sha256-BPrwikijIybg9OQC5SYFFqhBjERYOn97tCureFgYH1E=" crossorigin="anonymous"></script> </body> </html>