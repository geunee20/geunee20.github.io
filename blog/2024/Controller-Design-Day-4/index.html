<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> [Controller Design] Day 4: PID Control with Gravity Compensation Method | Min-Geun Park </title> <meta name="author" content="Min-Geun Park"> <meta name="description" content="Optimizing multi-link mechanism control through advanced PID strategies integrated with gravity compensation method to enhance system response and stability."> <meta name="keywords" content="Control Dynamics, Mechatronics, Robotics"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="/assets/libs/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="/assets/libs/google-fonts.css"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/icon.png?f1bd8f37a5b2f79c21160a88659d529b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://gunee20.github.io/blog/2024/Controller-Design-Day-4/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <link defer rel="stylesheet" href="/assets/libs/styles.min.css"> <link defer rel="stylesheet" href="/assets/libs/swiper-bundle.min.css" integrity="sha256-yUoNxsvX+Vo8Trj3lZ/Y5ZBf8HlBFsB6Xwm7rH75/9E=" crossorigin="anonymous"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-light" href="/"> <span class="name font-weight-bold">Min-Geun</span> <span class="name">Park</span> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About me </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/volunteerings/">Volunteerings </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">[Controller Design] Day 4: PID Control with Gravity Compensation Method</h1> <p class="post-meta"> Created in May 28, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/simulink"> <i class="fa-solid fa-hashtag fa-sm"></i> Simulink</a>   <a href="/blog/tag/gravity-compensation"> <i class="fa-solid fa-hashtag fa-sm"></i> Gravity_Compensation</a>   <a href="/blog/tag/controller-design"> <i class="fa-solid fa-hashtag fa-sm"></i> Controller_Design</a>     ·   <a href="/blog/category/study-with-me"> <i class="fa-solid fa-tag fa-sm"></i> Study_with_Me</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>A PID control system is valued for its straightforward design, as it does not necessitate a detailed understanding of the dynamic equations governing a triple-link mechanism. However, this simplicity can also be a drawback. The system may overreact or destabilize because it does not account for complex dynamics. Additionally, PID controllers often struggle with balancing between faster response and overshoot, and designing an effective system can be challenging due to its inherent limitations in handling nonlinear behaviors.</p> <p>Today, I will introduce the first nonlinear control system that combines a PID controller with gravity compensation method. This approach offers a straightforward yet effective framework for managing a triple-link mechanism, enhancing the simplicity of implementation. By integrating gravity compensation method, this system improves upon traditional PID controllers, specifically addressing the nonlinearities induced by gravitational forces and reducing the settling time.</p> <p>On Day 3, I derived the equations of motion for the triple-link mechanism:</p> \[\tau = M(q)\ddot{q} + h(q, \dot{q}) + g(q)\] <p>Where:</p> <ul> <li> <strong>Matrix M (Inertial Term)</strong>: Represents the Newtonian response of the system to applied forces, accounting for the inertia of the masses.</li> <li> <strong>Matrix h (Coriolis and Centrifugal Forces)</strong>: Quantifies the Coriolis and centrifugal forces, dependent on system velocities and rotational dynamics.</li> <li> <strong>Matrix g (Gravitational Term)</strong>: Accounts for the force due to gravity acting on each mass component.</li> </ul> <p>To compensate for gravity, I extract the \(g\) matrix from the equation of motion and add it to the feedback from the PID controller. The block diagram of this system is shown in Figure 1.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/01_block_diagram.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption"> Figure 1. Block Diagram of the PID Control System with Gravity Compensation Method </div> <h1 id="i-a-multi-link-mechanism-with-a-fixed-base">I. A Multi-Link Mechanism with a Fixed Base</h1> <h3 id="a-overall-system">A. Overall System</h3> <p>The overall system is depicted in Figure 1. This system closely resembles that of Day 2, with the addition of a gravity calculation block. The angular displacement of each joint is fed into both the PID controller block and the gravity calculation block. Each block calculates its own feedback, which is then combined to determine the feedback torque needed to actuate the joints.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/02_fixed_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption"> Figure 2. Schematic of the Multi-Link Mechanism Control System with Fixed Base </div> <h3 id="b-gravity-calculation-block">B. Gravity Calculation Block</h3> <p>The gravity calculation block is relatively straightforward. Calculating the gravity term through circuit design is complex and time-consuming. Instead, I use a “MATLAB Function block,” as illustrated in Figure 2. This block allows me to write a MATLAB script to compute the gravity term, which is detailed in Figure 3.</p> <p>Extracting the gravity term from the equation of motion is straightforward. Given the symbolic representation of the motion equation, I apply partial differentiation with respect to \(g\), the gravitational constant, to isolate the gravity-related terms. After this differentiation, I multiply the result by \(g\) again to reintegrate the gravity constant into the equation. Additionally, I replace \(q_1\) with \(q_1 + \frac{\pi}{2}\) in the equation, as I used \(\theta\) as the variable instead of \(q\), in Day 3.</p> <div style="width: 60%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/03_gravity_block.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 3. Gravity Calculation Block </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/04_gravity_func.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption"> Figure 4. MATLAB Script for MATLAB Function Block for Gravity Calculation </div> <h3 id="c-simulation">C. Simulation</h3> <p>In this section, I explore the simulation, focusing on both tracking and regulation capabilities of the system with fixed base. Through these simulations, I aim to validate the effectiveness of the controllers in maintaining trajectory accuracy (tracking) and stabilizing the system against disturbances (regulation).</p> <h5 id="1-tracking">1) Tracking</h5> <p>Firstly, I set all the gains of the PID controller to zero to test if compensating gravity alone could track the reference input. The results demonstrated that it could neither track the reference input nor stabilize the system. I ran the simulation for up to 10,000 seconds, but the system remained unstable. It resembled an upside-down, slow-moving triple-link mechanism, which also exhibited chaotic behavior. The simulation video and the graph for each joint parameter are displayed in Video 1 and Figure 5, respectively.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/01_fixed_no_PID.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 1. Simulation of Triple-Link Mechanism with Compensating Gravity Only. </div> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/05_fixed_no_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 5. Joint Parameter Graphs for Sole Gravity Compensation Response. </div> <p>Following the initial simulation, I executed a second simulation using the same PID controller settings as on Day 2, incorporating the gravity calculation block as well. This simulation was intended to assess the impact of gravity compensation on the system’s overall performance. The results, as depicted in Video 2 and Figure 6, indicate that gravity compensation slightly enhanced the tracking speed. In Video 2, the left multi-link mechanism is controlled solely by a PID controller, while the right multi-link mechanism utilizes both PID control and gravity compensation. In Figure 6, you can slide the graphs to switch between the PID (left) and PID + gravity compensation (right) data for comparison.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/02_fixed_comparison.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 2. Comparison of Tracking Performance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/06_fixed_tracking_PID+gravity.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 6. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <p>Lastly, I extracted the feedback data from each PID controller and the gravity calculation block to analyze how the gravity term influences the overall feedback. Figures 7 through 9 display the feedback from each joint.</p> <p>To reduce the torque overshoot, the PID controller’s gain can be adjusted by decreasing \(K_p\) or increasing \(K_d\), though this tends to slow the system. However, as demonstrated in Figures 7 through 9, the feedback from gravity compensation acts to counterbalance the PID controller, effectively reducing torque overshoot without significantly affecting the system’s transient response time. This allows for quicker convergence.</p> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/07_fixed_PID1+g1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/08_fixed_PID2+g2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/09_fixed_PID3+g3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 7 - 9. Feedback Analysis for Each Joint with PID and Gravity Compensation. </div> <h5 id="2-regulation">2) Regulation</h5> <p>Through simulation of the tracking, it was found that compensating for gravity aids in faster system convergence and reduces overshoot. Additionally, systems with gravity compensation restabilized more quickly and exhibited smaller overshoots compared to those without it under similar conditions when dealing with small disturbances. However, for larger disturbances, does gravity compensation resolve issues such as overreaction and destabilization? The answer is no. Despite implementing gravity compensation, these issues remained unresolved for larger disturbances. This conclusion is supported by the results shown in Videos 3 through 5 and Figures 10 through 12.</p> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/03_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 3. Regulation Comparison Under 100N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/10_fixed_regulation_PID+g_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 10. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <hr> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/04_fixed_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 4. Regulation Comparison Under 110N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/11_fixed_regulation_PID+g_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 11. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <hr> <div style="width: 80%; margin: 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/03_fixed_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Video 5. Regulation Comparison Under 3000N Disturbance: PID Control vs. PID with Gravity Compensation. </div> <div style="width: 80%; margin: 0 auto;"> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/12_fixed_regulation_PID+g_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </img-comparison-slider> </div> <div class="caption"> Figure 12. Interactive Graphs of PID vs. PID with Gravity Compensation. </div> <p>Even though gravity compensation could not resolve the overreaction issue, it was observed that systems with gravity compensation recovered more quickly than those without. This quicker recovery was achieved by maintaining a faster angular speed when the angular displacement was small. Through simulation, it was determined that gravity compensation is more effective when there is a small angular displacement. Consequently, under conditions of small angular displacement, using a PID controller with gravity compensation can efficiently manage the system, optimizing performance and stability.</p> <h1 id="ii-a-multi-link-mechanism-with-a-moving-base">II. A Multi-Link Mechanism with a Moving Base</h1> <h3 id="a-overall-system-1">A. Overall System</h3> <p>Thankfully, the base moves only along the x-axis, and there are no gravity terms related to the base. As a result, this setup closely resembles a system with a fixed base. The overall system configuration is depicted in Figure 13.</p> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/13_moving_overall_system.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="caption"> Figure 13. Schematic of the Multi-Link Mechanism Control System with Moving Base </div> <h3 id="b-simulation">B. Simulation</h3> <p>Since there were no significant changes, and I’ve already discussed all the findings in the fixed base section, I will present the results using the same parameters as Day 2. The results demonstrate faster stabilization.</p> <h5 id="1-tracking-1">1) Tracking</h5> <p>Videos 6 through 9 and Figures 14 through 17 demonstrate the tracking capabilities of the controller across various initial states in the simulation of a triple-link mechanism with a moving base. The initial states are defined as follows: for \(q_1\), the values are (180, -90, 150, 190); for \(q_2\), the values are (0, 0, 180, 180); and for \(q_3\), the values are (0, 0, 180, -110).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/06_moving_tracking_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/07_moving_tracking_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/08_moving_tracking_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/09_moving_tracking_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Videos 6 - 9. Demonstrating the Tracking Capabilities of the Controller Across Various Initial States in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/14_moving_tracking_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/15_moving_tracking_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/16_moving_tracking_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/17_moving_tracking_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 14 - 17. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Initial States. </div> <h5 id="2-regulation-1">2) Regulation</h5> <p>Videos 10 through 13 and Figures 18 through 21 demonstrate the tracking capabilities of the controller across various initial states in the simulation of a triple-link mechanism with a moving base. All the initial states, \(q\), were set to 0. Adjustments were then made to the density of the base and the magnitude of disturbance. The densities, denoted as \(\rho_0\), are set to \((2700, 2700, 50000, 50000) kg/m^3\), and the forces, denoted as \(f\), are \((100, 500, 300, 500) N\).</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/10_moving_regulation_1.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/11_moving_regulation_2.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/12_moving_regulation_3.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/posts/2024-05-28-Controller-Design-Day-4/13_moving_regulation_4.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls="" muted=""></video> </figure> </div> </div> <div class="caption"> Videos 10 - 13. Demonstrating the Regulation Capabilities of the Controller Across Various Disturbances in the Triple-Link Mechanism with Moving Base Simulation. </div> <div style="width: 80%; margin: 0 auto;"> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/18_moving_regulation_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/19_moving_regulation_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/20_moving_regulation_3.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-480.webp 480w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-800.webp 800w,/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/posts/2024-05-28-Controller-Design-Day-4/21_moving_regulation_4.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> </div> <div class="caption"> Figures 18 - 21. Analysis of Angular Displacement in the Triple-Link Mechanism with Moving Base Across Various Disturbances. </div> <h1 id="iii-moving-forward">III. Moving Forward</h1> <p>Today, I managed a fully actuated multi-link mechanism using a PID controller complemented by gravity compensation. The simulations revealed that gravity compensation significantly enhances stabilization by maintaining a high angular velocity when the angular displacement is minimal. Upon examining the torque feedback, I observed that gravity compensation acts as a counterbalance to the feedback from the PID, effectively reducing torque overshoot. Therefore, in scenarios involving only slight angular displacements, incorporating gravity compensation can markedly improve system performance.</p> <p>During today’s simulations, I realized that simulating the fixed base system might be time-consuming. Hence, starting from Day 5, I will omit simulations of the fixed base system. Stay tuned for more updates as we continue exploring the fascinating realm of multi-link mechanisms and tackle the challenges associated with controlling chaotic systems!</p> <p><br> <br> <br></p> <h5 id="you-can-find-the-simulink-model-on-my-github-repository">You can find the Simulink model on my <a href="https://github.com/geunee20/Controller_Design" rel="external nofollow noopener" target="_blank">GitHub repository</a>.</h5> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-5/">[Controller Design] Day 5: PID Control with Computed Torque Method</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-2/">[Controller Design] Day 2: PID Controller</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-7/">[Controller Design] Day7: State Feedbak Control - LQR Controller and Energy Shaping</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-6/">[Controller Design] Day 6: State Feedback Control - Pole Placement and Bang-Bang</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/Controller-Design-Day-1/">[Controller Design] Day 1: Creating the Multibody System Using Simscape</a> </li> <div id="disqus_thread" style="max-width: 800px; margin: 0 auto;"> <script type="text/javascript">var disqus_shortname="mingeunpark",disqus_identifier="/blog/2024/Controller-Design-Day-4",disqus_title="[Controller Design] Day 4: PID Control with Gravity Compensation Method";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by Disqus.</a> </noscript> </div> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2024 Min-Geun Park. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Last updated: July 26, 2024. </div> </footer> <script src="/assets/libs/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="/assets/libs/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="/assets/libs/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="/assets/libs/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="/assets/libs/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="/assets/libs/tex-mml-chtml.min.js"></script> <script defer src="/assets/libs/polyfill.min.js"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script defer src="/assets/libs/index.min.js"></script> <script defer src="/assets/libs/swiper-element-bundle.min.js" integrity="sha256-BPrwikijIybg9OQC5SYFFqhBjERYOn97tCureFgYH1E=" crossorigin="anonymous"></script> </body> </html>